"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3222],{49061:function(e,n,t){t.d(n,{b:function(){return c}});var r=t(85893),i=t(49516);t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var a=function(e){return(0,r.jsx)("svg",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){o(e,n,t[n])}))}return e}({width:"8",height:"16",viewBox:"0 0 8 16",fill:"none"},e,{children:(0,r.jsx)("path",{d:"M2.8703 4L3.0578 9.68359H4.9328L5.1203 4H2.8703ZM3.9953 12.6602C4.75116 12.6602 5.19647 12.2676 5.19647 11.5938C5.19647 10.9141 4.75116 10.5215 3.9953 10.5215C3.23944 10.5215 2.79999 10.9141 2.79999 11.5938C2.79999 12.2676 3.23944 12.6602 3.9953 12.6602Z",fill:"currentColor"})}))};function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var c=function(e){var n=e.type,t=void 0===n?"error":n,o=e.spacing,c=void 0===o?"pv3 ph3":o,u=e.className,d=void 0===u?"":u,f=e.title,m=void 0===f?"":f,h=e.description,b=void 0===h?"":h,p=e.children,g=s(e,["type","spacing","className","title","description","children"]);return(0,r.jsxs)("div",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){l(e,n,t[n])}))}return e}({className:"".concat(c," ").concat(d," br2"),style:{background:"".concat("warning"!==t?"success"===t?" #eef5f2":" #fdf1f1":" #fdf9ed")}},g,{children:["error"===t&&(0,r.jsxs)("div",{className:"flex f6 fw6 dark-red br2 items-center lh-title",children:[(0,r.jsx)(a,{className:"w1 h1 mr2 white bg-red b--dark-red flex-no-shrink br-pill"}),m]}),"warning"===t&&(0,r.jsxs)("div",{className:"flex f6 fw6 gold items-center lh-title",children:[(0,r.jsx)(a,{className:"w1 h1 mr2 white bg-yellow b--gold flex-no-shrink br-pill"}),m]}),"success"===t&&(0,r.jsxs)("div",{className:"flex f6 fw6 dark-green items-center lh-title",children:[(0,r.jsx)(i.Z,{className:"flex w1 h1 mr2 white bg-green b--dark-green flex-no-shrink br-pill"}),m]}),b&&(0,r.jsx)("div",{className:"pl2 mt1 ml3 f7 fw5 dark-gray lh-f7",children:b}),p]}))}},58171:function(e,n,t){t.d(n,{g:function(){return u},P:function(){return d}});var r=t(85893),i=t(65988),o=t.n(i);t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){a(e,n,t[n])}))}return e}function s(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var c=new String("select.jsx-8a6f66adb6c4dd0d{outline:0px;\npadding-right:24px;\nbackground-position:right 8px center;\nbackground-repeat:no-repeat}\nselect.jsx-8a6f66adb6c4dd0d::-ms-expand{display:none}");c.__hash="8a6f66adb6c4dd0d";var u=function(e){var n=e.className,t=void 0===n?"":n,i=e.children,a=e.disabled,u=s(e,["className","children","disabled"]);return(0,r.jsxs)("select",l({disabled:a},u,{className:"jsx-d0719c1526f662d3 "+"jsx-".concat(c.__hash)+" "+"br2 form-default-clear bn animate-all fw6 ph2 pv1 f7 lh-f7\n      ".concat(a?" bg-near-white mid-gray":" dark-gray pointer","\n      ").concat(t),children:[i,(0,r.jsx)(o(),{id:c.__hash,children:c}),(0,r.jsx)(o(),{id:"d0719c1526f662d3",children:"select.jsx-d0719c1526f662d3{box-shadow:var(--silver) 0px 0px 0px 1px, inset -1px -1px var(--silver);\nbackground-image:url(\"data:image/svg+xml,%3Csvg width='8' height='16' viewBox='0 0 8 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 7L4 9.5L7 7' stroke='rgb(196, 196, 196)' fill='none' stroke-width='1.8' stroke-linecap='square'/%3E%3C/svg%3E%0A\")}"})]}))},d=function(e){var n=e.children,t=e.disabled,i=void 0!==t&&t,a=e.bordered,u=void 0===a||a,d=e.className,f=void 0===d?"":d,m=s(e,["children","disabled","bordered","className"]),h=i?"moon-gray":"blue",b=i?"":"pointer animate-all hover-bg-black-05",p=u?i?"b--silver":"b--light-gray":"b--transparent";return(0,r.jsxs)("select",l({disabled:i},m,{className:"jsx-baf07ef590aebba2 "+"jsx-".concat(c.__hash)+" "+"".concat(h," ").concat(p," ").concat(b," ").concat(f," f6 fw6 br2 ba pa2 bg-transparent form-default-clear"),children:[n,(0,r.jsx)(o(),{id:c.__hash,children:c}),(0,r.jsx)(o(),{id:"baf07ef590aebba2",children:"select.jsx-baf07ef590aebba2{background-image:url(\"data:image/svg+xml, %3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8' fill='none'%3E%3Cpath d='M5.91938 2H2.08062C1.24212 2 0.775946 2.96993 1.29976 3.6247L3.21913 6.02391C3.61946 6.52432 4.38054 6.52432 4.78087 6.02391L6.70024 3.62469C7.22405 2.96993 6.75788 2 5.91938 2Z' fill='%233b5fc0' /%3E%3C/svg%3E\")}\nselect[disabled].jsx-baf07ef590aebba2{background-image:url(\"data:image/svg+xml, %3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8' fill='none'%3E%3Cpath d='M5.91938 2H2.08062C1.24212 2 0.775946 2.96993 1.29976 3.6247L3.21913 6.02391C3.61946 6.52432 4.38054 6.52432 4.78087 6.02391L6.70024 3.62469C7.22405 2.96993 6.75788 2 5.91938 2Z' fill='%23c4c4c4' /%3E%3C/svg%3E\")}"})]}))}},776:function(e,n,t){t.d(n,{i:function(){return a}});var r=t(85893);t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var a=function(e){var n=e.className,t=void 0===n?"":n,a=o(e,["className"]);return(0,r.jsx)("input",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){i(e,n,t[n])}))}return e}({},a,{type:"range",style:{height:6},className:"form-default-clear form-custom-slider br-pill ".concat(a.disabled?" mid-gray bg-black-10 disabled ":" dark-gray bg-light-silver hover-near-black"," ").concat(a.disabled?" disabled not-allowed":" animate-all pointer"," ").concat(t,"\n     ")}))}},24576:function(e,n,t){t.d(n,{g:function(){return s}});var r=t(85893);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){i(e,n,t[n])}))}return e}function a(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function l(e){var n=e.currentTarget;n.style.height="initial",n.style.height="".concat(n.scrollHeight,"px")}var s=t(67294).forwardRef((function(e,n){var t=e.hasError,i=void 0!==t&&t,s=e.autoResize,c=void 0!==s&&s,u=e.className,d=void 0===u?"":u,f=e.style,m=e.rows,h=a(e,["hasError","autoResize","className","style","rows"]);return(0,r.jsx)("textarea",o({},h,{ref:function(e){"function"===typeof n?n(e):n&&(n.current=e),e&&l({currentTarget:e})},onInput:c?l:void 0,rows:c?1:m,style:o({resize:"vertical"},f,c&&{resize:"none",maxHeight:void 0===m?"none":"calc(".concat(m," * 1.5em + 2 * var(--spacing-small))")}),className:"form-default-clear form-custom-input pa2 f6 fw5 br2 lh-copy ".concat(e.disabled?" mid-gray bg-near-white disabled":" dark-gray bg-white blue-ring-focus"," ").concat(d," ").concat(i?" has-error":"")}))}))},20042:function(e,n,t){t.d(n,{o:function(){return y}});var r=t(85893),i=t(55267),o=t(602),a=t(44754),l=t(67294),s=t(8385),c=t(15612),u=t(89905);function d(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function f(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){f(e,n,t[n])}))}return e}function h(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function b(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||g(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,n){if(e){if("string"===typeof e)return d(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,n):void 0}}var v=function(e){var n=e.member,t=e.flagExternal;return"invited"in n?(0,r.jsxs)("div",{className:"flex truncate items-center",children:[(0,r.jsx)("div",{className:"mr2 br-100 bg-light-silver flex items-center justify-center",style:{height:24,width:24},children:(0,r.jsx)(i.Z,{height:14,className:"mid-gray"})}),(0,r.jsxs)("div",{className:"truncate",children:[n.login," ",(0,r.jsx)("span",{className:"truncate gray",children:"(Invite)"})]})]}):(0,r.jsxs)("div",{className:"flex truncate items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex truncate items-center",children:[(0,r.jsx)(s.q,{user:n,size:24,className:"mr2 br-100"}),(0,r.jsx)("div",{className:"truncate",children:n.name?(0,r.jsxs)(r.Fragment,{children:[n.name,"\xa0",n.name!==n.login&&(0,r.jsxs)("span",{className:"truncate gray",children:["(@",n.login,")"]})]}):n.login})]}),t&&!n.is_teammate&&(0,r.jsx)("div",{className:"gray f7 ml2",children:"External"})]})},y=function(e){var n=e.universe,t=e.excluded,i=e.onSelectUser,s=e.disabled,d=e.placeholder,f=e.value,g=e.allowEmail,y=void 0!==g&&g,x=e.teamId,j=h(e,["universe","excluded","onSelectUser","disabled","placeholder","value","allowEmail","teamId"]),w=b((0,a.G)(""),3),O=w[0],k=w[1],C=w[2];(0,l.useEffect)((function(){k("")}),[f,k]);var N=b((0,o.h_)((function(){var e=C.trim();return!n&&e.length>=2&&e.length<=40?"/users-match?".concat(new URLSearchParams(m({input:e},x?{teamId:x}:{}))):null})),2),S=N[0],P=N[1],E=(0,l.useState)(void 0),A=E[0],L=E[1];return(0,l.useEffect)((function(){var e;if(O.length){var r=[],i=null===(e=C.trim().match(/([^,\s]*)/))||void 0===e?void 0:e[0];if(y&&i&&function(e){return null!==e.match(/^\S+@\S+\.\S+$/)}(i)&&r.push({login:i,invited:!0}),n){var o,a=O.toLocaleLowerCase();(o=r).push.apply(o,p(n.map((function(e){return m({},e,{is_teammate:!0})})).filter((function(e){return!(null===t||void 0===t?void 0:t.some((function(n){return n.id===e.id})))&&(e.name&&e.name.toLowerCase().indexOf(a)>-1||e.login.toLowerCase().indexOf(a)>-1)})).sort((function(e,n){return(e.name||e.login).localeCompare(n.name||n.login)})))),L(r)}else{var l;if(S&&!P)(l=r).push.apply(l,p(S.filter((function(e){return!(null===t||void 0===t?void 0:t.some((function(n){return n.id===e.id})))})))),L(r)}}else L([])}),[S,i,n,t,O,C,y,P]),(0,r.jsxs)(c.hQ,m({openOnFocus:void 0!==A,onSelect:function(e){A&&i(A[+e])}},j,{children:[f?(0,r.jsxs)("div",{className:"h2 ph2 pv1 br2 form-custom-input flex items-center justify-between",children:[(0,r.jsx)(v,{member:f,flagExternal:!!x}),(0,r.jsx)(u.Z,{className:"gray pointer",onClick:function(){return i(null)}}),(0,r.jsx)(c.gA,{className:"dn"})]}):(0,r.jsx)(c.gA,{className:"w-100 border-box","data-cy":"user-select",placeholder:d,disabled:s,autocomplete:!1,value:O,onChange:function(e){return k(e.target.value)}}),A&&(0,r.jsx)(c.SF,{children:A.length>0?(0,r.jsx)(c.Gk,{style:{maxHeight:"20rem"},children:A.map((function(e,n){return(0,r.jsx)(c.O2,{className:"pa2",value:String(n),children:(0,r.jsx)(v,{member:e,flagExternal:!!x})},e.login)}))}):(0,r.jsx)("p",{className:"ma2 pa1 f6 fw5 mid-gray",children:"No users found"})})]}))}},55267:function(e,n,t){var r=t(85893);t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}n.Z=function(e){return(0,r.jsxs)("svg",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){i(e,n,t[n])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e,{children:[(0,r.jsx)("rect",{x:"2",y:"3",width:"12",height:"10",rx:"0.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M9.74104 7.4806L14.541 12.4806L13.459 13.5194L8.65896 8.5194L9.74104 7.4806ZM1.45896 12.4806L6.25896 7.4806L7.34104 8.5194L2.54104 13.5194L1.45896 12.4806Z",fill:"currentColor"}),(0,r.jsx)("path",{d:"M8 9L7.46967 9.53033C7.76256 9.82322 8.23744 9.82322 8.53033 9.53033L8 9ZM1.46967 3.53033L7.46967 9.53033L8.53033 8.46967L2.53033 2.46967L1.46967 3.53033ZM8.53033 9.53033L14.5303 3.53033L13.4697 2.46967L7.46967 8.46967L8.53033 9.53033Z",fill:"currentColor"})]}))}},76305:function(e,n,t){var r=t(85893);t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}n.Z=function(e){return(0,r.jsxs)("svg",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){i(e,n,t[n])}))}return e}({width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"},e,{children:[(0,r.jsx)("path",{d:"M3 10C2.46373 10 1 9.57867 1 8C1 6.42133 2 5.5 3.5 5.5C3.5 3 5.5 1 8 1C11 1 12.5 3.5 12.5 4C15.5 4 16.2061 10 13 10"}),(0,r.jsx)("path",{d:"M11 10L8 7L5 10"}),(0,r.jsx)("path",{d:"M7.99805 14.3882L7.99805 7.38818"})]}))}},28925:function(e,n,t){t.d(n,{E:function(){return j}});var r=t(85893),i=t(37497),o=t(33090),a=t(776),l=t(76305),s=t(58127),c=t(2741),u=t(88725),d=t(67294),f=t(27011),m=t.n(f);function h(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){h(e,n,t[n])}))}return e}function p(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var g=["image/gif","image/jpeg","image/jpg","image/png"];function v(e){return e.dataTransfer.items.length?!!y(e.dataTransfer.items):e.dataTransfer.types.includes("Files")}function y(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(a.type&&a.type.startsWith("image/"))return a}}catch(l){t=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}var x=156.25,j=function(e){var n=function(e){try{var n=y(e);if(n){var t=URL.createObjectURL(n);U(t),E(!0),z(1),T("")}else e.length&&T("Sorry, that image format is not supported.")}catch(r){console.error(r)}},t=function(){if(T(""),H.current){Y.current&&Y.current();var e=setTimeout((function(){if(Y.current=void 0,H.current&&H.current.getCroppingRect()){var e=H.current.getImage(),n=document.createElement("canvas");n.width=640,n.height=400;var t=n.getContext("2d");t.fillStyle="#fff",t.fillRect(0,0,640,400),t.drawImage(e,0,0,e.width,e.height,0,0,640,400);var r=n.toDataURL("image/jpeg",.7);_(r)}}),150);Y.current=function(){return clearTimeout(e)}}},f=e.thumbnail,h=e.defaultThumbnail,j=e.onValueChange,w=e.className,O=p(e,["thumbnail","defaultThumbnail","onValueChange","className"]),k=(0,s.Y)((function(e){n(e.dataTransfer.files)}),v),C=k.isDraggingOver,N=k.dragAndDropEvents,S=(0,d.useState)(!1),P=S[0],E=S[1],A=(0,d.useState)(),L=A[0],_=A[1],I=(0,d.useState)(),D=I[0],U=I[1];(0,d.useEffect)((function(){f&&h!==f&&(_(f),E(!0),U(""))}),[f,h]);var M=(0,d.useState)(null),R=M[0],T=M[1],Z=(0,d.useRef)(null),q=(0,d.useState)(1),F=q[0],z=q[1],V=(0,d.useState)(),B=V[0],$=V[1],H=(0,d.useRef)(null),W=(0,d.useRef)(null);(0,d.useEffect)((function(){W.current&&W.current.focus()}),[]),(0,d.useEffect)((function(){P||T(""),Z.current&&Z.current.setCustomValidity(!P||!R&&L?"":"Please upload an image"),j(P&&L?L:"")}),[j,P,L,R]);var Y=(0,d.useRef)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex items-top flex-wrap flex-nowrap-l ".concat(w||""),onClick:function(){W.current&&W.current.focus()},children:[(0,r.jsxs)("div",{className:"mr2",children:[(0,r.jsx)(o.E,{name:"thumbnail",label:"Automatic",checked:!P,onChange:function(e){return E("on"!==e.target.value)}}),(0,r.jsx)(o.E,{name:"thumbnail",label:"Custom",description:"Use a .png or .jpg that is at least 640x400 pixels",checked:P,onChange:function(e){return E("on"===e.target.value)}}),(0,r.jsx)("input",b({hidden:!0,ref:Z,onInvalid:function(e){return e.preventDefault()},onInput:function(){},value:P&&L?L:""},O)),(0,r.jsx)("input",{type:"text",style:{opacity:0,width:0,height:0},ref:W,onPaste:function(e){return n(e.clipboardData.files)}}),(0,r.jsxs)("div",{className:"flex items-top mb2",children:[(0,r.jsx)("div",{className:"w-10 db-l dn"}),(0,r.jsx)(i.aX,{text:"Upload file",icon:l.Z,onClick:function(){return(0,c.Z)({accept:g.join()}).then((function(e){n(e)}))}})]})]}),(0,r.jsxs)("div",{children:[!(P&&D)&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",b({},N,{className:"flex flex-column ba ".concat(R&&!C?"b--dark-pink":C?"b--dashed b-dark-gray":"b--moon-gray"),style:{width:250,height:x,backgroundImage:P&&L?"url(".concat((0,u.Nl)(L),")"):!P&&h?"url(".concat((0,u.Nl)(h),")"):"var(--checkerboard)",backgroundSize:P&&L||!P&&h?"cover":"8%"}}))}),P&&D&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",b({},N,{className:"flex flex-column ba ".concat(R?"b--dark-pink":C?"b--dashed b--dark-gray":"b--white"),children:(0,r.jsx)(m(),{image:D,ref:H,width:198,height:123.75,scale:F,position:B,borderRadius:0,onPositionChange:function(e){return $(e)},onImageReady:t,onImageChange:t,onLoadFailure:function(){T("Unable to read that image."),U("")}})})),(0,r.jsxs)("div",{className:"flex items-center mid-gray mt2",children:[(0,r.jsx)("label",{className:"mr2 f6",htmlFor:"scale-range",children:"Zoom"}),(0,r.jsx)(a.i,{className:"flex-grow-1",name:"scale-range",onChange:function(e){return z(e.target.valueAsNumber)},value:F,step:"any",min:1,max:2})]})]}),R?(0,r.jsx)("div",{className:"dark-pink f7 fw4 mb2 mt1",children:R}):null]})]})})}},3222:function(e,n,t){t.d(n,{$:function(){return Ye}});var r=t(6204),i=t(34051),o=t.n(i),a=t(85893),l=t(56424),s=t(54329),c=t(602),u=t(19671),d=t(70915),f=t(66421),m=t(25655),h=t(81816),b=t(36448),p=t(67294),g=t(94677),v=t(54924),y=(t(14416),(0,v.S)()),x=t(8385),j=t(37497),w=t(93314),O=t(11233),k=t(58171),C=t(24576),N=t(22027),S=t(93452);function P(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function E(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function A(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){E(o,r,i,a,l,"next",e)}function l(e){E(o,r,i,a,l,"throw",e)}a(void 0)}))}}function L(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function I(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return P(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return P(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,n,t){var r={user:e,public:n.filter((function(e){return"public"===e.type&&e.id!==t})),private:n.filter((function(e){return"private"===e.type&&e.id!==t}))},i=function(e){var n=new Set(e.map((function(e){return e.id})));return function(e,t){return+n.has(t.id)-+n.has(e.id)||e.title.localeCompare(t.title)}}(n);return r.public.sort(i),r.private.sort(i),r}var U=function(e){var n=e.collection,t=e.checked,r=e.onChange;return(0,a.jsxs)("label",{htmlFor:"collection-".concat(n.id),className:"flex f6 fw5 dark-gray hover-blue flex-auto pointer",children:[(0,a.jsx)(w.X,{id:"collection-".concat(n.id),checked:t,onChange:function(e){return r(n,e.target.checked)},spacing:""}),(0,a.jsx)("span",{title:n.title,className:"truncate pointer",children:n.title})]})};var M=function(e){var n=e.group,t=e.type,r=e.selected,i=e.onChange,o=e.filters,l=e.restricted,s=void 0!==l&&l,c="public"===t?n.public:n.private,u=c.filter((function(e){return function(e,n){return n.every((function(n){return e.toLowerCase().includes(n)}))}(e.title,o)}));return(0,a.jsxs)("div",{className:"mt1",children:[(0,a.jsxs)("div",{className:"f7 fw5 gray",children:[(0,a.jsx)("span",{className:"ttc",children:t})," collections (",o.length?"".concat(u.length," / "):"",c.length,")"]}),s?(0,a.jsx)("div",{className:"f7 gray lh-f7",children:"Only team owners can add public or shared notebooks to public collections."}):u.length>0&&(0,a.jsx)("div",{className:"pt1 pb3",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gridGap:"10px"},children:u.map((function(e){return(0,a.jsx)(U,{collection:e,checked:r.some((function(n){return n.id===e.id})),onChange:i},e.id)}))})]},t)},R=function(e){var n=e.onCollectionCreated,t=e.owner,r=e.currentUser,i="private",l=(0,p.useState)(i),s=l[0],c=l[1],m=(0,p.useState)(""),h=m[0],b=m[1];function g(){return(g=A(o().mark((function e(a){var l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,(0,d.BL)(h,s,t);case 3:(l=e.sent)&&(n(t,s,l),(0,u.MR)((0,u.y6)({type:"collection:manage:create",data:{trigger:"click",source:"notebookCollectionsModal"},eventVersion:1,collection:l,currentUser:r})),b(""),c(i));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,a.jsxs)("form",{onSubmit:function(e){return g.apply(this,arguments)},className:"flex items-center",autoComplete:"off",children:[(0,a.jsx)(O.Z,{name:"title",placeholder:"New collection",type:"text",className:"overflow-hidden flex-grow-1",value:h,onChange:function(e){return b(e.target.value)}}),(0,a.jsxs)(k.P,{name:"type",onChange:function(e){return c(e.target.value)},value:s,disabled:!h,className:"mh2",children:[(0,a.jsx)("option",{value:"private",children:"team"===t.type?"Team Private":"Private"}),(0,f.XM)(r,t)&&(0,a.jsx)("option",{value:"public",children:"Public"})]}),(0,a.jsx)(j.aX,{text:"Create",type:"submit",disabled:!h})]})},T=function(e){var n=function(e,n){v(n?g.concat(e):g.filter((function(n){return n.id!==e.id})))},t=e.collectionListing,r=e.onDismiss,i=e.dispatch,o=e.currentUser,u=t.owner,d=q(t)?t.collections:t.parent_collections,h=(0,p.useState)(d),g=h[0],v=h[1],y=(0,p.useState)(null),w=y[0],k=y[1],P=(0,p.useState)(!1),E=P[0],A=P[1],L=(0,p.useState)([]),_=L[0],U=L[1],T=(0,p.useState)(t.description),Z=T[0],z=T[1],V=t.description!==Z,B=g.filter((function(e){return!d.some((function(n){return n.id===e.id}))})),$=d.filter((function(e){return!g.some((function(n){return n.id===e.id}))})),H=0===B.length&&0===$.length&&!V,W=(0,f.Zs)(o,t),Y=I((0,c.h_)(W?"/collections/@".concat(u.login):null),3),G=Y[0],K=Y[2],Q=!q(t)||(0,m.s9)(t)?o.teams.find((function(e){return e.id!==u.id&&(0,f.pb)(e)})):void 0,X=I((0,c.h_)(Q?"/collections/@".concat(Q.login):null),1)[0];(0,p.useEffect)((function(){v(d)}),[d]),(0,p.useEffect)((function(){if((!W||G)&&(!Q||X)){var e=[],n=F(t)?t.id:void 0;G&&e.push(D(u,G,n)),Q&&X&&e.push(D(Q,X,n)),k(e.filter((function(e){return e.public.length+e.private.length>0})).sort(function(e){return function(n,t){var r=n.user,i=t.user;return r.id===e.id?-1:i.id===e.id?1:r.login.localeCompare(i.login)}}(o)))}}),[G,X,Q,W,o,u,t]);var J=g.length?g.map((function(e){return e.title})).join(", "):"None",ee=Z&&Z.length||0;return(0,a.jsxs)(l.Vq,{onDismiss:r,"aria-labelledby":"modal-title",children:[(0,a.jsx)(S.xB,{title:"Add to collection",icon:s.Z,onDismiss:r}),(0,a.jsxs)(S.fe,{children:[(0,a.jsxs)("div",{className:"truncate f6 fw5 gray",children:[(0,a.jsxs)("span",{children:["Selected (",g.length,"): "]}),(0,a.jsx)("b",{title:J,className:"fw6 dark-gray",children:J})]}),(0,a.jsx)(O.Z,{name:"filter",className:"db w-100 mt2 mb3",placeholder:"Filter collections",type:"text",onChange:function(e){return U(e.target.value.toLowerCase().split(/\s+/).filter((function(e){return e})))}}),(0,a.jsx)("div",{className:"mv2 overflow-auto",style:{height:250},children:null===w?(0,a.jsxs)("div",{className:"flex f7 fw6 gray items-center justify-center lh-copy fade-in delay-short h-100",children:[(0,a.jsx)(N.Z,{}),(0,a.jsx)("span",{className:"ml2",children:"Loading"})]}):w.length>0?w.map((function(e){return(0,a.jsxs)("div",{className:"pb1 mb3",children:[(w.length>1||e.user.id!==o.id)&&(0,a.jsxs)("div",{className:"flex mb2 f6 fw5 near-black items-center",children:[(0,a.jsx)(x.q,{user:e.user,size:16,className:"mr2 br-100"}),(0,a.jsx)("span",{children:(0,b.RX)(e.user)})]}),e.private.length?(0,a.jsx)(M,{type:"private",group:e,filters:_,selected:g,onChange:n},"".concat(e.user.id,":private")):null,e.public.length?(0,a.jsx)(M,{type:"public",group:e,filters:_,selected:g,onChange:n,restricted:q(t)&&!(0,f.M6)(o,e.user,t)},"".concat(e.user.id,":public")):null]},e.user.id)})):(0,a.jsx)("div",{className:"flex f7 fw5 gray items-center justify-center lh-copy fade-in h-100",children:"You don\u2019t have any collections."})})]}),(0,a.jsxs)(S.mz,{children:[(0,f.pq)(o,u)&&(0,a.jsx)(R,{owner:u,onCollectionCreated:function(e,t,r){r&&(n(r,!0),K())},currentUser:o}),q(t)&&(0,f.qG)(o,t)&&(0,a.jsxs)("div",{className:"mv3",children:[(0,a.jsx)("div",{className:"mv2 fw5 dark-gray",children:"Set notebook description (internal use only)"}),(0,a.jsx)(C.g,{name:"description",className:"db w-100",placeholder:"Enter notebook description. Currently only used for editorial purposes, e.g. our blog.",value:Z||"",maxLength:300,onChange:function(e){return z(e.target.value)}}),(0,a.jsx)("div",{className:"flex flex-column items-end mt2 gray f7 fw5",children:(0,a.jsx)("div",{children:"(".concat(ee,"/").concat(300,")")})})]}),(0,a.jsxs)(j.CQ,{className:"mt2",children:[(0,a.jsx)(j.kq,{text:"Cancel",onClick:r}),(0,a.jsx)(j.KM,{disabled:H,loading:E,onClick:function(){A(!0),F(t)?i({type:"updateCollectionInCollections",addTo:B,removeFrom:$,collectionId:t.id,onDismiss:r}):(i({type:"collections",addTo:B,removeFrom:$,onDismiss:r}),Z&&V&&i({type:"descriptionUpdate",description:Z,onDismiss:r}))},text:"Confirm"})]})]})]})},Z=y((function(e){return{currentUser:e.currentUser}}),(function(e){return{dispatch:e}}))((function(e){var n=e.collectionListing,t=e.onDismiss,r=_(e,["collectionListing","onDismiss"]),i=I((0,c.h_)(function(e){return"type"in e&&("notebook_reader"===e.type||"notebook_owner"===e.type)}(n)?"/document/".concat(n.id):null),3),o=i[0],l=i[2],s=I((0,c.h_)(function(e){return"listing_type"in e&&"collection"===e.listing_type}(n)||function(e){return"ordered"in e&&!("listing_type"in e)}(n)?"/collection/@".concat(n.owner.login,"/").concat(n.slug,"?").concat((0,h.P)({page:1})):null),3),u=s[0],d=s[2],m=(0,p.useState)(),b=m[0],v=m[1];(0,p.useEffect)((function(){q(n)||F(n)?v(n):o?((0,f.iU)(e.currentUser,o),v((0,g.D)({initialNotebook:o,initialCurrentUser:e.currentUser,initialContext:o.owner}))):v(u||void 0)}),[n,v,o,u,e.currentUser]);var y=(0,p.useCallback)((function(){l(),d(),t()}),[l,d,t]);return b?(0,a.jsx)(T,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){L(e,n,t[n])}))}return e}({collectionListing:b,onDismiss:y},r)):null}));function q(e){return"collections"in e}function F(e){return"parent_collections"in e}var z=t(76267),V=t(49061),B=t(33090),$=t(87769),H=t(92946),W=t(27193),Y=t(4598),G=t(47692),K=t(44754);function Q(e){return e.length>0}function X(e){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e.normalize("NFD").replace(/[\u0300-\u036f'\u2018\u2019]/g,"").toLowerCase().split(n?/[^a-z0-9_.]+/g:/\W+/g).filter(Q),r=t.length,i=0,o=-1;++o<r;)if((i+=t[o].length)>50){t[o]=t[o].substring(0,50-i+t[o].length);break}return t.slice(0,o+1).filter(Boolean).join("-")||"untitled"}function J(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ee(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ne(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){ee(e,n,t[n])}))}return e}function te(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function re(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return J(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return J(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ie,oe=/^[0-9a-z_-]+(?:\/[0-9]+)?$/;!function(e){e[e.Empty=0]="Empty",e[e.Conflict=1]="Conflict",e[e.Invalid=2]="Invalid",e[e.TooLong=3]="TooLong",e[e.Available=4]="Available"}(ie||(ie={}));var ae=function(e){var n=e.slug,t=e.title,r=e.owner,i=e.notebookId,o=e.isPublic,l=e.onValueChange,s=e.className,u=te(e,["slug","title","owner","notebookId","isPublic","onValueChange","className"]),d=re((0,K.G)("",250),3),f=d[0],m=d[1],h=d[2],b=(0,p.useState)(ie.Available),g=b[0],v=b[1],y=(0,p.useState)(!1),x=y[0],j=y[1],w=re((0,c.h_)((function(){return!f||h!==f||g!==ie.Available&&g!==ie.Conflict?null:"/document/".concat(i,"/slug-exists?slug=").concat(encodeURIComponent(f))})),1)[0];(0,p.useEffect)((function(){j(!!n)}),[o,n,m]),(0,p.useEffect)((function(){m((x||o)&&n?n:"")}),[n,m,x,t,o]),(0,p.useEffect)((function(){l(f)}),[l,f]),(0,p.useEffect)((function(){var e=ie.Available;f?f.length>255?e=ie.TooLong:f.match(oe)?(null===w||void 0===w?void 0:w.exists)&&(e=ie.Conflict):e=ie.Invalid:e=ie.Empty,v(e),k.current&&k.current.setCustomValidity(x&&e!==ie.Available?"Please enter a Url":""),l(f)}),[f,v,w,l,x]);var O,k=(0,p.useRef)(null),C=g!==ie.Available&&g!==ie.Empty,N=(O=g)===ie.Conflict?"A notebook already exists at that URL.":O===ie.Invalid?"URL can only include lowercase alphanumeric characters, hyphens, underscores, and an optional forward slash suffix (/2).":O===ie.TooLong?"URL must be less than 255 characters long.":null;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-column",children:[(0,a.jsx)(B.E,{name:"slugMode",label:"Automatic",checked:!x,onChange:function(e){return j("on"!==e.target.value)}}),(0,a.jsx)(B.E,{name:"slugMode",label:"Custom",checked:x,onChange:function(e){return j("on"===e.target.value)}})]}),(0,a.jsxs)("div",{className:"ba br2 pa0 mt2 flex items-stretch f5 fw5\n          ".concat(C?"b--dark-pink":"b--black-10 hover-b--black-30"," ").concat(s),children:[(0,a.jsx)("div",{className:"bg-near-white br b--black-10 br2 br--left mid-gray ma0 pa2 db-l dn ".concat(x?"":"flex-grow-1"),children:o&&!x?(0,a.jsxs)(a.Fragment,{children:["observablehq.com/@",r.login,"/",X(t)]}):o||x?(0,a.jsxs)(a.Fragment,{children:["observablehq.com/@",r.login,"/"]}):(0,a.jsxs)(a.Fragment,{children:["observablehq.com/d/",i]})}),x&&(0,a.jsx)("input",ne({type:"text",onInvalid:function(e){return e.preventDefault()},ref:k,className:"ba0 br2 br--right pa2 bn near-black flex-grow-1",placeholder:o?X(t):"",disabled:!x,value:f,onInput:function(e){return m(e.target.value)}},u))]}),N?(0,a.jsx)("div",{className:"dark-pink f7 fw4 h2",children:N}):null]})},le=t(28925),se=Object.values(Y.c).map((function(e){return e.shorthand})),ce=(0,v.Z)((function(e){return{notebook:e.notebook}}),(function(e){return{dispatch:e}}))((function(e){var n=e.notebook,t=e.dispatch,r=e.onDismiss,i=(0,p.useState)(""),o=i[0],s=i[1],c=(0,p.useState)(""),u=c[0],d=c[1],f=(0,p.useState)(!0),m=f[0],h=f[1],b=n.publishLevel,g=n.thumbnail,v=n.defaultThumbnail,y=(0,W.Ui)("title"in n?n:n.model);(0,p.useEffect)((function(){h("shared"!==b)}),[b]);var x=(0,p.useRef)(null),w=(0,p.useState)(!0),O=w[0],k=w[1],C=!1;if("model"in n){var N=(0,G.Z)(n.model.nodes);C=N.databaseClients.size>0||N.secrets.size>0||Array.from(N.fileAttachments).some((function(e){return se.some((function(n){return e.startsWith(n+"://")}))}))}return(0,a.jsx)(l.Vq,{onDismiss:r,"aria-labelledby":"modal-title",children:(0,a.jsxs)("form",{noValidate:!0,name:"publishForm",ref:x,onSubmit:function(e){e.preventDefault(),t({type:"publishRequested",unlisted:!m,customThumbnail:u,customSlug:o}),r()},children:[(0,a.jsx)(S.xB,{title:"Publish",icon:$.Z,onDismiss:r}),(0,a.jsxs)(S.fe,{children:[(0,a.jsx)(S.pe,{title:"Thumbnail"}),(0,a.jsxs)("div",{className:"flex flex-column",children:[(0,a.jsx)(le.E,{thumbnail:g,defaultThumbnail:v,onValueChange:function(e){d(e),x.current&&k(x.current.checkValidity())}}),(0,a.jsx)(S.pe,{title:"Visibility"}),(0,a.jsx)(B.E,{name:"visibility",label:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr1",children:"Public"})," ",(0,a.jsx)($.Z,{})]}),checked:m,disabled:"public"===b,description:"Make discoverable on the Explore page and via Search",onChange:function(e){return h("on"===e.target.value)}}),(0,a.jsx)(B.E,{name:"visibility",id:"visibility_unlisted",label:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr1",children:"Unlisted"})," ",(0,a.jsx)(H.ZP,{})]}),checked:!m,disabled:"public"===b,description:"Only people with the URL will be able to view",onChange:function(e){return h("on"!==e.target.value)}}),(0,a.jsx)(S.pe,{title:"Notebook URL"}),(0,a.jsx)("div",{children:(0,a.jsx)(ae,{owner:n.owner,notebookId:n.id,title:y,slug:n.slug,isPublic:m,onValueChange:function(e){s(e),x.current&&k(x.current.checkValidity())}})})]})]}),(0,a.jsxs)(S.mz,{children:[C&&(0,a.jsx)(V.b,{type:"warning",className:"mb3",title:"Some features will stop working when you publish",description:"Database clients, cloud files, and secrets can only be used in private notebooks."}),(0,a.jsxs)(j.CQ,{children:[(0,a.jsx)(j.kq,{type:"reset",onClick:r,text:"Cancel"}),(0,a.jsx)(j.KM,{type:"submit",disabled:!O,text:"Publish"})]})]})]})})})),ue=t(21013),de=t(75713),fe=(0,v.Z)((function(e){return{notebook:e.notebook}}),(function(e){return{dispatch:e}}))((function(e){var n=e.notebook,t=e.dispatch,r=e.onDismiss,i=(0,p.useState)(""),o=i[0],s=i[1],c=n.thumbnail,u=n.defaultThumbnail,d=(0,p.useRef)(null),f=(0,p.useState)(!0),m=f[0],h=f[1],b=m&&(o||c!==n.defaultThumbnail)&&o!==c;return(0,a.jsx)(l.Vq,{onDismiss:r,"aria-labelledby":"modal-title",children:(0,a.jsxs)(de.l,{ref:d,className:"relative f6 lh-copy",onSubmit:function(e){e.preventDefault(),t({type:"setNotebookThumbnail",customThumbnail:o}),r()},children:[(0,a.jsx)(S.xB,{title:"Set Preview",icon:ue.Z,onDismiss:r}),(0,a.jsx)(S.fe,{children:(0,a.jsx)("div",{className:"flex flex-column",children:(0,a.jsx)(le.E,{thumbnail:c,defaultThumbnail:u,onValueChange:function(e){s(e),d.current&&h(d.current.checkValidity())}})})}),(0,a.jsx)(S.mz,{children:(0,a.jsxs)(j.CQ,{children:[(0,a.jsx)(j.kq,{text:"Cancel",onClick:r}),(0,a.jsx)(j.KM,{text:"Confirm",type:"submit",disabled:!b})]})})]})})})),me=t(18794);function he(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function be(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return he(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return he(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var pe,ge=/^[0-9a-z_-]+(?:\/[0-9]+)?$/;!function(e){e[e.Empty=0]="Empty",e[e.Conflict=1]="Conflict",e[e.Invalid=2]="Invalid",e[e.TooLong=3]="TooLong",e[e.Available=4]="Available"}(pe||(pe={}));var ve=(0,v.Z)((function(e){return{notebook:e.notebook}}),(function(e){return{dispatch:e}}))((function(e){var n=e.notebook,t=e.dispatch,r=e.onDismiss,i=function(e){t({type:"setSlug",slug:e})},o=n.id,s=n.owner,u=n.slug,d=(0,W.Ui)("model"in n?n.model:n),f=be((0,K.G)(u||X(d),150),3),m=f[0],h=f[1],b=f[2],g=(0,p.useState)(pe.Available),v=g[0],y=g[1],x=be((0,c.h_)((function(){return b&&o&&(v===pe.Available||v===pe.Conflict)?"/document/".concat(o,"/slug-exists?slug=").concat(encodeURIComponent(b)):null})),1)[0];(0,p.useEffect)((function(){return b?b.length>255?y(pe.TooLong):b.match(ge)?(null===x||void 0===x?void 0:x.exists)?y(pe.Conflict):void y(pe.Available):y(pe.Invalid):y(pe.Empty)}),[b,y,x]);var w,O=v===pe.Available,k=!O&&v!==pe.Empty;return(0,a.jsx)(l.Vq,{onDismiss:r,"aria-labelledby":"modal-title","data-dialog-wide":!0,children:(0,a.jsxs)(de.l,{className:"relative f6 lh-copy",onSubmit:function(e){e.preventDefault(),i(m),r()},children:[(0,a.jsx)(S.xB,{title:"Set URL",icon:me.Z,onDismiss:r}),(0,a.jsxs)(S.fe,{children:[(0,a.jsxs)("div",{className:"flex items-stretch br2 ba ".concat(k?"b--dark-pink":"b--black-10 hover-b--black-30"),children:[(0,a.jsxs)("div",{className:"pa2 pr0 pr1 black-70 bg-near-white br b--black-10 br2 br--left",onClick:function(){var e;null===(e=document.querySelector("#slug"))||void 0===e||e.focus()},children:["observablehq.com/@",s.login,"/"]}),(0,a.jsx)("input",{id:"slug",placeholder:m,value:m,className:"pa2 black br2 flex-auto br--right bn",onChange:function(e){return h(e.target.value)}})]}),k?(0,a.jsx)("div",{className:"pa1 mt1 f7 fw5 dark-pink",children:(w=v,w===pe.Conflict?"A notebook already exists at that URL.":w===pe.Invalid?"URL can only include lowercase alphanumeric characters, hyphens, underscores, and an optional forward slash suffix (/2).":w===pe.TooLong?"URL must be less than 255 characters long.":null)}):null]}),(0,a.jsx)(S.mz,{children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(j.sn,{text:"Reset",destructive:!0,"data-cy":"reset-slug",onClick:function(e){e.preventDefault(),i(null),r()}}),(0,a.jsxs)(j.CQ,{children:[(0,a.jsx)(j.kq,{text:"Cancel",onClick:r}),(0,a.jsx)(j.KM,{text:"Confirm",type:"submit",disabled:!O})]})]})})]})})})),ye=t(55267),xe=t(2537),je=t(84193),we=t(37724),Oe=t(38561),ke=t(20042),Ce=t(27919);function Ne(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Se(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Pe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Se(e,n,t[n])}))}return e}function Ee(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||Le(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e){return function(e){if(Array.isArray(e))return Ne(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,n){if(e){if("string"===typeof e)return Ne(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ne(e,n):void 0}}var _e=null,Ie={id:"0",role:_e,login:"",avatar_url:null,team_role:null,type:"team",status:"member",pending:!0};function De(e){return{id:e.id,login:e.login||e.id,avatar_url:e.avatar_url,name:e.name,type:"individual",role:null,team_role:e.role,status:"member",pending:!0}}function Ue(e,n){return{id:e.id,login:e.login||e.id,avatar_url:e.avatar_url,name:e.name,type:"type"in e?e.type:"individual",team_role:"team_role"in e?e.team_role:_e,role:n,status:"status"in e?e.status:"member",pending:!0}}function Me(e){return{avatar_url:e.avatar_url,login:e.login,name:e.name||e.login,bio:"",home_url:"",id:e.id,github_login:null}}function Re(e,n){return n.find((function(n){return n.id===e.id}))||Ue(e,_e)}function Te(e,n){switch(e){case"editor":return"team"===n.type?"Can view or edit":"Can edit";case"viewer":return"Can view";default:return"team"===n.type?"No access":"invited"!==n.status||n.pending?"Remove":"Rescind invitation"}}var Ze=function(e){var n=e.member,t=e.roles,r=e.changeMemberRole;return(0,a.jsx)(k.P,{name:"role_change",value:n.role||"",onChange:function(e){r(n,e.target.value?e.target.value:null)},disabled:t.length<=1,children:t.map((function(e){return(0,a.jsx)("option",{value:e||"",children:Te(e,n)},e)}))})},qe=function(e){var n=e.member,t=e.pendingMembers,r=e.memberCount,i=e.changeMemberRole,o=e.notebook,l=e.canAssignRoles,s=e.showDisclaimer,c=void 0!==s&&s,u=e.currentUser,d=(0,p.useMemo)((function(){var e=[];return l?("viewer"!==n.team_role&&e.push("editor"),function(){if("editor"!==n.role)return!1;var e=t.filter((function(e){return"editor"===e.role}));if(1===e.length&&n.id===e[0].id)return!0;var r=(0,b.jR)(o.owner.id,u);if(!r||r.setting_publish_transfer||(0,m.ws)(o))return!1;var i=e.filter((function(e){return"owner"===e.team_role||e.id===o.owner.id}));return!(i.length>1||0===i.length)&&n.id===i[0].id}()||e.push("viewer",_e)):(u.id===n.id&&e.push(_e),e.push(n.role)),e}),[l,o,u,t,n]);return(0,a.jsxs)("div",{className:"flex f6 fw5 pv2 justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",style:{minWidth:0},children:["member"===n.status&&(0,a.jsx)(x.q,{user:n,id:n.id,size:28,className:"mr2 br-100"}),"invited"===n.status&&(0,a.jsx)("div",{className:"mr2 br-100 bg-light-silver flex items-center justify-center",style:{height:28,width:28},children:(0,a.jsx)(ye.Z,{height:16,className:"mid-gray"})}),(0,a.jsxs)("div",{className:"truncate ".concat(r?"flex-column":""),children:[(0,a.jsx)("span",{className:"near-black",children:n.name||n.login}),n.id===u.id?(0,a.jsx)("span",{className:"ml1 gray",children:"(You)"}):"invited"===n.status&&n.pending?(0,a.jsx)("span",{className:"truncate gray",children:"\xa0(Invite)"}):"invited"===n.status?(0,a.jsx)("span",{className:"truncate gray",children:"\xa0(Invited)"}):n.name&&n.name!==n.login&&(0,a.jsxs)("span",{className:"truncate gray",children:["\xa0(@",n.login,")"]}),r&&(0,a.jsx)("div",{className:"gray",children:"".concat(r," member").concat(1!==r?"s":"")})]})]}),(0,a.jsxs)("div",{className:"flex",children:[c&&(0,a.jsx)("span",{className:"flex items-center",title:"This user can still edit the notebook because they\u2019re an editor in the team it\u2019s shared with.",children:(0,a.jsx)(Ce.Z,{})}),n.id===o.owner.id&&"individual"===o.owner.type?(0,a.jsx)("div",{className:"gray",children:"Owner"}):(0,a.jsx)(Ze,{member:n,changeMemberRole:i,roles:d})]})]})},Fe=(0,v.Z)((function(e){return{notebook:e.notebook,currentUser:e.currentUser}}),(function(e){return{dispatch:e}}))((function(e){var n=e.notebook,t=e.currentUser,r="team"===n.owner.type,i=Ee((0,c.h_)("/document/".concat(n.id,"/members")),1)[0],o=(0,p.useMemo)((function(){return null===i||void 0===i?void 0:i.map((function(e){return Pe({},e,{pending:!1})}))}),[i]),l=Ee((0,c.h_)(r?"/team/".concat(n.owner.id,"/members"):null),1)[0],s=(0,p.useMemo)((function(){return null===l||void 0===l?void 0:l.map(De)}),[l]);return!o||r&&!s?null:(0,a.jsx)(ze,Pe({},e,{currentUser:t,documentMembers:o,teamMembers:s}))})),ze=function(e){var n=function(e){return"editor"===T.role&&"viewer"===e.role&&"viewer"!==e.team_role},t=function(e,n){var t=C.findIndex((function(n){return n.id===e.id})),r=Ue(e,n);if(t>-1)if(n!==_e){var i=Array.from(C);i[t]=r,N(i)}else N(C.filter((function(n){return n.id!==e.id})));else N(Ae(C).concat([r]))},r=e.notebook,i=e.onDismiss,o=e.dispatch,s=e.documentMembers,c=e.teamMembers,u=e.currentUser,d="team"===r.owner.type,m=(0,p.useState)("editor"),h=m[0],b=m[1],g=(0,p.useState)(null),v=g[0],y=g[1],x=v&&("invited"in v?{id:v.login,role:_e,login:v.login,avatar_url:null,team_role:null,type:"individual",status:"invited",pending:!0}:Ue(v,_e)),w=(0,p.useState)([]),C=w[0],N=w[1],P=(0,p.useState)([]),E=P[0],A=P[1],L=(0,p.useState)(""),_=L[0],I=L[1];(0,p.useEffect)((function(){N(s),A(s)}),[s]);var D=C.filter((function(e){return"team"!==e.type&&!E.find((function(n){return n.id===e.id}))})).length,U=Re(u,E),M=Re(u,C),R=d?Re(r.owner,E):Ie,T=d?Re(r.owner,C):Ie,Z=Re(r.owner,E),q=C.filter((function(e){return e.id!==r.owner.id&&e.id!==u.id})),F=!d&&"model"in r&&(0,G.Z)(r.model.nodes),z=F&&(F.databaseClients.size>0||F.secrets.size>0),B=E.length===C.length&&E.every((function(e){return C.some((function(n){return e.id===n.id&&n.role===e.role}))})),$=("editor"===U.role||"editor"===R.role)&&"editor"!==M.role&&"editor"!==T.role,H=M.role===_e&&T.role===_e,W=(0,f.sZ)(r),Y=!d&&C.length>=5;return(0,a.jsxs)(l.Vq,{onDismiss:i,"aria-labelledby":"modal-title",children:[(0,a.jsx)(S.xB,{title:"Share",icon:xe.Z,onDismiss:i}),(0,a.jsxs)(S.fe,{children:[d&&(0,a.jsxs)(a.Fragment,{children:["Assign a role to your entire team or to individual team members."," ",(0,a.jsx)(je.Z,{href:"/@observablehq/permissions-for-teams-notebooks",children:(0,a.jsx)("a",{className:"blue",children:"Learn more"})}),".",(0,a.jsx)(S.pe,{title:"Entire team"}),(0,a.jsx)("div",{className:"ml1",children:(0,a.jsx)(qe,{member:T,pendingMembers:C,notebook:r,canAssignRoles:W,memberCount:null===c||void 0===c?void 0:c.length,changeMemberRole:t,currentUser:u})}),(0,a.jsx)(S.pe,{title:"Team members"})]}),!d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb2",children:["Personal notebooks can be shared with up to 4 people."," ",(0,a.jsx)(je.Z,{href:"/@observablehq/personal-sharing",children:(0,a.jsx)("a",{className:"blue",children:"Learn more"})})," ","or"," ",(0,a.jsx)(je.Z,{href:"/team/new",children:(0,a.jsx)("a",{className:"blue",onClick:function(){var e={notebookId:r.id,members:C.filter((function(e){return"individual"===e.type&&e.id!==u.id})).map((function(e){return Pe({},"invited"===e.status?{email:e.login}:{login:e.login},{role:"owner"===e.role?"owner":"editor"===e.role?"member":"viewer"})}))};we.y.setItem(Oe.NEW_TEAM_PARAMS_KEY,JSON.stringify(e))},children:"create a team"})})," ","to share this notebook with more people."]}),(0,a.jsx)("div",{className:"ml1",children:(0,a.jsx)(qe,{member:Z,pendingMembers:C,notebook:r,canAssignRoles:W,changeMemberRole:t,currentUser:u})})]}),(0,a.jsx)("div",{className:"overflow-hidden",children:(0,a.jsx)("div",{className:"w-100 overflow-auto",style:{maxHeight:250},children:(0,a.jsx)("div",{className:"ml1",children:M.role||q.length?(0,a.jsxs)(a.Fragment,{children:[M.role&&M.id!==r.owner.id&&(0,a.jsx)(qe,{member:M,pendingMembers:C,notebook:r,canAssignRoles:W,changeMemberRole:t,showDisclaimer:n(M),currentUser:u}),q.map((function(e){return(0,a.jsx)(qe,{member:e,pendingMembers:C,notebook:r,canAssignRoles:W,changeMemberRole:t,showDisclaimer:n(e),currentUser:u},e.id)}))]}):d?(0,a.jsx)("div",{className:"f7 fw5 gray",style:{padding:"15px 0"},children:"No team members have been granted individual access to this notebook."}):r.owner.id===u.id?(0,a.jsx)("div",{className:"f7 fw5 gray",style:{padding:"15px 0"},children:"Only you can make changes to this notebook."}):(0,a.jsx)("div",{className:"f7 fw5 gray",style:{padding:"15px 0"},children:"You will no longer have access to this notebook."})})})}),W&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex pt2",children:[(0,a.jsx)(ke.o,{value:v,className:"w-100",universe:null===c||void 0===c?void 0:c.map(Me),excluded:C.map(Me),placeholder:d?"Search for a teammate":"User to share with, or email to invite",disabled:Y,allowEmail:!d,onSelectUser:function(e){var n=e&&!("invited"in e)&&(null===c||void 0===c?void 0:c.some((function(n){return n.id===e.id&&"viewer"===n.team_role})));y(e),b(n?"viewer":"editor")}}),(0,a.jsxs)(k.P,{value:h,onChange:function(e){return b(e.target.value)},disabled:Y||!x,className:"mh2 f6 fw5",children:[(!x||"viewer"!==x.team_role)&&(0,a.jsx)("option",{value:"editor",children:"Can edit"}),(0,a.jsx)("option",{value:"viewer",children:"Can view"})]}),(0,a.jsx)(j.aX,{text:"Add",onClick:function(){null!==x&&(t(x,h),y(null))},disabled:!x,"data-cy":"add-user"})]}),D>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.pe,{title:"Invitation message"}),(0,a.jsx)("div",{className:"flex flex-row items-center self-start w-100 pt1",children:(0,a.jsx)(O.Z,{className:"w-100",type:"text",placeholder:"Optional message to ".concat(D," new member").concat(1===D?"":"s"),value:_,onChange:function(e){return I(e.target.value)},maxLength:255})})]}),Y&&(0,a.jsx)("div",{className:"ma1 fw6 gray",children:"Personal sharing limit reached"})]})]}),(0,a.jsxs)(S.mz,{children:[H||$?(0,a.jsx)(V.b,{type:"warning",title:"You'll no longer be able to ".concat(H?"access":"edit"," this notebook"),description:"Please make changes to the roles above if you wish to retain your current access.",className:"mb3"}):null,z?(0,a.jsx)(V.b,{type:"warning",title:"Database clients and secrets will stop working when you share",description:"These features can be used only in private notebooks.",className:"mb3"}):null,(0,a.jsxs)(j.CQ,{children:[(0,a.jsx)(j.kq,{onClick:i,text:"Cancel"}),(0,a.jsx)(j.KM,{"data-cy":"confirm",onClick:function(){var e=H?[]:$?["viewer"]:r.roles;o({type:"share",currentMembers:E,newMembers:C,newRoles:e,message:_}),i()},disabled:B,text:"Confirm"})]})]})]})},Ve=t(8433),Be=y((function(e){return{notebook:e.notebook}}),(function(e){return{dispatch:e}}))((function(e){var n=e.notebook,t=e.relocate,r=e.dispatch,i=e.onDismiss;return(0,a.jsx)(S.On,{title:"Move to trash",icon:Ve.Z,description:"Are you sure you want to move this notebook to the trash? Notebooks can be removed from the trash for 30 days before they are permanently deleted.",onCancel:i,onConfirm:function(){i(),r({type:"trashRequested",trashed:!0,relocate:t})},isConfirming:n.isUpdatingTrash,destructive:!0})})),$e=t(4647),He=y((function(e){return{notebook:e.notebook}}),(function(e){return{dispatch:e}}))((function(e){var n=e.dispatch,t=e.onDismiss;return(0,a.jsx)(S.On,{title:"Unpublish",icon:$e.Z,description:"Are you sure you want to unpublish this notebook? Access to this notebook will be restricted, and any links or imports may break.",onCancel:t,onConfirm:function(){t(),n({type:"unpublishRequested"})},destructive:!0})}));function We(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var Ye=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){We(e,n,t[n])}))}return e}({},r.V,{publishConfirmation:ce,setSlug:ve,sharing:Fe,trash:Be,unpublish:He,forkWithComments:function(e){var n=e.onConfirm,t=e.onDismiss;return(0,a.jsx)(S.On,{title:"Continue with fork",icon:z.Z,description:"Your unsaved comments will be lost if you fork. Are you sure you want to continue?",onCancel:t,onConfirm:function(){t(),n()}})},collections:Z,setNotebookThumbnail:fe})}}]);
