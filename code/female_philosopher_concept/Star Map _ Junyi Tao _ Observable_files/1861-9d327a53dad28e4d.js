"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1861],{36307:function(e,n,t){var r=t(85893);function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}n.Z=function(e){return(0,r.jsx)("svg",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){u(e,n,t[n])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e,{children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M9.11458 11.5121L11.6146 8.51215L12.0414 8L11.6146 7.48785L9.11458 4.48785L7.88542 5.51215L9.29197 7.2L4 7.2V8.8L9.29197 8.8L7.88542 10.4879L9.11458 11.5121Z"})}))}},61870:function(e,n,t){t.d(n,{iQ:function(){return l},CU:function(){return d},au:function(){return p},gg:function(){return f},qc:function(){return h},rw:function(){return b},dY:function(){return v},Kj:function(){return m}});var r=t(34051),u=t.n(r),i=t(602),o=t(27193),s=t(25655);function a(e,n,t,r,u,i,o){try{var s=e[i](o),a=s.value}catch(c){return void t(c)}s.done?n(a):Promise.resolve(a).then(r,u)}function c(e){return function(){var n=this,t=arguments;return new Promise((function(r,u){var i=e.apply(n,t);function o(e){a(i,r,u,o,s,"next",e)}function s(e){a(i,r,u,o,s,"throw",e)}o(void 0)}))}}var l=function(){return{isPublishing:!0}},d=function(){var e=c(u().mark((function e(n,t,r){var a,c,l,d,p,f,h,b,v,m,g,y,w,k;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v=function(e){r({type:"showErrorToast",message:e,key:"publish"}),r({type:"publishFailed"})},a=n.notebook,c=t.unlisted,l=t.customSlug,d=t.customThumbnail,!a.isPublishing){e.next=4;break}return e.abrupt("return");case 4:if(p=a.id,f=a.slug,h=a.thumbnail,b=(0,o.Ui)("model"in a?a.model:"title"in a?a:null),void 0===l||f===l){e.next=18;break}return r({type:"showProcessingToast",key:"publish",message:"Setting slug for ".concat(b,"\u2026")}),e.prev=9,e.next=12,(0,i.Fv)("/document/".concat(p,"/slug"),{slug:l||null});case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(9),e.t0.errors&&e.t0.errors.length>0&&"SLUG_INVALID"===(null===e.t0||void 0===e.t0?void 0:e.t0.errors[0].code)?v("Setting notebook URL failed: URL invalid."):v("Oops, setting notebook URL failed. Try again?"),e.abrupt("return");case 18:if(m=h,void 0===d||!d&&h===a.defaultThumbnail||d===h){e.next=34;break}return r({type:"showProcessingToast",key:"publish",message:"Setting thumbnail for ".concat(b,"\u2026")}),e.prev=21,e.next=24,(0,i.Fv)("/document/".concat(p,"/thumbnail"),{thumbnail:d||null});case 24:if(e.t1=e.sent,e.t1){e.next=27;break}e.t1=a.defaultThumbnail;case 27:m=e.t1,e.next=34;break;case 30:return e.prev=30,e.t2=e.catch(21),v("Oops, setting notebook preview failed. Try again?"),e.abrupt("return");case 34:return g={version:a.saveVersion,title:b,unlisted:c},e.prev=35,r({type:"showProcessingToast",key:"publish",message:"Publishing ".concat(b,"\u2026")}),e.next=39,(0,i.Fv)("/document/".concat(p,"/publish"),g);case 39:y=e.sent,w=y.slug,k=y.update_time,r({type:"showSuccessToast",message:c?(0,s.cg)(a)?"Republished '".concat(b,"' (unlisted)"):"Published '".concat(b,"' (unlisted)"):(0,s.s9)(a)?"Republished '".concat(b,"'"):"Published '".concat(b,"'"),key:"publish"}),r({type:"publishSucceeded",publishVersion:a.saveVersion,updateTime:k,unlisted:c,slug:w,thumbnail:m}),r({type:"updatedNotebook"}),e.next=50;break;case 47:e.prev=47,e.t3=e.catch(35),v(c?"Oops, unlisted publishing failed. Try again?":"Oops, publishing failed. Try again?");case 50:case"end":return e.stop()}}),e,null,[[9,14],[21,30],[35,47]])})));return function(n,t,r){return e.apply(this,arguments)}}(),p=function(e,n){var t=e.publishTime,r=n.publishVersion,u=n.updateTime,i=n.slug;return{publishLevel:n.unlisted?"shared":"public",publishVersion:r,publishTime:t||u,editUnpublished:!1,thumbnail:n.thumbnail,slug:i,isPublishing:!1}},f=function(){return{isPublishing:!1}},h=function(){return{isUnpublishing:!0}},b=function(){var e=c(u().mark((function e(n,t,r){var s,a,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=n.notebook).isUnpublishing){e.next=3;break}return e.abrupt("return");case 3:return a=(0,o.Ui)("model"in s?s.model:"title"in s?s:null),e.prev=4,r({type:"showProcessingToast",key:"unpublish",message:"Unpublishing ".concat(a,"\u2026")}),e.next=8,(0,i.Fv)("/document/".concat(s.id,"/unpublish"),void 0);case 8:c=e.sent,r({type:"showSuccessToast",message:"Unpublished '".concat(a,"'"),key:"unpublish"}),r({type:"unpublishSucceeded",slug:c.slug||null}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),r({type:"showErrorToast",message:"Oops, unpublishing failed. Try again?",key:"unpublish"}),r({type:"unpublishFailed"});case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(n,t,r){return e.apply(this,arguments)}}(),v=function(e,n){return{publishLevel:"private",publishVersion:null,publishTime:null,editUnpublished:!1,slug:n.slug,isUnpublishing:!1}},m=function(){return{isUnpublishing:!1}}},6826:function(e,n,t){t.d(n,{B:function(){return a},b:function(){return c}});var r=t(34051),u=t.n(r),i=t(602),o=t(19671);function s(e,n,t,r,u,i,o){try{var s=e[i](o),a=s.value}catch(c){return void t(c)}s.done?n(a):Promise.resolve(a).then(r,u)}var a=function(){var e,n=(e=u().mark((function e(n,t,r){var s,a,c,l,d,p,f,h,b,v,m,g;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.notebook,a=n.currentUser,c=t.currentMembers,l=t.newMembers,d=t.newRoles,p=t.message,f=s.id,h=l.filter((function(e){return!c.some((function(n){return n.id===e.id&&n.role===e.role}))&&"member"===e.status})),b=c.filter((function(e){return!l.some((function(n){return n.id===e.id}))&&"member"===e.status})),v=l.filter((function(e){return!c.some((function(n){return n.id===e.id&&n.role===e.role}))&&"invited"===e.status})).map((function(e){return{email:e.login,role:e.role}})),m=c.filter((function(e){return!l.some((function(n){return n.id===e.id}))&&"invited"===e.status})).map((function(e){return{email:e.login}})),g=l.some((function(e){return"team"===e.type}))?"team":l.length>1?"shared":"private",e.next=10,(0,i.Fv)("/document/".concat(f,"/roles"),{roles:h.map((function(e){return{user_id:e.id,role:e.role}})).concat(b.map((function(e){return{user_id:e.id,role:null}}))),invitations:v.map((function(e){return{email:e.email,role:e.role}})).concat(m.map((function(e){return{email:e.email,role:null}}))),message:p});case 10:h.map((function(e){var n=e.id,t=e.role,r=e.type;(0,o.MR)((0,o.ym)({type:"notebook:manage:changeRole",notebook:s,currentUser:a,data:{prevRole:(h.find((function(e){return e.id===n}))||{}).role||null,newRole:t,userType:r},eventVersion:3}))})),b.map((function(e){var n=e.id,t=e.type;(0,o.MR)((0,o.ym)({type:"notebook:manage:changeRole",notebook:s,currentUser:a,data:{prevRole:(b.find((function(e){return e.id===n}))||{}).role||null,newRole:null,userType:t},eventVersion:3}))})),r({type:"shareSucceeded",newSharing:g,newRoles:d}),r({type:"updatedNotebook"});case 14:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,u){var i=e.apply(n,t);function o(e){s(i,r,u,o,a,"next",e)}function a(e){s(i,r,u,o,a,"throw",e)}o(void 0)}))});return function(e,t,r){return n.apply(this,arguments)}}(),c=function(e,n){var t=n.newSharing,r=n.newRoles;if(0!==r.length)return{sharing:t,roles:r};location.replace("/")}},41894:function(e,n,t){t.d(n,{m:function(){return s},g:function(){return a}});var r=t(34051),u=t.n(r),i=t(602);function o(e,n,t,r,u,i,o){try{var s=e[i](o),a=s.value}catch(c){return void t(c)}s.done?n(a):Promise.resolve(a).then(r,u)}var s=function(){var e,n=(e=u().mark((function e(n,t,r){var o,s,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.slug,a=n.notebook.id,e.prev=3,e.next=6,(0,i.Fv)("/document/".concat(a,"/slug"),{slug:o});case 6:s=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),e.t0.errors&&e.t0.errors.length>0&&"SLUG_INVALID"===e.t0.errors[0].code?r({type:"showErrorToast",message:"Setting notebook URL failed: URL invalid.",key:"setSlug"}):r({type:"showErrorToast",message:"Oops, setting notebook URL failed. Try again?",key:"setSlug"}),e.abrupt("return");case 13:r({type:"setSlugSucceeded",slug:s.slug}),r({type:"updatedNotebook"});case 15:case"end":return e.stop()}}),e,null,[[3,9]])})),function(){var n=this,t=arguments;return new Promise((function(r,u){var i=e.apply(n,t);function s(e){o(i,r,u,s,a,"next",e)}function a(e){o(i,r,u,s,a,"throw",e)}s(void 0)}))});return function(e,t,r){return n.apply(this,arguments)}}(),a=function(e,n){return{slug:n.slug}}},59533:function(e,n,t){t.d(n,{r:function(){return v},I:function(){return m}});var r=t(34051),u=t.n(r),i=t(85893),o=t(36307),s=t(84193),a=t(95689),c=t(602),l=t(88725),d=t(11163),p=(t(67294),t(90627));function f(e,n,t,r,u,i,o){try{var s=e[i](o),a=s.value}catch(c){return void t(c)}s.done?n(a):Promise.resolve(a).then(r,u)}function h(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){h(e,n,t[n])}))}return e}var v=function(){var e,n=(e=u().mark((function e(n,t,r){var d,f,h,v,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=n.notebook,f=t.newOwner,h=t.relocate,v=d.id,e.prev=2,e.next=5,(0,c.Fv)("/document/".concat(v,"/transfer"),{user:f.id});case 5:m=e.sent,r(b({type:"transferSucceeded"},m,{owner:f,relocate:h})),h||r({type:"showSuccessToast",message:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex items-center",children:[a.MI,"Notebook transfered to ",f.login]}),(0,i.jsx)(s.Z,{href:(0,l.Bi)(b({},d,{owner:f},m)),children:(0,i.jsxs)("a",{className:"flex items-center fw6 no-underline blue hover-lightest-blue",children:["View ",(0,i.jsx)(o.Z,{className:"ml1"})]})})]}),key:"transfer"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),(0,p.S)({error:e.t0,dispatch:r,message:"Oops, transfer failed. Try again?",key:"transfer"});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})),function(){var n=this,t=arguments;return new Promise((function(r,u){var i=e.apply(n,t);function o(e){f(i,r,u,o,s,"next",e)}function s(e){f(i,r,u,o,s,"throw",e)}o(void 0)}))});return function(e,t,r){return n.apply(this,arguments)}}(),m=function(e,n){var t=e.id,r=n.relocate,u=n.slug,i=n.owner;if(!r)return{slug:u,owner:i};d.default.replace("/[at]/[...specifiers]","/d/".concat(t))}},16504:function(e,n,t){t.d(n,{fv:function(){return l},pT:function(){return d},QJ:function(){return p},zu:function(){return f}});var r=t(34051),u=t.n(r),i=t(85893),o=t(95689),s=t(602),a=t(36448);function c(e,n,t,r,u,i,o){try{var s=e[i](o),a=s.value}catch(c){return void t(c)}s.done?n(a):Promise.resolve(a).then(r,u)}var l=function(){var e,n=(e=u().mark((function e(n,t,r){var a,c,l,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.notebook.id,c=t.trashed,l=t.relocate,d=void 0===l||l,p={trashed:c},e.prev=2,e.next=5,(0,s.Fv)("/document/".concat(a,"/trash"),p);case 5:r({type:"trashSucceeded",trashed:c,relocate:d}),d||(r({type:"showSuccessToast",message:c?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex items-center",children:[o.MI,"Moved to trash"]}),(0,i.jsx)("button",{onClick:function(){r({type:"trashRequested",trashed:!1,relocate:d})},className:"pa0 fw6 no-underline gray hover-dark-gray bg-transparent bn pointer",children:"Undo"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex items-center",children:[o.MI,"Moved out of trash"]}),(0,i.jsx)("button",{onClick:function(){r({type:"trashRequested",trashed:!0,relocate:d})},className:"pa0 fw6 no-underline gray hover-dark-gray bg-transparent bn pointer",children:"Undo"})]}),key:"trash"}),r({type:"updatedNotebook"})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),r({type:"trashFailed"}),r({type:"showErrorToast",message:c?"Oops, trashing failed. Try again?":"Oops, put back from trash failed. Try again?",key:"trash"});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})),function(){var n=this,t=arguments;return new Promise((function(r,u){var i=e.apply(n,t);function o(e){c(i,r,u,o,s,"next",e)}function s(e){c(i,r,u,o,s,"throw",e)}o(void 0)}))});return function(e,t,r){return n.apply(this,arguments)}}(),d=function(){return{isUpdatingTrash:!0}},p=function(e,n){var t=e.owner,r=n.trashed,u=n.relocate;if(!r||!u)return{trashed:r,isUpdatingTrash:!1};location.replace((0,a.GN)(t))},f=function(){return{isUpdatingTrash:!1}}},4387:function(e,n,t){t.d(n,{$:function(){return a},W:function(){return c}});var r=t(34051),u=t.n(r),i=t(602),o=t(27193);function s(e,n,t,r,u,i,o){try{var s=e[i](o),a=s.value}catch(c){return void t(c)}s.done?n(a):Promise.resolve(a).then(r,u)}var a=function(){var e,n=(e=u().mark((function e(n,t,r){var s,a,c,l,d,p,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=function(e){r({type:"showErrorToast",message:e,key:"thumbnail"})},s=n.notebook,a=t.customThumbnail,c=s.id,l=s.thumbnail,d=(0,o.Ui)("model"in s?s.model:"title"in s?s:null),!a&&l===s.defaultThumbnail||a===l){e.next=20;break}return r({type:"showProcessingToast",key:"thumbnail",message:"Setting preview image for ".concat(d,"\u2026")}),e.prev=7,e.next=10,(0,i.Fv)("/document/".concat(c,"/thumbnail"),{thumbnail:a||null});case 10:f=e.sent,r({type:"showSuccessToast",key:"thumbnail",message:"Updated preview image"}),r({type:"setNotebookThumbnailSucceeded",customThumbnail:f}),r({type:"updatedNotebook"}),e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(7),p("Oops, setting notebook preview failed. Try again?"),e.abrupt("return");case 20:case"end":return e.stop()}}),e,null,[[7,16]])})),function(){var n=this,t=arguments;return new Promise((function(r,u){var i=e.apply(n,t);function o(e){s(i,r,u,o,a,"next",e)}function a(e){s(i,r,u,o,a,"throw",e)}o(void 0)}))});return function(e,t,r){return n.apply(this,arguments)}}(),c=function(e,n){var t=e.defaultThumbnail,r=n.customThumbnail;return{customThumbnail:r,thumbnail:r||t}}},810:function(e,n,t){t.d(n,{l:function(){return f}});var r=t(24205),u=t(21312),i=t(67220),o=t(61870),s=t(6826),a=t(41894),c=t(59533),l=t(16504),d=t(30169),p=t(4387),f={collections:u.N,descriptionUpdate:i.y,publishRequested:o.CU,publishSucceeded:r.dE,showModal:d.k,setNotebookThumbnail:p.$,setSlug:a.m,setSlugSucceeded:r.pf,share:s.B,transfer:c.r,trashRequested:l.fv,trashSucceeded:r.d$,unpublishRequested:o.rw,unpublishSucceeded:r.CL}},54937:function(e,n,t){t.d(n,{x:function(){return l}});var r=t(17152),u=t(61870),i=t(6826),o=t(41894),s=t(59533),a=t(16504),c=t(4387),l={forkFailed:r.L3,forkPending:r.cL,publishRequested:u.iQ,publishSucceeded:u.au,publishFailed:u.gg,setNotebookThumbnailSucceeded:c.W,setSlugSucceeded:o.g,shareSucceeded:i.b,trashFailed:a.zu,trashRequested:a.pT,transferSucceeded:s.I,trashSucceeded:a.QJ,unpublishRequested:u.qc,unpublishSucceeded:u.dY,unpublishFailed:u.Kj}}}]);
