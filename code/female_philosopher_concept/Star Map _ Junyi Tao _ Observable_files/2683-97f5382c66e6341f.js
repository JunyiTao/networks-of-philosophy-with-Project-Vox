"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2683],{27565:function(e,t,n){n.d(t,{E:function(){return a}});var r=n(85893),o=n(602),i=n(4598),a=function(e){var t=e.provider,n=e.children,a=e.alreadyAuthenticated,s=e.redirectToPicker,c=void 0!==s&&s,l=e.onAuth;return(0,r.jsxs)("form",{onSubmit:function(e){e.target.token.value=(0,o.FN)(),l&&l(t,a)},action:"".concat("https://api.observablehq.com","/user/token/authorize"),method:"post",children:[(0,r.jsx)("input",{type:"hidden",name:"token",value:""}),(0,r.jsx)("input",{type:"hidden",name:"path",value:"".concat(location.pathname).concat(c?"?cloudFileProvider=".concat(t):"")}),(0,r.jsx)("input",{type:"hidden",name:"scopes",value:i.c[t].scopes.join(" ")}),(0,r.jsx)("input",{type:"hidden",name:"provider",value:t}),n]})}},94726:function(e,t,n){n.d(t,{h:function(){return p}});var r=n(85893),o=n(14151),i=n(16691),a=n(62990),s=n(36448),c=n(80835),l=n(67294),u=n(8385),d=n(17905),f=n(84749),p=function(e){var t=e.commentingLock,n=t.admin_locked,p=t.admin_lock_reason,m=t.user_lock_actor,h=t.time||void 0,v=(0,i.K)(h),b=h&&(0,a.LN)(h,v),y=(0,o.d)((0,l.useCallback)((function(){return(0,r.jsx)(c.u,{label:(0,r.jsxs)("div",{className:"truncate w5 pa2 f6 dark-gray",children:[n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:["By"," ",(0,r.jsx)("a",{href:"mailto:support@observablehq.com",rel:"noopener noreferrer",target:"_blank",className:"no-underline dark-gray hover-blue",children:"Observable Support"}),b&&(0,r.jsxs)(r.Fragment,{children:[" on ",b]})]}),(0,r.jsx)("div",{className:"mt2 f7 fw5 ws-normal dark-gray lh-copy",children:p})]}):m&&(0,r.jsxs)("div",{className:"flex truncate items-center",children:["By",(0,r.jsx)("img",{src:(0,u.Q)(m),alt:"@".concat(m.login),className:"mh1 br-100",style:{width:14,height:14}}),(0,s.RX)(m),b&&(0,r.jsxs)(r.Fragment,{children:[" on ",b]})]}),(0,r.jsxs)("div",{className:"mt2 f7 fw5 ws-normal dark-gray lh-copy",children:["While comments are locked, only editors may comment."," ",(0,r.jsxs)("a",{href:"/@observablehq/comments",target:"_blank",rel:"noreferrer",className:"inline-flex no-underline blue items-center",children:["Learn more",(0,r.jsx)(d.Z,{})]})]})]}),children:(0,r.jsx)("span",{children:"Comments locked"})})}),[n,p,m,b]));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{className:"moon-gray"}),y]})}},26674:function(e,t,n){n.d(t,{J:function(){return j}});var r=n(85893),o=n(2102),i=(n(67294),n(54239));function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=function(e){var t=e.mimeType;if(!t)return(0,r.jsx)(f,{className:"flex-shrink-0"});var n=l(t.split("/"),2),o=n[0],i=n[1],a={className:"flex-shrink-0",title:t};switch(o){case"audio":return(0,r.jsx)(m,c({},a));case"video":return(0,r.jsx)(y,c({},a));case"image":return"svg+xml"===i?(0,r.jsx)(b,c({},a)):(0,r.jsx)(v,c({},a));case"text":return"csv"===i?(0,r.jsx)(d,c({},a)):(0,r.jsx)(h,c({},a));case"application":switch(i){case"pdf":return(0,r.jsx)(p,c({},a));case"geo+json":return(0,r.jsx)(g,c({},a));case"xml":case"json":case"x-sqlite-3":return(0,r.jsx)(d,c({},a))}}return(0,r.jsx)(f,c({},a))};function d(e){return(0,r.jsxs)("svg",c({width:"24",height:"27",viewBox:"0 0 28 32",fill:"white"},e,{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,r.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.1111 14C9.49746 14 9 14.4975 9 15.1111V17.3333C9 17.947 9.49746 18.4444 10.1111 18.4444H12.3333C12.947 18.4444 13.4444 17.947 13.4444 17.3333V15.1111C13.4444 14.4975 12.947 14 12.3333 14H10.1111ZM15.6667 14C15.053 14 14.5556 14.4975 14.5556 15.1111V17.3333C14.5556 17.947 15.053 18.4444 15.6667 18.4444H17.8889C18.5025 18.4444 19 17.947 19 17.3333V15.1111C19 14.4975 18.5025 14 17.8889 14H15.6667ZM9 20.6667C9 20.053 9.49746 19.5556 10.1111 19.5556H12.3333C12.947 19.5556 13.4444 20.053 13.4444 20.6667V22.8889C13.4444 23.5025 12.947 24 12.3333 24H10.1111C9.49746 24 9 23.5025 9 22.8889V20.6667ZM15.6667 19.5556C15.053 19.5556 14.5556 20.053 14.5556 20.6667V22.8889C14.5556 23.5025 15.053 24 15.6667 24H17.8889C18.5025 24 19 23.5025 19 22.8889V20.6667C19 20.053 18.5025 19.5556 17.8889 19.5556H15.6667Z",fill:"#C4C4C4"})]}))}function f(e){return(0,r.jsxs)("svg",c({width:"24",height:"27",fill:"none"},e,{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#F2F2F2"}),(0,r.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E4E4E4"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.4462 14.0293C12.5637 13.0792 11.0428 13.1363 10.2339 14.1499C9.5666 14.9861 9.6264 16.1884 10.3734 16.9543L16.6159 23.3543C16.8831 23.6284 17.3237 23.6284 17.591 23.3543C17.8491 23.0898 17.8491 22.6677 17.591 22.4032L11.979 16.6495L13.1244 15.5323L18.7364 21.286C19.6006 22.172 19.6006 23.5855 18.7364 24.4715C17.8412 25.3893 16.3657 25.3893 15.4705 24.4715L9.22803 18.0714C7.91758 16.7279 7.81268 14.6188 8.98334 13.1519C10.4023 11.3738 13.0703 11.2737 14.6185 12.9404L20.5861 19.3646L19.4139 20.4535L13.4462 14.0293Z",fill:"#C4C4C4"})]}))}function p(e){return(0,r.jsxs)("svg",c({width:"24",height:"27",viewBox:"0 0 28 32",fill:"white"},e,{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,r.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,r.jsx)("rect",{x:"7",y:"20",width:"4",height:"4",stroke:"#C4C4C4",strokeWidth:"2"}),(0,r.jsx)("circle",{cx:"12.5",cy:"13.5",r:"2.5",stroke:"#C4C4C4",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M15.4689 21.25L18.5 16L21.5311 21.25H15.4689Z",stroke:"#C4C4C4",strokeWidth:"2"})]}))}function m(e){return(0,r.jsxs)("svg",c({width:"24",height:"27",viewBox:"0 0 28 32",fill:"white"},e,{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,r.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.0761 20.0534V14.2508L11.9239 15.8358V23.5082C11.9736 23.6655 12 23.8303 12 24C12 25.1046 10.8807 26 9.5 26C8.11929 26 7 25.1046 7 24C7 22.8954 8.11929 22 9.5 22C9.69829 22 9.89118 22.0185 10.0761 22.0534V15.8358C10.0761 15.0246 10.6052 14.3083 11.3806 14.0698L17.4893 12.1905C18.2021 11.9712 18.9239 12.5043 18.9239 13.2502V21.5082C18.9736 21.6655 19 21.8303 19 22C19 23.1046 17.8807 24 16.5 24C15.1193 24 14 23.1046 14 22C14 20.8954 15.1193 20 16.5 20C16.6983 20 16.8912 20.0185 17.0761 20.0534Z",fill:"#C4C4C4"})]}))}function h(e){return(0,r.jsxs)("svg",c({width:"24",height:"27",viewBox:"0 0 28 32",fill:"white"},e,{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,r.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 15C7 14.4477 7.44772 14 8 14H20C20.5523 14 21 14.4477 21 15C21 15.5523 20.5523 16 20 16H8C7.44772 16 7 15.5523 7 15ZM7 19C7 18.4477 7.44772 18 8 18H20C20.5523 18 21 18.4477 21 19C21 19.5523 20.5523 20 20 20H8C7.44772 20 7 19.5523 7 19ZM8 22C7.44772 22 7 22.4477 7 23C7 23.5523 7.44772 24 8 24H15C15.5523 24 16 23.5523 16 23C16 22.4477 15.5523 22 15 22H8Z",fill:"#C4C4C4"})]}))}function v(e){return(0,r.jsxs)("svg",c({width:"24",height:"27",viewBox:"0 0 28 32",fill:"white"},e,{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,r.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.9143 17.8125C21.2432 17.8125 22.3205 16.7352 22.3205 15.4062C22.3205 14.0773 21.2432 13 19.9143 13C18.5853 13 17.508 14.0773 17.508 15.4062C17.508 16.7352 18.5853 17.8125 19.9143 17.8125ZM9.08063 16.0838C9.42048 15.5174 10.2414 15.5174 10.5812 16.0838L13.7013 21.284L15.0893 19.4333C15.4393 18.9667 16.1393 18.9667 16.4893 19.4333L18.8643 22.6C19.2969 23.1768 18.8853 24 18.1643 24H13.7855H13.4143H5.87635C5.19622 24 4.77612 23.258 5.12605 22.6748L9.08063 16.0838Z",fill:"#C4C4C4"})]}))}function b(e){return(0,r.jsxs)("svg",c({width:"24",height:"27",viewBox:"0 0 28 32",fill:"white"},e,{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,r.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,r.jsx)("rect",{x:"7",y:"20",width:"4",height:"4",stroke:"#C4C4C4",strokeWidth:"2"}),(0,r.jsx)("circle",{cx:"12.5",cy:"13.5",r:"2.5",stroke:"#C4C4C4",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M15.4689 21.25L18.5 16L21.5311 21.25H15.4689Z",stroke:"#C4C4C4",strokeWidth:"2"})]}))}function y(e){return(0,r.jsxs)("svg",c({width:"24",height:"27",viewBox:"0 0 28 32",fill:"white"},e,{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,r.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.1061 25.2121C17.4783 25.2121 20.2121 22.4783 20.2121 19.1061C20.2121 15.7338 17.4783 13 14.1061 13C10.7338 13 8 15.7338 8 19.1061C8 22.4783 10.7338 25.2121 14.1061 25.2121ZM16.2945 19.8756C16.8288 19.5017 16.8288 18.7104 16.2945 18.3365L14.175 16.8528C13.5524 16.417 12.6969 16.8624 12.6969 17.6224V20.5897C12.6969 21.3497 13.5524 21.7951 14.175 21.3593L16.2945 19.8756Z",fill:"#C4C4C4"})]}))}function g(e){return(0,r.jsxs)("svg",c({width:"24",height:"27",viewBox:"0 0 28 32",fill:"white"},e,{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,r.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 13C11.2386 13 9 15.2501 9 18.0256C9 20.1019 10.0788 21.4751 11.0711 22.7383C11.4054 23.1638 11.7299 23.5768 12 24C12.515 24.8069 12.9234 25.4282 13.2332 25.8905C13.607 26.4482 14.393 26.4482 14.7668 25.8905C15.0766 25.4282 15.485 24.8069 16 24C16.2783 23.564 16.6142 23.1523 16.9591 22.7295C17.943 21.5235 19 20.228 19 18.0256C19 15.2501 16.7614 13 14 13ZM14 20C15.1046 20 16 19.1046 16 18C16 16.8954 15.1046 16 14 16C12.8954 16 12 16.8954 12 18C12 19.1046 12.8954 20 14 20Z",fill:"#C4C4C4"})]}))}var x=n(64893),j=function(e){var t,n=e.file,a=e.used;return(0,r.jsxs)("div",{className:"flex f7 items-center",children:[(0,r.jsxs)("div",{className:"relative flex-shrink-0",children:[(null===(t=n.mimeType)||void 0===t?void 0:t.startsWith("image/"))&&"url"in n?(0,r.jsx)("img",{src:n.url,alt:n.name,className:"br2 ba bw1 b--light-silver",style:{width:20,height:24,objectFit:"cover"}}):(0,r.jsx)(u,{mimeType:n.mimeType}),a&&(0,r.jsx)("div",{className:"flex absolute bottom-0 br-100 bg-blue justify-center items-center",style:{right:"-3px",width:14,height:14},children:(0,r.jsx)(i.Z,{className:"white","aria-label":"Private file",style:{width:14,height:14}})})]}),(0,r.jsxs)("div",{className:"ph2 overflow-x-hidden",children:["downloadUrl"in n?(0,r.jsx)("a",{className:"db truncate pb1 fw6 no-underline dark-gray hover-blue",href:n.downloadUrl,title:n.name,children:n.name}):(0,r.jsx)("div",{className:"truncate pb1 fw6 dark-gray",title:n.name,children:n.name}),(0,r.jsxs)("div",{className:"truncate gray lh-title",children:[a?(0,r.jsx)("span",{className:"f7 fw6 blue",children:"In use"}):(0,r.jsx)("span",{className:"f7 gray",children:"Unused"}),(0,r.jsx)("span",{className:"light-gray",children:" \u2022 "}),"size"in n?(0,r.jsxs)(r.Fragment,{children:[(0,o.B)(n.size),(0,r.jsx)("span",{className:"light-gray",children:" \u2022 "})]}):null,(0,r.jsx)(x.i,{time:n.createTime})]})]})]})}},30238:function(e,t,n){var r=n(85893);n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"},e,{children:[(0,r.jsx)("path",{d:"M10.2929 8.29291L11.7071 9.70712L9.4142 12L11.7071 14.2929L10.2929 15.7071L6.58577 12L10.2929 8.29291Z"}),(0,r.jsx)("path",{d:"M8 11L14 11L14 13L8 13L8 11Z"}),(0,r.jsx)("path",{d:"M2 3C2 1.89543 2.89543 1 4 1H10L14 5V8H12V6H9V3H4V13H6V15H4C2.89543 15 2 14.1046 2 13V3Z"})]}))}},71675:function(e,t,n){var r=n(85893);n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e,{children:[(0,r.jsx)("rect",{x:"9",y:"12",width:"2",height:"10",transform:"rotate(-180 9 12)",fill:"currentColor"}),(0,r.jsx)("path",{d:"M12 9L8 13L4 9",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),e.children]}))}},75872:function(e,t,n){var r=n(85893);n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e,{children:[(0,r.jsx)("rect",{x:"7",y:"4",width:"2",height:"10",fill:"currentColor"}),(0,r.jsx)("path",{d:"M4 7L8 3L12 7",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),e.children]}))}},60803:function(e,t,n){var r=n(85893);n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){return(0,r.jsx)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e,{children:(0,r.jsx)("path",{d:"M13 6.5L8 12L3 6.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}},74878:function(e,t,n){var r=n(85893);n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){return(0,r.jsx)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e,{children:(0,r.jsx)("path",{d:"M6 12.5L10 8L6 3.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}))}},64804:function(e,t,n){var r=n(85893);n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e,{children:[(0,r.jsx)("path",{d:"M2 6C2 5.44772 2.44772 5 3 5H10C10.5523 5 11 5.44772 11 6V13C11 13.5523 10.5523 14 10 14H3C2.44772 14 2 13.5523 2 13V6Z",stroke:"currentColor",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M4 2.00004L12 2.00001C13.1046 2 14 2.89544 14 4.00001V12",stroke:"currentColor",strokeWidth:"2"}),e.children]}))}},61777:function(e,t,n){var r=n(85893);n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){return(0,r.jsx)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"},e,{children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.15771L3.98463 4.50001L5 5.0923L9.01537 2.75001L8 2.15771ZM11 3.90771L6.98463 6.25001L8 6.8423L12.0154 4.50001L11 3.90771ZM13 6.24104L9 8.57438V13.259L13 10.9256V6.24104ZM7 13.259V8.57438L3 6.24104V10.9256L7 13.259ZM7.24419 0.283189C7.71124 0.0107464 8.28876 0.0107473 8.75581 0.283189L14.5039 3.63623C14.8111 3.81544 15 4.14434 15 4.50001V11.2128C15 11.7463 14.7166 12.2397 14.2558 12.5085L8.50387 15.8638C8.19251 16.0454 7.80749 16.0454 7.49613 15.8638L1.74419 12.5085C1.28337 12.2397 1 11.7463 1 11.2128V4.50001C1 4.14434 1.18891 3.81544 1.49613 3.63623L7.24419 0.283189Z"})}))}},26825:function(e,t,n){var r=n(85893);n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"},e,{children:[(0,r.jsx)("path",{d:"M2 3C2 1.89543 2.89543 1 4 1H10L14 5V8H12V6H9V3H4V13H6V15H4C2.89543 15 2 14.1046 2 13V3Z"}),(0,r.jsx)("path",{d:"M7.3598 12.7682L8.64017 11.2318L11 13.1983L13.3598 11.2318L14.6402 12.7682L11 15.8017L7.3598 12.7682Z"}),(0,r.jsx)("path",{d:"M10 15L10 9L12 9L12 15L10 15Z"})]}))}},1099:function(e,t,n){n.d(t,{v:function(){return i}});var r=n(85893);n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentColor"},e,{children:[(0,r.jsx)("circle",{r:"1.5",cy:"8",cx:"2.5"}),(0,r.jsx)("circle",{r:"1.5",cy:"8",cx:"7.5"}),(0,r.jsx)("circle",{r:"1.5",cy:"8",cx:"12.5"})]}))}},93797:function(e,t,n){var r=n(85893);n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e,{children:[(0,r.jsx)("path",{d:"M11 15V15C11 14.4477 10.5523 14 10 14L6 14C5.44772 14 5 14.4477 5 15V15",stroke:"currentColor",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M3 3L13 3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M11 8.25L13 3L15 8.25C15 9.2165 14.1046 10 13 10C11.8954 10 11 9.2165 11 8.25Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M1 8.25L3 3L5 8.25C5 9.2165 4.10457 10 3 10C1.89543 10 1 9.2165 1 8.25Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M8 3L8 14",stroke:"currentColor",strokeWidth:"2"})]}))}},34091:function(e,t,n){var r=n(85893);n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e,{children:[(0,r.jsx)("rect",{x:"3",y:"7",width:"10",height:"7",rx:"0.5",stroke:"currentColor",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M11 7.5V5C11 0.999963 5 1.00004 5 5V7.5",stroke:"currentColor",strokeWidth:"2"}),(0,r.jsx)("rect",{x:"7",y:"9",width:"2",height:"3",rx:"1",fill:"currentColor"})]}))}},14663:function(e,t,n){var r=n(85893);n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"},e,{children:[(0,r.jsx)("path",{d:"M2 9V5.89453C2 5.34225 2.44772 4.89453 3 4.89453H10C10.5523 4.89453 11 5.34225 11 5.89453V13.8945C11 14.4468 10.5523 14.8945 10 14.8945H8"}),(0,r.jsx)("line",{x1:"4",y1:"10",x2:"4",y2:"16"}),(0,r.jsx)("path",{d:"M5 3L5 2.00001L12 2C13.1046 2 14 2.89543 14 4V12H13"}),(0,r.jsx)("line",{x1:"7",y1:"13",x2:"1",y2:"13"}),e.children]}))}},98807:function(e,t,n){var r=n(85893);n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"},e,{children:[(0,r.jsx)("path",{d:"M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{d:"M8.00002 5C7.23823 5 6.75235 5.42428 6.33207 6.0547L4.66797 4.9453C5.24769 4.07572 6.26181 3 8.00002 3C8.85764 3 9.74527 3.22801 10.4006 3.82095C11.0961 4.45014 11.3871 5.36121 11.24 6.39142C11.0654 7.61316 10.1329 8.20968 9.62788 8.53274C9.61312 8.54219 9.59872 8.5514 9.58471 8.56038C9.28352 8.75365 9.13447 8.85248 9.03752 8.95193C9.01576 8.97425 9.00487 8.98888 9.00006 8.9961C9.00004 8.99719 9.00002 8.99848 9.00002 9V10H7.00002V9C7.00002 8.36831 7.27443 7.89539 7.60537 7.55588C7.87516 7.27912 8.21507 7.06207 8.45012 6.91197C8.46899 6.89992 8.48719 6.8883 8.50461 6.87712C9.08301 6.50598 9.22542 6.35112 9.26007 6.10858C9.32718 5.63879 9.19239 5.42486 9.05886 5.30405C8.88525 5.14699 8.54074 5 8.00002 5Z"}),(0,r.jsx)("circle",{cx:"8",cy:"12",r:"1.25"})]}))}},71066:function(e,t,n){var r=n(85893);n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},e,{children:[(0,r.jsx)("path",{d:"M8 1h3v1l-1 1v4l2 .875V9H9v5.125L8 15l-1-.875V9H4V7.875L6 7V3L5 2V1z"}),e.children]}))}},3338:function(e,t,n){n.d(t,{s:function(){return s}});var r=n(85893);n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}var a=function(e){return(0,r.jsxs)("svg",i({width:"16",height:"16",fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 16 16"},e,{children:[(0,r.jsx)("path",{d:"M4 12.4788V3.52116C4 2.23802 5.50646 1.54723 6.47878 2.38451L11.68 6.86335C12.375 7.46178 12.375 8.53822 11.68 9.13665L6.47878 13.6155C5.50646 14.4528 4 13.762 4 12.4788Z"}),e.children]}))};t.Z=a;var s=function(e){return(0,r.jsx)(a,i({fill:"currentColor"},e))}},98768:function(e,t,n){var r=n(85893);n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){return(0,r.jsx)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e,{children:(0,r.jsx)("path",{d:"M4.33291 5.99999H6H7V7.99999H6H2H1V6.99999V3V2H3V3V4.31502C4.45333 2.1643 7.11877 1.0023 9.80921 1.59029C13.3335 2.36051 15.5661 5.84188 14.7958 9.36614C14.0256 12.8904 10.5442 15.123 7.01998 14.3528L6.04304 14.1393L6.47006 12.1854L7.447 12.3989C9.89216 12.9333 12.3076 11.3843 12.842 8.93912C13.3763 6.49396 11.8274 4.07856 9.38219 3.54417C7.29175 3.08731 5.22305 4.1532 4.33291 5.99999Z",fill:"currentColor"})}))}},26959:function(e,t,n){var r=n(85893);n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2"},e,{children:[(0,r.jsx)("rect",{x:"3",y:"7",width:"10",height:"7",rx:"0.5"}),(0,r.jsx)("path",{d:"M5 7.5V5C5 1.36704 9.9495 1.03365 10.8577 4"})]}))}},952:function(e,t,n){var r=n(85893);n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentColor"},e,{children:[(0,r.jsx)("circle",{r:"1.5",cx:"8",cy:"2.5"}),(0,r.jsx)("circle",{r:"1.5",cx:"8",cy:"7.5"}),(0,r.jsx)("circle",{r:"1.5",cx:"8",cy:"12.5"})]}))}},22513:function(e,t,n){var r=n(85893);n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){return(0,r.jsx)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({viewBox:"0 0 16 16",width:"16",height:"16",fill:"none",strokeWidth:"1.5",strokeLinecap:"round",stroke:"currentColor"},e,{children:(0,r.jsx)("path",{d:"M6.983 2.57l-5.021 8.25a1.19 1.19 0 0 0 1.017 1.785h10.013a1.19 1.19 0 0 0 1.017-1.784L9.017 2.57a1.19 1.19 0 0 0-2.034 0zM8 5.45V8M8 10v.1"})}))}},73488:function(e,t,n){n.d(t,{Q:function(){return l}});var r=n(85893),o=n(72760),i=n(67294),a=n(11233);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}var l=function(e){var t=e.node,n=e.dispatch,s=e.autoWidth,l=void 0!==s&&s,u=e.style,d=e.source,f=e.onRename,p=e.onFocus,m=t.id,h=(0,i.useState)((0,o.u2)(t)||""),v=h[0],b=h[1];return(0,i.useEffect)((function(){b((0,o.u2)(t)||"")}),[t]),(0,r.jsx)(a.Z,{value:v,"data-cy":"cell-name-input-".concat(d),style:c({font:"var(--monospace-font)",textOverflow:"ellipsis",maxWidth:200,minWidth:75,width:l&&v?"calc((".concat(v.length," * 8.5px) + (2 * var(--spacing-small)))"):(null===u||void 0===u?void 0:u.minWidth)||75},u),minimal:!0,maxLength:65536,placeholder:"unnamed",large:!1,onMouseDown:function(e){return e.stopPropagation()},onChange:function(e){return b(e.target.value.replace(/\s/g,""))},onBlur:function(){var e,r;v!==((0,o.u2)(t)||"")&&n({type:"setName",name:v,id:m,source:d}),e=document.activeElement,(null!=(r=HTMLElement)&&"undefined"!==typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](e):e instanceof r)&&document.activeElement.blur(),f&&f()},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.target.blur())},onFocus:p})}},5108:function(e,t,n){n.d(t,{i:function(){return Z}});var r=n(85893),o=n(2334),i=n(1864),a=n(71066),s=n(3338),c=n(18270),l=n(61107),u=n(50826),d=n(40178),f=n(84236),p=n(67294),m=n(4242),h=n(65988),v=n.n(h),b=n(53261);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=function(e){var t=e.mode,n=e.setMode,o=e.hasTableMode;return(0,r.jsxs)("div",{style:{height:29,backgroundColor:"var(--observable-focus-lightest-blue)",color:"var(--observable-focus-dark-blue)"},className:"jsx-ea6f32644d134fc2 flex items-center absolute z-2 flex menu br2",children:[Object.entries(b.qz).filter((function(e){var t=g(e,1)[0];return o||"table"!==t})).map((function(e){var o=g(e,2),i=o[0],a=o[1],s=a.label,c=a.icon;return(0,r.jsxs)("button",{"aria-label":"cell-menu-".concat(s),onMouseDown:l.P,onClick:function(){return n(i)},className:"jsx-ea6f32644d134fc2 "+"flex items-center mr2 fw5 f7 pointer ph2 border-box bn bg-transparent br2 ".concat(i===t?"selected":""),children:[(0,r.jsx)("span",{className:"jsx-ea6f32644d134fc2 mr1-ns flex items-center",children:(0,r.jsx)(c,{className:"jsx-ea6f32644d134fc2"})}),(0,r.jsx)("span",{className:"jsx-ea6f32644d134fc2 dn di-ns",children:s})]},s)})),(0,r.jsx)(v(),{id:"ea6f32644d134fc2",children:"button.jsx-ea6f32644d134fc2{padding:2px 6px}\n.selected.jsx-ea6f32644d134fc2{background-color:var(--white);\nbox-shadow:0 2px 3px rgba(0, 0, 0, 0.2);\ncolor:var(--near-black)}\n.menu.jsx-ea6f32644d134fc2{right:0;\ntop:0;\nmargin:0px -14px 0px -13px;\npadding-left:6px}"})]})},j=n(14921),w=n(30883),k=n(73488),C=n(25158),O=n(37497),S=n(71675),N=n(75872),L=n(23869),P=n(14663),M=n(8433),E=n(89905),R=n(21142),_=p.memo((function(e){var t=e.node,n=e.hasPrevious,o=e.hasNext,i=e.editorEmpty,l=e.editorFocused,u=e.editorHidden,f=e.editorKey,m=e.editorMode,h=e.editorSettings,v=e.editors,y=e.dirty,g=e.dispatch,x=t.id,w=t.pinned,_=(0,p.useState)(0),A=_[0],Z=_[1],I=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O.hA,{icon:y?s.s:s.Z,title:"Run cell ".concat((0,d.ZP)("Shift-Enter")),className:y?"blue":"",onClick:function(){v.applyCommand(f,(0,c.z)("click"))}}),!u&&(0,r.jsx)(O.hA,{icon:a.Z,title:"".concat(w?"Unpin":"Pin"," cell ").concat((0,d.ZP)("Mod-.")),className:w?"blue ml2":"ml2",onClick:function(){return g({type:"togglePin",id:x})}}),(0,r.jsx)(O.hA,{icon:L.Z,title:"Select cell ".concat((0,d.ZP)("Escape-X")),className:"ml2",onClick:function(){return g({type:"selectionPromote"})}}),(0,r.jsx)(O.hA,{icon:N.Z,title:"Move cell up ".concat((0,d.ZP)("Ctrl-Shift-Up")),className:"ml2",disabled:!n,joinRight:!0,onClick:function(){return g({type:"moveUp",id:x})}}),(0,r.jsx)(O.hA,{icon:S.Z,title:"Move cell down ".concat((0,d.ZP)("Ctrl-Shift-Down")),className:"ml2",disabled:!o,joinLeft:!0,onClick:function(){return g({type:"moveDown",id:x})}}),(0,r.jsx)(O.hA,{icon:P.Z,title:"Duplicate cell ".concat((0,d.ZP)("Shift-Alt-Mod-Down")),disabled:i,className:"ml2",onClick:function(e){g({type:"duplicate",id:x,before:e.shiftKey})}}),(0,r.jsx)(O.hA,{icon:M.Z,title:"Double-click to delete cell ".concat((0,d.ZP)("Alt-Backspace")),className:"ml2",destructive:0!==A,text:A?"Delete?":"",onClick:function(e){A?(g({type:"remove",focusAfter:e.shiftKey,focusBefore:!e.shiftKey,id:x}),window.clearTimeout(A),Z(0)):Z(window.setTimeout((function(){return Z(0)}),2500))}}),l&&b.qz[m].toolbar.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"ml2 mv1 bl bw1 br2",style:{borderColor:"var(--observable-focus-light-blue)"}}),b.qz[m].toolbar.map((function(e){return(0,r.jsx)(O.hA,{"data-cy":e.name,icon:e.icon,title:e.title,joinLeft:e.joinLeft,joinRight:e.joinRight,className:"ml2",onClick:function(){"attach"!==e.name||h.fileUploadsOn?e.onClick(f,v,x,g):g({type:"showModal",modal:"login",modalProps:{loginReason:"files"},trigger:"click",source:"nodeEditorToolbarAttachButton"})}},e.name)}))]}):null,(0,r.jsx)("div",{className:"flex flex-grow-1"}),(0,r.jsx)(O.hA,{icon:E.Z,title:"Blur cell ".concat((0,d.ZP)("Escape")),transparent:!0,onMouseDown:function(e){e.stopPropagation()},onClick:function(){g({type:"blur",id:x})}})]});return(0,C.t)()?(0,r.jsx)("div",{className:"pt1 pb2 near-black",style:{marginLeft:-14,marginRight:-14,minWidth:"calc(100% + 28px)",borderBottomRightRadius:"0.25rem",borderTopRightRadius:0,backgroundColor:"var(--observable-focus-lightest-blue)"},onMouseDown:function(e){e.preventDefault()},children:(0,r.jsx)("div",{className:"ph2 w-100 flex relative no-wrap overflow-y-hidden overflow-x-auto",children:I})}):(0,r.jsx)(j.h,{children:(0,r.jsx)("div",{className:"fixed left-0 right-0 bottom-0 pv2 z-1 bg-white b--silver bt near-black",onMouseDown:function(e){e.preventDefault(),v.refocus()},children:(0,r.jsx)(R.Z,{className:"w-100",children:(0,r.jsxs)("div",{className:"flex relative",style:{marginLeft:-14,marginRight:-14},children:[(0,r.jsx)("div",{className:"absolute h-100 flex items-center pr2",style:{font:"var(--monospace-font)",right:"100%"},children:(0,r.jsx)(k.Q,{node:t,source:"nodeToolbar",onRename:function(){return v.refocus()},dispatch:g,style:{textAlign:"right",width:"calc(max((100vw - var(--max-width-8))/2, 0px))"}})}),I]})})})})})),A=function(e){var t=e.node,n=e.dirty,a=e.hasPrevious,s=e.hasNext,c=e.editorFocused,l=e.editorState,u=e.editors,d=e.dispatch,f=l.field(i.C),p="table"===f;return(0,r.jsx)(_,{node:t,hasPrevious:a,hasNext:s,editorEmpty:!p&&0===l.doc.length,editorFocused:c,editorHidden:p,editorKey:l.field(o.A),editorMode:f,editorSettings:l.field(w.i),editors:u,dirty:n,dispatch:d})},Z=p.memo((function(e){var t=e.node,n=e.editorState,h=e.focused,v=e.hovered,b=e.selected,y=e.hasPrevious,g=e.hasNext,j=e.editors,w=e.compareStyle,k=e.hidden,C=(0,m.I0)(),O=(0,m.v9)((function(e){var t=e.currentUser;return(0,u.U)(t,"bold_reference_marks")})),S=(0,m.v9)((function(e){var t=e.currentUser;return(0,u.U)(t,"table_mode")})),N=(0,m.v9)((function(e){var t=e.currentUser;return(0,u.U)(t,"insert_menu")})),L=t.id,P=t.value,M=t.pinned,E=(0,p.useRef)(null),R=(0,p.useState)(!1),_=R[0],Z=R[1],I=n.field(o.A),D=n.field(i.C),U=P.length!==n.doc.length||P!==n.doc.toString(),V=v||h||b?void 0:"hidden";return(0,p.useEffect)((function(){return j.attach(I,E.current),function(){return j.detach(I)}}),[j,I]),(0,p.useEffect)((function(){var e=function(){Z(document.hasFocus())},t=function(){Z(r.contains(document.activeElement))},n=function(){Z(!1)};if(h){var r=E.current;return r.addEventListener("focusin",e),r.addEventListener("focusout",n),addEventListener("focus",t),addEventListener("blur",n),Z(document.hasFocus()&&r.contains(document.activeElement)),function(){r.removeEventListener("focusin",e),r.removeEventListener("focusout",n),removeEventListener("focus",t),removeEventListener("blur",n),Z(!1)}}}),[h]),(0,r.jsxs)("div",{className:"relative pea".concat(O?" bold-reference-marks":""),children:[(0,r.jsxs)("div",{ref:E,className:"relative".concat("sql"===D?" node-sql":"").concat(v?" node-hover":"").concat(h?" node-focus":"").concat(b?" node-select":"").concat(h||b||"add"!==w?"":" node-add"),style:k?{display:"none",height:"0"}:{},children:[h&&0===n.doc.length&&!N?(0,r.jsx)(x,{mode:D,setMode:function(e){C({type:"setMode",id:L,source:"cellMenu",trigger:"click",mode:e})},hasTableMode:S}):!(0,f.Om)(D)&&(0,r.jsx)("div",{className:"flex absolute moon-gray",style:{top:4,right:-10,visibility:V},children:(0,r.jsx)(s.Z,{className:"pointer squishy ".concat(U?"blue":"hover-mid-gray"),role:"button",fill:U?"currentColor":"none","aria-label":"Run cell ".concat((0,d.ZP)("Shift-Enter")),onMouseDown:l.P,onClick:function(){return j.applyCommand(I,(0,c.z)("click"))},style:{padding:"3px 0 2px 0"},children:(0,r.jsx)("title",{children:"Run cell ".concat((0,d.ZP)("Shift-Enter"))})})}),h&&(0,r.jsx)(A,{node:t,dirty:U,editorFocused:_,editorState:n,editors:j,hasPrevious:y,hasNext:g,dispatch:C})]}),!k&&(v||h)&&(0,r.jsx)("div",{className:"flex absolute moon-gray",style:{top:4,left:-55,visibility:V},children:(0,r.jsx)(a.Z,{className:"pointer squishy ".concat(M?"blue":"hover-mid-gray"),role:"button","aria-label":M?"Unpin":"Pin",onMouseDown:l.P,onClick:function(){return C({type:"togglePin",id:L})},style:{padding:"3px 0 2px 0"},children:(0,r.jsxs)("title",{children:[M?"Unpin":"Pin"," cell ",(0,d.ZP)("Mod-.")]})})})]})}))},31408:function(e,t,n){n.d(t,{a:function(){return ci}});var r=n(85893),o=n(2334),i=n(1864),a=n(730),s=n(14921),c=n(33042),l=n(31115),u=n(40178),d=n(67294),f=n(99223),p=n(37497),m=n(71675),h=n(75872),v=n(23869),b=n(14663),y=n(71066),g=n(3338);function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){x(e,t,n[t])}))}return e}var w=function(e){return(0,r.jsxs)("svg",j({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e,{children:[(0,r.jsx)("mask",{id:"path-1-inside-1_528:41919",fill:"white",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 1C2.79086 1 1 2.79086 1 5V11C1 13.2091 2.79086 15 5 15H11C13.2091 15 15 13.2091 15 11V5C15 2.79086 13.2091 1 11 1H5ZM11.868 6.94597L12.5639 6.22791L11.1278 4.83596L10.4318 5.55403L7.149 8.94108L5.67569 7.67824L4.91644 7.02745L3.61485 8.54597L4.37411 9.19676L6.56161 11.0718L7.2758 11.6839L7.93047 11.0085L11.868 6.94597Z"})}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 1C2.79086 1 1 2.79086 1 5V11C1 13.2091 2.79086 15 5 15H11C13.2091 15 15 13.2091 15 11V5C15 2.79086 13.2091 1 11 1H5ZM11.868 6.94597L12.5639 6.22791L11.1278 4.83596L10.4318 5.55403L7.149 8.94108L5.67569 7.67824L4.91644 7.02745L3.61485 8.54597L4.37411 9.19676L6.56161 11.0718L7.2758 11.6839L7.93047 11.0085L11.868 6.94597Z",fill:"currentColor"}),(0,r.jsx)("path",{d:"M12.5639 6.22791L14.0001 7.61985L15.392 6.18372L13.9559 4.79177L12.5639 6.22791ZM11.868 6.94597L10.4318 5.55403L10.4318 5.55403L11.868 6.94597ZM11.1278 4.83596L12.5198 3.39982L11.0836 2.00788L9.69167 3.44401L11.1278 4.83596ZM10.4318 5.55403L11.868 6.94597L11.868 6.94597L10.4318 5.55403ZM7.149 8.94108L5.84742 10.4596L7.2758 11.6839L8.58514 10.333L7.149 8.94108ZM5.67569 7.67824L6.97728 6.15973L6.97728 6.15973L5.67569 7.67824ZM4.91644 7.02745L6.21802 5.50894L4.69951 4.20736L3.39792 5.72587L4.91644 7.02745ZM3.61485 8.54597L2.09634 7.24438L0.794758 8.7629L2.31327 10.0645L3.61485 8.54597ZM4.37411 9.19676L5.67569 7.67824L5.67569 7.67824L4.37411 9.19676ZM6.56161 11.0718L5.26003 12.5903L5.26003 12.5903L6.56161 11.0718ZM7.2758 11.6839L5.97422 13.2024L7.40261 14.4268L8.71194 13.0759L7.2758 11.6839ZM7.93047 11.0085L9.3666 12.4004L9.3666 12.4004L7.93047 11.0085ZM3 5C3 3.89543 3.89543 3 5 3V-1C1.68629 -1 -1 1.68629 -1 5H3ZM3 11V5H-1V11H3ZM5 13C3.89543 13 3 12.1046 3 11H-1C-1 14.3137 1.68629 17 5 17V13ZM11 13H5V17H11V13ZM13 11C13 12.1046 12.1046 13 11 13V17C14.3137 17 17 14.3137 17 11H13ZM13 5V11H17V5H13ZM11 3C12.1046 3 13 3.89543 13 5H17C17 1.68629 14.3137 -1 11 -1V3ZM5 3H11V-1H5V3ZM11.1278 4.83596L10.4318 5.55403L13.3041 8.33792L14.0001 7.61985L11.1278 4.83596ZM9.73586 6.27209L11.172 7.66404L13.9559 4.79177L12.5198 3.39982L9.73586 6.27209ZM11.868 6.94597L12.5639 6.2279L9.69167 3.44401L8.9957 4.16208L11.868 6.94597ZM8.58514 10.333L11.868 6.94597L8.9957 4.16208L5.71286 7.54913L8.58514 10.333ZM4.37411 9.19676L5.84742 10.4596L8.45058 7.42257L6.97728 6.15973L4.37411 9.19676ZM3.61485 8.54597L4.37411 9.19676L6.97728 6.15973L6.21802 5.50894L3.61485 8.54597ZM5.13337 9.84755L6.43495 8.32904L3.39792 5.72587L2.09634 7.24438L5.13337 9.84755ZM5.67569 7.67824L4.91644 7.02745L2.31327 10.0645L3.07253 10.7153L5.67569 7.67824ZM7.86319 9.55324L5.67569 7.67824L3.07253 10.7153L5.26003 12.5903L7.86319 9.55324ZM8.57739 10.1654L7.86319 9.55324L5.26003 12.5903L5.97422 13.2024L8.57739 10.1654ZM6.49433 9.61653L5.83967 10.292L8.71194 13.0759L9.3666 12.4004L6.49433 9.61653ZM10.4318 5.55403L6.49433 9.61653L9.3666 12.4004L13.3041 8.33792L10.4318 5.55403Z",fill:"currentColor",mask:"url(#path-1-inside-1_528:41919)"})]}))},k=n(8433),C=n(89905),O=n(21142);var S=function(e){var t=e.model,n=e.selection,o=e.selectionFocusId,i=e.dispatch,a=(0,f.dZ)({selection:n,selectionFocusId:o}),x=(0,l.G)(a,(function(e){return!(0,c.DY)(t,e).pinned})),j=(0,l.G)(a,(function(e){var n=(0,c.t$)(t,e);return null!==n&&!a.has(n)})),S=(0,l.G)(a,(function(e){var n=(0,c.o4)(t,e);return null!==n&&!a.has(n)})),N=(0,d.useState)(0),L=N[0],P=N[1];return(0,r.jsx)(s.h,{children:(0,r.jsx)("div",{className:"fixed left-0 right-0 bottom-0 pv2 z-1 bg-white b--silver bt near-black",children:(0,r.jsx)(O.Z,{className:"w-100",children:(0,r.jsxs)("div",{className:"flex relative",style:{marginLeft:-14,marginRight:-14},children:[(0,r.jsxs)("div",{className:"absolute h-100 nowrap flex items-center fw6 pr2",style:{right:"100%"},children:[a.size.toLocaleString("en")," ",1===a.size?"cell":"cells"]}),(0,r.jsx)(p.hA,{icon:g.Z,title:"Run cells ".concat((0,u.ZP)("Shift-Enter")),onClick:function(){return i({type:"selectionRun"})}}),(0,r.jsx)(p.hA,{icon:y.Z,title:"".concat(x?"Pin cells":"Unpin cells"," ").concat((0,u.ZP)("P")),className:x?"ml2":"blue ml2",onClick:function(){return i({type:"selectionPin"})}}),(0,r.jsx)(p.hA,{icon:n.size?w:v.Z,title:null===o||n.size?"Clear selection ".concat((0,u.ZP)("Escape")):"Toggle selection ".concat((0,u.ZP)("X")),className:"ml2".concat(n.size?" blue":""),onClick:function(){null===o||n.size?i({type:"selectionBlur"}):i({type:"selectionToggle",id:o})}}),(0,r.jsx)(p.hA,{icon:h.Z,title:"Move cells up ".concat((0,u.ZP)("Alt-Up")),className:"ml2",disabled:!j,joinRight:!0,onClick:function(){return i({type:"selectionMoveUp"})}}),(0,r.jsx)(p.hA,{icon:m.Z,title:"Move cells down ".concat((0,u.ZP)("Alt-Down")),className:"ml2",disabled:!S,joinLeft:!0,onClick:function(){return i({type:"selectionMoveDown"})}}),(0,r.jsx)(p.hA,{icon:b.Z,title:"Duplicate cells ".concat((0,u.ZP)("Shift-Alt-Down")),className:"ml2",onClick:function(e){return i({type:"selectionDuplicate",before:e.shiftKey})}}),(0,r.jsx)(p.hA,{icon:k.Z,title:"Delete cells ".concat((0,u.ZP)("D")),className:"ml2",destructive:0!==L,text:L?"Delete?":"",onClick:function(){L?(i({type:"selectionDelete"}),window.clearTimeout(L),P(0)):P(window.setTimeout((function(){return P(0)}),2500))}}),(0,r.jsx)("div",{className:"flex flex-grow-1"}),(0,r.jsx)(p.hA,{icon:C.Z,title:"Clear selection ".concat((0,u.ZP)("Escape")),className:"ml2",transparent:!0,onClick:function(){return i({type:"selectionClear"})}})]})})})})},N=n(51289),L=n(65062),P=n(72760);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R,_=n(50826),A=n(48373),Z=n(33494);function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e){var t=0,n=!0,r=!1,o=void 0;try{for(var i,a=e.values()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){t+=i.value.total}}catch(s){r=!0,o=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t}function V(e,t,n,r){var o=0,i=new ResizeObserver((function(e){var i=D(e,1)[0].contentRect.height;i!==o&&T({dispatch:r,type:n,id:t,height:o=i})}));return i.observe(e),{disconnect:function(){i.disconnect(),0!==o&&T({dispatch:r,type:n,id:t,height:o=0})}}}function T(e){R?R.push(e):(R=[e],new Promise(requestAnimationFrame).then(F))}function F(){var e=R;R=null;var t=new Map,n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,c=s.id,l=s.type,u=s.height,d=s.dispatch;t.has(d)?t.get(d).push({id:c,type:l,height:u}):t.set(d,[{id:c,type:l,height:u}])}}catch(y){r=!0,o=y}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}var f=!0,p=!1,m=void 0;try{for(var h,v=t[Symbol.iterator]();!(f=(h=v.next()).done);f=!0){var b=D(h.value,2);(0,b[0])({type:"cellHeight",heights:b[1]})}}catch(y){p=!0,m=y}finally{try{f||null==v.return||v.return()}finally{if(p)throw m}}}var H=n(84236),B=n(4242),z=n(74080),q=n(88725),W=n(66421),Y=n(25655),$=n(94726),K=n(47311),G=n(1099),J=n(22513),X=n(84193),Q=n(42568),ee=n(56367),te=n(27193),ne=n(36448),re=n(8385),oe=n(64893),ie=function(e){var t=e.notebook,n=e.dispatch,o=e.comment,i=e.currentUser,a=e.first,s=e.repeated,c=i&&!(0,Y.ws)(t),l=(0,W.Ss)(o,i,t),u=o.create_time,d=o.update_time,f=o.content,m=o.user,h=(0,Y.tO)(o)?"comment-local-".concat(o.nonce):"comment-".concat(o.id),v=l||c&&!(0,Y.tO)(o);return(0,r.jsxs)("div",{id:h,"data-cy":"comment",className:"pv2 hide-child ".concat(a||s?"":"bt b--light-gray"),children:[(0,r.jsxs)("div",{className:"flex pb1 items-center justify-between lh-title",children:[(0,r.jsxs)("div",{className:"flex items-center",style:{minWidth:0},children:[s?null:(0,r.jsx)(X.Z,{href:(0,ne.GN)(m),children:(0,r.jsxs)("a",{className:"inline-flex truncate no-underline dark-gray hover-blue items-center mr2",children:[(0,r.jsx)(re.q,{user:m,size:24,className:"mr2 br-100"}),(0,r.jsx)("span",{className:"truncate fw5",children:(0,te.KY)(m)})]})}),(0,Y.tO)(o)?null:(0,r.jsx)("a",{className:"mid-gray no-underline nowrap",href:"#".concat(h),children:(0,r.jsx)(oe.i,{time:d||u})})]}),(0,r.jsxs)(Q.v2,{children:[(0,r.jsx)(p.hU,{title:"Comment actions",className:v?"":"o-0",colorless:!0,disabled:!v,icon:G.v,asMenuButton:!0}),(0,r.jsxs)(Q.qy,{children:[l&&(0,r.jsxs)(Q.sN,{"data-cy":"delete-comment",className:"hover-dark-red hover-bg-washed-red",disabled:!(0,z.id)(o),onSelect:function(){n({type:"showModal",modal:"deleteComment",modalProps:{comment:o}})},children:[(0,r.jsx)(k.Z,{className:"w1 mr2"}),"Delete"]}),c&&!(0,Y.tO)(o)&&(0,r.jsxs)(Q.sN,{"data-cy":"report-comment",onSelect:function(){n({type:"showModal",modal:"reportAbuse",modalProps:{comment:o}})},children:[(0,r.jsx)(J.Z,{className:"w1 mr2"}),"Report spam or abuse"]})]})]})]}),(0,r.jsx)("div",{className:"overflow-x-hidden break-word pre-wrap",children:(0,r.jsx)(ee.R,{content:f})})]})},ae=function(e){var t=e.children;return(0,r.jsxs)("span",{className:"relative-ns v-mid disappear-child",style:{lineHeight:0},children:[(0,r.jsx)("span",{className:"dib ml2 f7 fw6 tc mid-gray hover-dark-gray bg-white ba b--silver br-pill hover-b--light-silver pointer",style:{width:"1.1rem",height:"1.1rem",lineHeight:"1.15rem"},children:"?"}),(0,r.jsx)("nav",{className:"db absolute tl lh-solid z-3 child",style:{right:"-11px",width:"16rem"},"aria-label":"submenu","aria-hidden":!open,children:(0,r.jsx)("div",{className:"f7 white bg-black br2 overflow-hidden",style:{marginTop:"7px"},children:(0,r.jsx)("div",{className:"ph2 pv1 lh-copy",children:t})})})]})},se=function(e){var t=e.notebookAccessText,n=e.isCellLocalOnly,o="You are commenting on a ".concat(t.toLowerCase()," notebook."),i="Your comment will be visible to anyone who can read this notebook.";return n&&(o="On a new cell, fork to comment.",i="You are commenting on a cell that exists only in your local copy of the notebook. To comment on this cell, you need to save it on a fork to send as a suggestion."),(0,r.jsxs)("div",{className:"inline-flex items-center",children:[(0,r.jsx)("div",{className:"db-ns dn mr2 f7 mid-gray",children:o}),(0,r.jsxs)(ae,{children:[(0,r.jsxs)("span",{className:"dn-ns di",children:[o," "]}),i]})]})},ce=function(e){var t=e.nodeId,n=e.notebook,o=e.currentUser,i=e.dispatch,a=(0,d.useState)(""),s=a[0],c=a[1],l=(0,d.useRef)(null),u=t>n.saveVersion,f=(0,d.useCallback)((function(e){var t=l.current;t.style.height="auto",t.style.height="".concat(t.scrollHeight,"px"),c(e.target.value)}),[l]),m=(0,d.useCallback)((function(e){i({type:"commentComposeCancel",nodeId:t,trigger:e,content:s.trim(),source:"commentCompose"})}),[t,i,s]),h=(0,d.useCallback)((function(e,r){e.preventDefault();var a=s.trim();a&&(i({type:"commentCreated",nodeId:t,content:a,trigger:r,currentUser:o,source:"commentCompose"}),"default"===n.subscriptionState&&i({type:"updateSubscription",status:"comments"}),c(""))}),[t,s,o,c,i,n.subscriptionState]),v=(0,d.useCallback)((function(e){"Enter"===e.key&&(e.metaKey||e.ctrlKey)?u||h(e,"keypress"):"Escape"!==e.key||s.trim()||m("keypress")}),[u,m,h,s]),b=(0,Y.OA)(o)?"true":"false";return(0,r.jsxs)("form",{onSubmit:function(e){return h(e,"click")},className:"flex relative mt2 bt flex-column items-stretch",style:{borderColor:"#e6e2d4"},children:[(0,r.jsx)("textarea",{className:"w-100 ph0 pv3 sans-serif f6 dark-gray br3 lh-f6 bg-transparent bn",style:{resize:"none"},onKeyDown:v,autoFocus:!0,rows:1,ref:l,value:s,name:"comment_description",placeholder:"",maxLength:65536,onChange:f,spellCheck:b}),(0,r.jsxs)("div",{className:"flex pv2 justify-between",children:[(0,r.jsx)(se,{notebookAccessText:(0,Y.wF)(n),isCellLocalOnly:u}),(0,r.jsxs)(p.CQ,{children:[(0,r.jsx)(p.kq,{text:"Cancel",onClick:function(){return m("click")}}),(0,r.jsx)(p.KM,{type:"submit",text:"Comment",disabled:u||!s.trim()})]})]})]})},le=n(40287);function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var de=function(e){return(0,r.jsx)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ue(e,t,n[t])}))}return e}({width:"8",height:"16",viewBox:"0 0 8 16",fill:"none"},e,{children:(0,r.jsx)("path",{d:"M1 9.5L4 7L7 9.5",stroke:"currentColor",strokeWidth:"1.8"})}))},fe=function(e){var t=e.numResolved,n=e.numUnresolved,o=e.expanded,i=e.onToggle;return(0,r.jsx)("div",{className:"flex nl2 nr2 ".concat(n?"bb":""," b--light-gray"),children:(0,r.jsxs)("button",{type:"button",onClick:i,className:"inline-flex w-100 pa2 f6 mid-gray bg-transparent i pointer bn",children:[o?(0,r.jsx)(de,{className:"mr2"}):(0,r.jsx)(le.Z,{className:"mr2"}),t>1?"".concat(t," resolved comments"):"1 resolved comment"]})})};function pe(e,t,n,o){return e.map((function(i,a){return(0,r.jsx)(ie,{currentUser:t,notebook:n,dispatch:o,comment:i,first:0===a,repeated:a>0&&e[a].user.id===e[a-1].user.id},(0,Y.tO)(i)?"local-".concat(i.nonce):"remote-".concat(i.id))}))}var me=(0,B.$j)((function(e,t){var n=e.notebook,r=e.currentUser;return{resolvedComments:(0,q.o7)(n,t.nodeId),unresolvedComments:(0,q.HS)(n,t.nodeId),notebook:n,currentUser:r}}),(function(e){return{dispatch:e}}))((function(e){var t=e.nodeId,n=e.notebook,o=e.currentUser,i=e.resolvedComments,a=e.unresolvedComments,s=e.dispatch;if(!n.openComments.has(t)||!(0,z.H7)(n))return null;var c=(0,W.f$)(n)&&a.length>0,l=n.composingComments.has(t),u=n.expandedResolvedComments.has(t);return(0,r.jsx)("div",{className:"relative pea sans-serif f6 lh-f6 dark-gray",style:{paddingTop:"0.75rem"},children:(0,r.jsxs)("div",{className:"bg-washed-yellow",style:{maxWidth:640+2*L.Mv,marginLeft:-L.Mv,marginRight:-L.Mv,paddingLeft:L.Mv,paddingRight:L.Mv},children:[u&&pe(i,o,n,s),i.length>0&&(0,r.jsx)(fe,{numResolved:i.length,numUnresolved:a.length,expanded:u,onToggle:function(){s({type:"toggleResolvedComments",nodeId:t,trigger:"click",source:"commentBox"})}}),pe(a,o,n,s),l?(0,r.jsx)(ce,{nodeId:t,notebook:n,dispatch:s,currentUser:o}):(0,r.jsxs)("div",{className:"flex justify-".concat(c?"between":"end"," bg-washed-yellow pb2"),children:[c&&(0,r.jsx)(p.sn,{onClick:function(){s({type:"resolveComments",nodeId:t,trigger:"click",source:"commentBox"})},disabled:!a.every((function(e){return(0,z.Lj)(e)})),text:"Resolve",className:"mr2"}),(0,Y.fC)(n)&&!(0,W.RF)(n)?(0,r.jsx)("div",{className:"inline-flex ph2 nr2 pt1 pb3 f6 dark-gray items-center",children:(0,r.jsx)($.h,{commentingLock:n.commentingLock})}):(0,r.jsx)(p.sn,{icon:K.Z,text:"Comment",onClick:function(){(0,W.RF)(n)?s({type:"commentComposeOpen",nodeId:t,trigger:"click",source:"commentBox"}):s({type:"showModal",modal:"login",modalProps:{loginReason:"comment"},trigger:"click",source:"comment"})}})]})]})})})),he=function(e){var t=e.id,n=e.dispatch;return(0,r.jsx)("button",{title:"Jump to error",onClick:function(){return n({type:"focusError",id:t})},className:"absolute pv1 ph2 bg-near-white red f7 fw5 bn br3 pointer pea",style:{top:-28,right:-14},children:"Jump to error"})},ve=n(65988),be=n.n(ve),ye=n(34091),ge=n(26959),xe=n(56912),je=n(928),we=(0,B.$j)((function(e){return{notebook:e.notebook}}),(function(e){return{dispatch:e}}))((function(e){var t=e.id,n=e.notebook,o=e.dispatch,i=(0,P.Qc)((0,c.DY)(n.model,t)).body.source.value,a=(0,xe.uF)(n),s=(0,xe.uF)(n,{ignoreResolutions:!0}),l=(0,d.useMemo)((function(){if(a&&s){var e=(0,xe.$r)(a).directImports;return(0,xe.ng)(s.specifiers,e,n.model.resolutions).get(i)}}),[i,a,s,n.model.resolutions]);if(!l)return null;var u=(0,xe.xT)(null===a||void 0===a?void 0:a.specifiers[i]);return je.Z.parse(i)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{title:"".concat(l.updatesAvailable?"Updates available. ":"").concat("locked"===l.lockStatus?"This import and all of its dependencies are locked.":"unlocked"===l.lockStatus?"This import and all of its dependencies are unlocked, so the latest version will always be imported.":"Not all of this import's dependencies are locked."," Click to open the Dependency versions pane and manage versions."),onClick:function(){o({type:"showNotebookDependencyDetails",updatesAvailable:l.updatesAvailable,status:l.lockStatus,specifier:i})},className:be().dynamic([["bd8267955ac5d040",[u?"color: var(--white)":"",l.updatesAvailable?"background-color: var(--observable-focus-light-blue)":"",u?"background-color: var(--red)":"",u?"color: var(--white)":"",u?"background-color: var(--red);":""]]])+" "+"".concat(l.updatesAvailable?"has-updates ":"","lock-status absolute hover-mid-gray pv1 ph2 bg-near-white f7 fw5 bn gray br4 pointer flex items-center align-center pea"),children:"locked"===l.lockStatus?(0,r.jsx)(ye.Z,{}):(0,r.jsx)(ge.Z,{})}),(0,r.jsx)(be(),{id:"bd8267955ac5d040",dynamic:[u?"color: var(--white)":"",l.updatesAvailable?"background-color: var(--observable-focus-light-blue)":"",u?"background-color: var(--red)":"",u?"color: var(--white)":"",u?"background-color: var(--red);":""],children:".lock-status.__jsx-style-dynamic-selector{padding-left:10px;\npadding-right:10px;\ntop:-28px;\nright:-14px;\ncolor:var(--observable-focus-dark-blue);\n".concat(u?"color: var(--white)":"",";\n").concat(l.updatesAvailable?"background-color: var(--observable-focus-light-blue)":"",";\n").concat(u?"background-color: var(--red)":"","}\n.lock-status.__jsx-style-dynamic-selector:hover{color:var(--mid-gray);\n").concat(u?"color: var(--white)":"",'}\n.has-updates.__jsx-style-dynamic-selector::after{content:"";\nposition:absolute;\ntop:0;\nright:0;\nwidth:7px;\nheight:7px;\nbackground-color:var(--observable-focus-dark-blue);\n').concat(u?"background-color: var(--red);":"",";\nborder-radius:3.5px}")})]}):null})),ke=n(17764),Ce=n(60803);function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Se=function(e){return(0,r.jsx)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Oe(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e,{children:(0,r.jsx)("path",{d:"M9.25 5L6.75 8L9.25 11",stroke:"currentColor",strokeWidth:"2"})}))},Ne=n(74878),Le=n(49516),Pe=n(70975),Me=n(18270),Ee=n(73488),Re=n(48634);function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ae=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_e(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e,{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 5C1 2.79086 2.79086 1 5 1H11C13.2091 1 15 2.79086 15 5V11C15 13.2091 13.2091 15 11 15H5C2.79086 15 1 13.2091 1 11V5ZM5 3C3.89543 3 3 3.89543 3 5V11C3 12.1046 3.89543 13 5 13H11C12.1046 13 13 12.1046 13 11V5C13 3.89543 12.1046 3 11 3H5Z",fill:"currentColor"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.7071 6.70711L7.00001 11.4142L4.29291 8.70711L5.70712 7.29289L7.00001 8.58579L10.2929 5.29289L11.7071 6.70711Z",fill:"currentColor"})]}))},Ze=n(34051),Ie=n.n(Ze),De=["sql","sqlite","postgres","bigquery","snowflake","mysql"];function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){var n=t.databaseResults;if(r=n,null!=(o=Map)&&"undefined"!==typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](r):r instanceof o){var r,o,i=new Map,a=!0,s=!1,c=void 0;try{for(var l,u=n[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var d=Fe(l.value,2),f=d[0],p=d[1];if("number"===typeof f)if(null!==p){var m=p.results,h=p.schema,v=p.error,b=p.pending;if(v)i.set(f,{error:v+""});else if(b)i.set(f,{pending:!0});else{if(!Array.isArray(m))return;var y=ze(h);i.set(f,{results:m,schema:"object"===y.type?y.properties:new Map})}}else i.set(f,null)}}catch(g){s=!0,c=g}finally{try{a||null==u.return||u.return()}finally{if(s)throw c}}e({type:"databaseResults",databaseResults:i})}}var Be={databaseBaseType:"unknown",type:"string",isArray:!1,nullable:!0,privileges:void 0};function ze(e){if(!e||"object"!==typeof e)return Be;var t,n=e.type,r=e.privileges,o=Te(e,["type","privileges"]),i=!1;Array.isArray(n)?(t=n.filter((function(e){return"null"!==e})).shift()||"string",i=n.some((function(e){return"null"===e}))):t=n;var a=!1;if("array"===t&&(a=!0,"items"in o))return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ve(e,t,n[t])}))}return e}({},ze(o.items),{nullable:i,privileges:r,isArray:!0});if("object"===t&&"properties"in o)return{type:"object",databaseBaseType:t,isArray:a,nullable:i,properties:new Map(Object.entries(o.properties).map((function(e){var t=Fe(e,2);return[t[0],ze(t[1])]}))),privileges:r};var s=t;return Object.entries(o).length>0&&(s=Object.entries(o).map((function(e){var t=Fe(e,2),n=t[0];return t[1]?n:null})).filter((function(e){return!!e})).shift()),{type:t,databaseBaseType:s,isArray:a,nullable:i,privileges:r}}var qe=n(3961);function We(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,o)}function Ye(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){We(i,r,o,a,s,"next",e)}function s(e){We(i,r,o,a,s,"throw",e)}a(void 0)}))}}function $e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t,n){return t&&Ke(e.prototype,t),n&&Ke(e,n),e}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}function Qe(e,t){return!t||"object"!==tt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tt=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function nt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Je(e);if(t){var o=Je(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Qe(this,n)}}var rt=function(e){Xe(n,e);var t=nt(n);function n(e,r){var o;return $e(this,n),(o=t.call(this))._id=e,o._mode=r,o}return Ge(n,[{key:"process",value:function(e){var t=this;return Ye(Ie().mark((function n(){var r;return Ie().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e({type:"request_database_clients",mode:t._mode,node_id:t._id});case 2:if(r=n.sent){n.next=5;break}throw new Error("request_database_clients failed");case 5:return n.abrupt("return",r.map((function(e){var t,n=e.name,r=e.dialect;return{name:n+"",dialect:(t=r,De.includes(t)?r:"sql")}})).sort(ot));case 6:case"end":return n.stop()}}),n)})))()}}]),n}(qe.i);function ot(e,t){return it(e.name,t.name)||it(e.dialect,t.dialect)}function it(e,t){return e<t?-1:e>t?1:0}var at=function(e){Xe(n,e);var t=nt(n);function n(e,r){var o;return $e(this,n),(o=t.call(this))._id=e,o._source=r,o}return Ge(n,[{key:"process",value:function(e){var t=this;return Ye(Ie().mark((function n(){var r;return Ie().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e({type:"request_database_schema",node_id:t._id,source:t._source});case 2:if(r=n.sent){n.next=5;break}throw new Error("request_database_schema failed");case 5:if("object"!==r.type||"object"!==typeof r.properties){n.next=7;break}return n.abrupt("return",Object.keys(r.properties).map((function(e){return{name:e}})));case 7:throw new Error("database schema is not a valid JSON schema");case 8:case"end":return n.stop()}}),n)})))()}}]),n}(qe.i),st=function(e){Xe(n,e);var t=nt(n);function n(e,r,o){var i;return $e(this,n),(i=t.call(this))._id=e,i._source=r,i._table=o,i}return Ge(n,[{key:"process",value:function(e){var t=this;return Ye(Ie().mark((function n(){var r,o;return Ie().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t._source.name&&t._table){n.next=2;break}return n.abrupt("return",new Map);case 2:return n.next=4,e({type:"request_database_schema",node_id:t._id,table:t._table,source:t._source});case 4:if(r=n.sent,"object"!==(o=ze(r)).type||"object"!==typeof o.properties){n.next=8;break}return n.abrupt("return",o.properties);case 8:throw new Error("database schema is not a valid JSON schema");case 9:case"end":return n.stop()}}),n)})))()}}]),n}(qe.i);function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lt(e){return function(e){if(Array.isArray(e))return ct(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ct(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ut=function(e){var t=e.id,n=e.data,o=e.dispatch,i=n.operations,a=i.from.table,s=i.select.columns,c=(0,Re.uF)().isExpanded,l=(0,d.useState)([]),u=l[0],f=l[1],p=(0,d.useState)(),m=p[0],h=p[1];return(0,d.useEffect)((function(){c&&new st(t,n.source,a).run(o).then((function(e){f(Array.from(e.keys()))}))}),[c,t,n,o,a]),(0,r.jsxs)(Q.YI,{className:"bg-white ba b--silver br2 shadow-4 outline-0 pa12 overflow-auto",style:{minWidth:"150px",maxWidth:"".concat(300,"px"),maxHeight:"400px"},children:[(0,r.jsxs)("div",{className:"jsx-bca62cd75c72199c flex justify-between pb12",children:[(0,r.jsx)("div",{className:"jsx-bca62cd75c72199c gray f7",children:"Columns"}),null!==s&&(0,r.jsx)("button",{disabled:!u,onClick:function(){o({type:"setDataOperations",id:t,operations:{select:{columns:null}}})},className:"jsx-bca62cd75c72199c bg-transparent bn blue fw6 f7 pa0 pointer",children:"Show all"})]}),(0,r.jsx)(Q.sd,{children:a?u.map((function(e){return(0,r.jsxs)("div",{onMouseEnter:function(){return h(e)},onMouseLeave:function(){return h(void 0)},className:"jsx-bca62cd75c72199c flex mb1",children:[(0,r.jsxs)("label",{style:{flexGrow:1},className:"jsx-bca62cd75c72199c "+"flex fg1 items-center mr2 f6 fw5 lh-copy pointer ".concat((null===s||void 0===s?void 0:s.includes(e))||null===s?"dark-gray":"gray"),children:[(0,r.jsx)("input",{type:"checkbox",checked:null===s||s.includes(e),onChange:function(){var n=null===s?u.filter((function(t){return t!==e})):s.includes(e)?s.filter((function(t){return t!==e})):s.length<u.length-1?lt(s).concat([e]):null;o({type:"setDataOperations",id:t,operations:{select:{columns:n}}})},className:"jsx-bca62cd75c72199c pointer mr2"}),(0,r.jsx)("div",{style:{maxWidth:"".concat(260,"px"),overflowX:"hidden",textOverflow:"ellipsis"},className:"jsx-bca62cd75c72199c",children:e})]}),(0,r.jsx)("button",{style:{color:m===e?"gray":"white",backgroundColor:"white",border:"none"},onClick:function(){return o({type:"setDataOperations",id:t,operations:{select:{columns:[e]}}})},className:"jsx-bca62cd75c72199c pointer pa0 only-button",children:"only"})]},e)})):(0,r.jsx)("div",{className:"jsx-bca62cd75c72199c gray",children:"No table selected"})}),(0,r.jsx)(be(),{id:"bca62cd75c72199c",children:".only-button.jsx-bca62cd75c72199c:hover{color:black!important}"})]})},dt=(0,B.$j)((function(e,t){var n=e.notebook,r=t.id;return{data:(0,c.DY)(n.model,r).data,safe:n.safe}}),(function(e){return{dispatch:e}}))((function(e){var t=e.id,n=e.data,o=e.dispatch,i=e.safe,a=n.operations.select.columns;return(0,r.jsxs)(Q.v2,{children:[(0,r.jsxs)(Q.j2,{className:"pa2 ba ".concat(i?"b--silver":"b--light-gray"," fw6 f7 pointer flex items-center bg-white").concat(i?" moon-gray":a&&a.length>0?" blue":""),disabled:i,style:{marginLeft:"-1px"},children:[(0,r.jsx)(Ae,{className:"mr1"}),"Columns",a&&a.length>0&&(0,r.jsx)("span",{className:"fw4 ml1",children:a.length})]}),(0,r.jsx)(ut,{id:t,data:n,dispatch:o})]})})),ft=n(90793),pt=n(76522),mt=n(3764),ht=n(602);function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var yt=function(e){var t=e.id,n=e.source,o=e.isSource,i=e.useDataConnectors,a=e.team,s=e.dispatch,c=e.mode,l=(0,ft.kR)().isExpanded,u=bt((0,ht.h_)(i&&l?"".concat(a?"/team/".concat(a.id):"/user","/data-connectors?detail=false"):null),1)[0],f=(0,d.useState)([]),p=f[0],m=f[1],h=!!n.type&&("cell"===n.type?!p.find((function(e){return e.name===n.name})):!(null===u||void 0===u?void 0:u.find((function(e){return e.name===n.name}))));return(0,d.useEffect)((function(){l&&new rt(t,c).run(s).then(m,(function(e){console.error(e)}))}),[t,c,s,l]),(0,r.jsx)(Pe.jI,{style:{width:"250px",marginLeft:"-8px",maxHeight:"400px"},children:(0,r.jsxs)(Pe.uf,{style:{padding:0,margin:0},children:[(0,r.jsx)("div",{className:"bb b--light-silver pa12",children:(0,r.jsx)(X.Z,{href:"/".concat(a?"team/@".concat(a.login,"/"):"","settings/databases"),children:(0,r.jsx)("a",{className:"no-underline",target:"_blank",children:(0,r.jsxs)("div",{className:"inline-flex items-center br2 ph2 pv1 pointer dark-gray fw5 ba b--light-silver",children:[(0,r.jsx)(K.Z,{className:"mr1"}),"Add database"]})})})}),(0,r.jsx)("div",{className:"bb b--light-silver pv12",children:(0,r.jsx)(gt,{databases:u?u.map((function(e){return{name:e.name,dialect:e.type}})):[],type:"table"===c?"DatabaseClient":"database",stale:h,isSource:o,source:n,mode:c})}),(0,r.jsx)("div",{className:"pv12",children:(0,r.jsx)(gt,{databases:p,type:"cell",stale:h,isSource:o,source:n,mode:c})})]})})},gt=function(e){var t=e.databases,n=e.type,o=e.stale,i=e.isSource,a=e.source,s=e.mode;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"gray f7 ph12",style:{marginBottom:"10px"},children:"cell"===n?"Database cells":"Databases"}),t.map((function(e,t){var o=e.name,a=e.dialect;return(0,r.jsx)(Pe.wt,{className:"cell"===n?"monospace":"",style:{padding:"2px 12px",margin:0},value:"table"===s?JSON.stringify({name:o,type:n}):JSON.stringify({name:o,type:n,dialect:a}),children:(0,r.jsxs)("div",{className:"inline-flex items-center justify-between w-100",children:[o,i({name:o,type:n})?(0,r.jsx)(Le.Z,{className:"ml2 near-black"}):null]})},t)})),o&&a.type===n?(0,r.jsx)(wt,{source:a}):t.length?null:(0,r.jsx)(jt,{})]})},xt=(0,B.$j)((function(e,t){var n=e.notebook,r=t.id;return{source:(0,c.DY)(n.model,r).data.source,useDataConnectors:(0,Y.cE)(n),team:(0,Y.p0)(n)?n.owner:void 0,mode:(0,c.DY)(n.model,r).mode,safe:n.safe}}),(function(e){return{dispatch:e}}))((function(e){var t=e.id,n=e.dispatch,o=e.source,i=e.useDataConnectors,a=e.team,s=e.onSelect,c=e.mode,l=e.safe,u=function(e){var t=e.name,n=e.type;return t===o.name&&n===o.type};return(0,r.jsxs)(Pe.vz,{"data-cy":"database-selector",value:JSON.stringify(o),className:"ba ".concat(l?"b--silver":"b--light-gray"," bg-white"),style:{maxWidth:"200px",borderRadius:"0.25rem ".concat("table"===c?"0 0":"0.25rem 0.25rem"," 0.25rem")},disabled:l,onChange:function(e){var r=JSON.parse(e);u(r)||(n({type:"setDataSource",id:t,source:r}),s&&s())},children:[(0,r.jsx)(Pe.Y4,{children:(0,r.jsxs)("div",{className:"inline-flex items-center justify-between w-100 ".concat(l?" moon-gray":""),children:[(0,r.jsxs)("div",{className:"flex items-center mr2",children:[(0,r.jsx)(mt.Z,{}),(0,r.jsx)("div",{className:"ml1",children:null!==o.name?o.name:"Select a database\u2026"})]}),(0,r.jsx)(Pe.r9,{className:"inline-flex items-center",style:{marginRight:"16px"},children:(0,r.jsx)(pt.Z,{})})]})}),(0,r.jsx)(yt,{id:t,source:o,isSource:u,useDataConnectors:i,team:a,dispatch:n,mode:c})]})})),jt=function(){return(0,r.jsx)("div",{className:"i gray ph12",children:"None available"})},wt=function(e){var t=e.source;return(0,r.jsx)(Pe.wt,{value:JSON.stringify(t),title:"This database option is no longer available.",disabled:!0,style:{cursor:"default",backgroundColor:"transparent"},children:(0,r.jsxs)("div",{className:"inline-flex items-center gray ph12",children:[t.name,(0,r.jsx)(J.Z,{className:"ml2"}),(0,r.jsx)(Le.Z,{className:"ml2 blue"})]})})};function kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ct=function(e){return(0,r.jsx)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){kt(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e,{children:(0,r.jsx)("path",{d:"M3.06752 3H12.9325C13.3564 3 13.588 3.49443 13.3166 3.82009L9 9V11.7929C9 11.9255 8.94732 12.0527 8.85355 12.1464L7.85355 13.1464C7.53857 13.4614 7 13.2383 7 12.7929V9L2.68341 3.82009C2.41202 3.49443 2.6436 3 3.06752 3Z",fill:"currentColor"})}))};function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function St(e){return function(e){if(Array.isArray(e))return Ot(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ot(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Nt=function(e){var t=e.id,n=e.dispatch,o=e.data,i=o.operations.filter,a=(0,d.useState)(),s=a[0],c=a[1],l=(0,d.useRef)(!1),u=(0,Re.uF)().isExpanded;return(0,d.useEffect)((function(){u&&!l.current&&(new st(t,o.source,o.operations.from.table).run(n).then((function(e){return c(e),l.current=!1})),l.current=!0)}),[u,t,o,n,l]),(0,r.jsx)(Q.YI,{className:"bg-white ba b--silver br2 shadow-4 outline-0 pa12",children:(0,r.jsxs)(Q.sd,{children:[(0,r.jsx)("div",{className:"gray f7 pb12",children:"Filter"}),i.map((function(e,i){return(0,r.jsx)(Lt,{id:t,data:o,dispatch:n,schema:s,index:i,filter:e},"".concat(e.type).concat(JSON.stringify(e.operands)))})),(0,r.jsx)(Lt,{id:t,data:o,dispatch:n,schema:s})]})})},Lt=function(e){var t=e.id,n=e.data,o=e.dispatch,i=e.schema,a=e.index,s=e.filter,c=function(e){var r=St(n.operations.filter);void 0!==a?r[a]=e:(r=St(r).concat([e]),p(void 0),v(void 0),g(void 0)),o({type:"setDataOperations",id:t,operations:{filter:r}})},l=function(e){g(e),void 0===f||void 0===h||(0,H.Ec)(h)||((0,H.nq)(h)&&"string"===typeof e?c({type:h,operands:[{type:"column",value:f}].concat(St((0,H.$d)(e,x)))}):c({type:h,operands:[{type:"column",value:f},{type:"primitive",value:e}]}))},u=(0,d.useState)(null===s||void 0===s?void 0:s.operands[0].value),f=u[0],p=u[1],m=(0,d.useState)(null===s||void 0===s?void 0:s.type),h=m[0],v=m[1],b=(0,d.useState)(2===(null===s||void 0===s?void 0:s.operands.length)?s.operands[1].value:null===s||void 0===s?void 0:s.operands.slice(1).map((function(e){return e.value})).join(",")),y=b[0],g=b[1],x=f&&i?i.get(f):void 0;return(0,r.jsxs)("div",{className:"flex mb2",children:[(0,r.jsx)(Et,{setColumn:function(e){p(e),v((0,H.xm)(null===i||void 0===i?void 0:i.get(e))[0]),g(void 0)},column:f,schema:i}),(0,r.jsx)(Rt,{type:h,setType:function(e){v(e),void 0!==f&&((0,H.Ec)(e)?c({type:e,operands:[{type:"column",value:f}]}):void 0!==y&&((0,H.nq)(e)&&"string"===typeof y?c({type:e,operands:[{type:"column",value:f}].concat(St((0,H.$d)(y,x)))}):c({type:e,operands:[{type:"column",value:f},{type:"primitive",value:y}]})))},columnSchema:x}),h&&!(0,H.Ec)(h)&&x&&("string"===x.type||"number"===x.type||"date"===x.type?(0,r.jsx)(Pt,{inputType:(0,H.nq)(h)?"string":x.type,value:y,setValue:l}):"boolean"===x.type?(0,r.jsx)(Mt,{value:y,setValue:l}):null),void 0!==a&&(0,r.jsx)("button",{className:"bg-transparent bn light-gray pointer",onClick:function(){var e=St(n.operations.filter);e.splice(a,1),o({type:"setDataOperations",id:t,operations:{filter:e}})},children:(0,r.jsx)(C.Z,{})})]})},Pt=function(e){var t=e.setValue,n=e.value,o=e.inputType,i=function(e){e!==n&&e.length>0&&t("number"===o?+e:e)},a=(0,d.useState)(n),s=a[0],c=a[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"date"===o?"datetime-local":o,value:s||"",onChange:function(e){return c(e.target.value)},onBlur:function(e){return i(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&i(e.currentTarget.value)},className:"jsx-5b87146e697cf4d4 "+"monospace fw6 b--solid ba br2 b--light-gray dark-gray ml2".concat("date"!==o?" mw5":"")}),(0,r.jsx)(be(),{id:"5b87146e697cf4d4",children:"input.jsx-5b87146e697cf4d4::-webkit-calendar-picker-indicator{display:none}"})]})},Mt=function(e){var t=e.value,n=e.setValue;return(0,r.jsxs)(Pe.vz,{onChange:function(e){return n("true"===e)},value:void 0!==t?t+"":"",className:"b--solid ba br2 b--light-gray ml2",children:[(0,r.jsxs)(Pe.Y4,{className:"flex items-center justify-between f6 fw6 dark-gray",children:[(0,r.jsx)("div",{children:!0===t?"True":!1===t?"False":(0,r.jsx)("span",{className:"light-gray",children:"Value"})}),(0,r.jsx)(Pe.r9,{className:"inline-flex items-center",style:{marginRight:"16px"},children:(0,r.jsx)(pt.Z,{})})]}),(0,r.jsx)(Pe.jI,{className:"absolute",style:{minWidth:"100px"},portal:!1,children:(0,r.jsx)(Pe.uf,{style:{padding:"12px 0",margin:0},children:["true","false"].map((function(e){return(0,r.jsxs)(Pe.wt,{value:e,className:"flex items-center justify-between ph12",children:["true"===e?"True":"False",e===t+""&&(0,r.jsx)(Le.Z,{className:"ml2"})]},e+"")}))})})]})},Et=function(e){var t=e.setColumn,n=e.column,o=e.schema;return(0,r.jsxs)(Pe.vz,{onChange:t,value:n||"",className:"b--solid ba br2 b--light-gray",children:[(0,r.jsxs)(Pe.Y4,{className:"flex items-center justify-between f6 fw6 dark-gray",children:[(0,r.jsx)("div",{style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis"},children:null!==n&&void 0!==n?n:(0,r.jsx)("span",{className:"light-gray",children:"Column"})}),(0,r.jsx)(Pe.r9,{className:"inline-flex items-center",style:{marginRight:"16px"},children:(0,r.jsx)(pt.Z,{})})]}),(0,r.jsx)(Pe.jI,{className:"absolute",style:{minWidth:"100px",maxHeight:"300px"},portal:!1,children:(0,r.jsx)(Pe.uf,{style:{padding:"12px 0",margin:0},children:o&&Array.from(o.keys()).map((function(e){return(0,r.jsxs)(Pe.wt,{value:e,className:"flex items-center justify-between ph12",children:[e,n===e&&(0,r.jsx)(Le.Z,{className:"ml2"})]},e)}))})})]})},Rt=function(e){var t,n,o=e.type,i=e.setType,a=e.columnSchema,s=(0,H.xm)(a);return(0,r.jsxs)(Pe.vz,{onChange:function(e){return i(e)},value:null!==o&&void 0!==o?o:"",disabled:0===s.length,className:"b--solid ba br2 b--light-gray ml2",children:[(0,r.jsxs)(Pe.Y4,{className:"flex items-center justify-between f6 fw6 dark-gray",children:[null!==(t=(0,H.a8)(o,null===a||void 0===a?void 0:a.type))&&void 0!==t?t:(0,r.jsx)("span",{className:"light-gray",children:a&&0===s.length?"No filters available":"Operator"}),(0,r.jsx)(Pe.r9,{className:"inline-flex items-center",style:{marginRight:"16px"},children:(0,r.jsx)(pt.Z,{})})]}),(0,r.jsx)(Pe.jI,{portal:!1,className:"absolute",children:(0,r.jsx)(Pe.uf,{style:{padding:"12px 0",margin:0},children:s.map((function(e){return(0,r.jsxs)(Pe.wt,{value:e,className:"flex items-center justify-between ph12",children:[null!==(n=(0,H.a8)(e,null===a||void 0===a?void 0:a.type))&&void 0!==n?n:(0,r.jsx)("span",{className:"light-gray",children:"Operator"}),o===e&&(0,r.jsx)(Le.Z,{className:"ml2"})]},e)}))})})]})},_t=(0,B.$j)((function(e,t){var n=e.notebook,r=t.id;return{data:(0,c.DY)(n.model,r).data,safe:n.safe}}),(function(e){return{dispatch:e}}))((function(e){var t=e.id,n=e.data,o=e.dispatch,i=e.safe,a=n.operations.filter.length;return(0,r.jsxs)(Q.v2,{children:[(0,r.jsxs)(Q.j2,{className:"pa2 ml2 ba ".concat(i?"b--silver":"b--light-gray"," fw6 f7 pointer flex items-center bg-white").concat(i?" moon-gray":a>0?" blue":""),style:{borderRadius:"0.25rem 0 0 0.25rem"},disabled:i,children:[(0,r.jsx)(Ct,{className:"mr1"}),"Filter",a>0&&(0,r.jsx)("span",{className:"fw4 ml1",children:a})]}),(0,r.jsx)(Nt,{id:t,data:n,dispatch:o})]})})),At=n(2461),Zt=n(88398),It=n(18776),Dt=n(918),Ut=n(19799),Vt=n(69935),Tt=n(95414),Ft=n(81416),Ht=n(74834),Bt=n(55917),zt=n(1504),qt=n(26599),Wt=n(84839),Yt=n(62841),$t={empty:{background:"rgba(211, 152, 23, .4)",rect:"rgb(211, 152, 23)",text:"#8D640D",stroke:"none"},unique:{background:"#E2E2E2",rect:"#E2E2E2",text:"#6E6E6E",stroke:"none"},default:{background:"rgba(123,146,209, .4)",rect:"rgba(123,146,209)",text:"#2B50B0",stroke:"#97BBF4"}};function Kt(e){var t=(0,Ut.WU)(".2p");return"100%"===t(e)&&1!==e?">99%":t(e)}function Gt(e){return(0,Ut.WU)(",")(e)}var Jt=function(e){var t=e.color,n=void 0===t?"var(--observable-mid-gray)":t,o=e.text,i=void 0===o?"Some values":o,a=e.backgroundColor,s=void 0===a?"#E2E2E2":a,c=e.height,l=void 0===c?30:c,u=e.width,d=void 0===u?160:u;return(0,r.jsx)("div",{className:"tc observable-mid-gray flex justify-center items-center fw4 sans-serif",style:{height:l,maxWidth:d,border:"1px solid ".concat(s),color:n,marginTop:"4px",borderRadius:"5px",paddingLeft:10,paddingRight:10,overflow:"hidden"},children:i.length>22?i.slice(0,22)+"\u2026":i})},Xt=function(e){var t,n,o=e.data,i=e.type,a=e.typeLabel,s=e.height,c=void 0===s?50:s,l=e.width,u=void 0===l?130:l,f=e.insetLeft,p=void 0===f?.5:f,m=e.insetRight,h=void 0===m?.5:m,v=e.numMissing,b=void 0===v?0:v,y=e.nRows,g=void 0===y?6:y,x=e.formatter,j=void 0===x?function(e){return String(e)}:x,w=(0,d.useState)(-1),k=w[0],C=w[1],O=1===o.length&&o[0].x1===o[0].x2,S=(0,d.useMemo)((function(){var e,t,n,r,i=b>0?u-15:u,a=o.map((function(e){return void 0===e.x1?0:e.x1})),s=null!==(n=(0,Zt.Z)(o,(function(e){return e.x1})))&&void 0!==n?n:0,l=null!==(r=(0,It.Z)(o,(function(e){return e.x2})))&&void 0!==r?r:1,d=(0,Dt.Z)().domain([s,l]).range([0,i]),f=(0,It.Z)([b||0,(0,It.Z)(o,(function(e){return e.count}))||0]),p=(0,Dt.Z)().domain([0,f]).range([c,0]),m=((null===(e=o[0])||void 0===e?void 0:e.x2)||0)-((null===(t=o[0])||void 0===t?void 0:t.x1)||0),h={x1:d.invert(u),x2:d.invert(u)+m,count:b};return{x1:a,xMin:s,xMax:l,xScale:d,yScale:p,missing:h,chartWidth:i}}),[o,u,c,b]),N=S.x1,L=S.xMin,P=S.xMax,M=S.xScale,E=S.yScale,R=S.missing,_=S.chartWidth,A=-1===k?null:k>=o.length?R:o[k],Z=-1===k?L:(null===A||void 0===A?void 0:A.x1)||0,I=-1===k?P:(null===A||void 0===A?void 0:A.x2)||0,D="date"===i?function(e){return e[1]>Vt.Z.offset(e[0],1)?(0,Yt.g0)("%Y"):e[1]>Tt.Z.offset(e[0],1)?(0,Yt.g0)("%b. %Y"):e[1]>Ft.Ox.offset(e[0],1)?(0,Yt.g0)("%b %d"):e[1]>Ht.Z.offset(e[0],1)?(0,Yt.g0)("%a %d"):e[1]>Bt.Z.offset(e[0],1)?(0,Yt.g0)("%I %p"):e[1]>zt.Z.offset(e[0],1)?(0,Yt.g0)("%I:%M"):e[1]>qt.Z.offset(e[0],1)?(0,Yt.g0)(":%S"):e[1]>Wt.Z.offset(e[0],1)?(0,Yt.g0)(".%L"):(0,Yt.g0)("%a %d")}([new Date(Z||0),new Date(I||0)]):function(e){for(var t=1,n=Math.abs(e[1])<1?"f":"s",r=(0,Ut.WU)(",.".concat(t).concat(n));r(e[0])===r(e[1])&&t<8;)t++,r=(0,Ut.WU)(",.".concat(t).concat(n));return r}([Z||0,I||0]);return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mid-gray fw4",style:{marginBottom:"5px"},children:-1===k?a:A&&(0,r.jsxs)(r.Fragment,{children:[Gt(A.count)," ",1===A.count?"row":"rows"," (".concat(Kt((A.count||0)/g),")")]})}),O&&(0,r.jsx)(Jt,{backgroundColor:void 0===o[0].x1?$t.empty.background:$t.default.background,color:void 0===o[0].x1?$t.empty.text:$t.default.text,height:c,text:void 0===o[0].x1?"all values: NULL/EMPTY":"all values: ".concat(j(o[0].x1))}),!O&&(0,r.jsxs)("svg",{style:{overflow:"visible"},height:c,width:u,children:[o.concat(0===R.count?[]:R).map((function(e,t){return(0,r.jsx)("rect",{x:M(e.x1),width:Math.max(0,M(e.x2)-M(e.x1)-p-h),height:0===e.count?0:(0,It.Z)([1,E(0)-E(e.count)]),y:0===e.count?E(0):(0,Zt.Z)([E(e.count),E(0)-1]),fill:t===o.length&&b>0?$t.empty.rect:$t.default.rect,fillOpacity:t===k||-1===k?1:.4},t)})),(0,r.jsx)("line",{y1:c+1,y2:c+1,x1:0,x2:_,strokeWidth:.5,stroke:"#d3d3d3"}),(0,r.jsx)("rect",{onPointerMove:function(e){var t=M.invert(e.nativeEvent.offsetX),n=(0,At.ml)(N.concat(R.count>0?P+1:[]),t)-1;C(n)},onPointerLeave:function(){C(-1)},width:u+30,height:c+20,fillOpacity:.1,fill:"white"}),(0,r.jsx)("text",{x:M((null===A||void 0===A?void 0:A.x1)||L)-2,y:c+14,textAnchor:A?"end":"middle",className:"fw4 tooltip-text",children:A===R?"NULL/EMPTY":D((null===A||void 0===A?void 0:A.x1)||L)}),(0,r.jsx)("text",{x:M((null===A||void 0===A?void 0:A.x2)||P),y:c+14,textAnchor:A?"start":"middle",className:"fw4 tooltip-text",children:A===R?"":D((null===A||void 0===A?void 0:A.x2)||P)}),-1!==k&&(0,r.jsx)("rect",{x:M(null===A||void 0===A?void 0:A.x1),width:M(null===A||void 0===A?void 0:A.x2)-M(null===A||void 0===A?void 0:A.x1)-p-h,height:2,fill:"black",y:c+1,pointerEvents:"none"}),b>0&&-1===k&&(0,r.jsx)("text",{className:"fw4",x:u+(M(null!==(t=o[o.length-1].x2)&&void 0!==t?t:0)-M(null!==(n=o[o.length-1].x1)&&void 0!==n?n:0))/2,y:c+14,fill:$t.empty.rect,textAnchor:"middle",children:"\u2300"})]}),(0,r.jsx)("style",{children:"\n        .tooltip-text {\n          pointer-events: none;\n          stroke: white;\n          stroke-width: 6;\n          paint-order: stroke;\n          fill: var( --mid-gray );\n        }\n      "})]})},Qt=n(33090);function en(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tn=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){en(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e,{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 4.75C13.6904 4.75 14.25 5.30964 14.25 6C14.25 6.69036 13.6904 7.25 13 7.25C12.3096 7.25 11.75 6.69036 11.75 6C11.75 5.30964 12.3096 4.75 13 4.75ZM15.75 6C15.75 4.48122 14.5188 3.25 13 3.25C11.4812 3.25 10.25 4.48122 10.25 6C10.25 7.51878 11.4812 8.75 13 8.75C14.5188 8.75 15.75 7.51878 15.75 6Z",fill:"currentColor"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.5 8L11.5 8V6L1.5 6C0.947715 6 0.5 6.44772 0.5 7C0.5 7.55228 0.947715 8 1.5 8Z",fill:"currentColor"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.17594 2.56653L8.67594 10.5665L10.324 9.43347L4.82403 1.43347C4.51114 0.978369 3.88856 0.863076 3.43345 1.17596C2.97835 1.48885 2.86306 2.11143 3.17594 2.56653Z",fill:"currentColor"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 10.75C10.6904 10.75 11.25 11.3096 11.25 12C11.25 12.6904 10.6904 13.25 10 13.25C9.30964 13.25 8.75 12.6904 8.75 12C8.75 11.3096 9.30964 10.75 10 10.75ZM12.75 12C12.75 10.4812 11.5188 9.25 10 9.25C8.48122 9.25 7.25 10.4812 7.25 12C7.25 13.5188 8.48122 14.75 10 14.75C11.5188 14.75 12.75 13.5188 12.75 12Z",fill:"currentColor"})]}))};function nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){nn(e,t,n[t])}))}return e}var on=function(e){var t=e.type,n=e.nodeDataValue,o=e.normalize,i=e.setNodeData,a=e.className,s=function(e){0===e.length?u(o(n)):i(nn({},t,parseInt(e)))},c=(0,d.useState)(o(n)),l=c[0],u=c[1];return(0,r.jsxs)("div",{className:"fw6 near-black".concat(a?" ".concat(a):""),style:{display:"grid",gridTemplateColumns:"1.25fr 2fr 1fr"},children:[(0,r.jsx)("div",{className:"flex items-center lh-copy",children:"to"===t?"To":"From"}),(0,r.jsxs)("div",{className:"flex items-center pr2",children:[(0,r.jsx)(Qt.E,{className:"flex items-center",checked:null!==n,onChange:function(){return i(nn({},t,l))}}),(0,r.jsx)("input",{type:"number",min:0,className:"monospace fw6 b--solid ba br2 b--light-gray ".concat(null===n?"gray":"dark-gray"),style:{width:"6rem"},value:l,disabled:null===n,onChange:function(e){return u(e.target.value)},onBlur:function(e){return s(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&s(e.currentTarget.value)}})]}),(0,r.jsx)(Qt.E,{label:"to"===t?"End":"Start",className:"flex items-center",checked:null===n,onChange:function(){return i(nn({},t,null))}})]})},an=(0,B.$j)((function(e,t){var n=e.notebook,r=t.id;return{data:(0,c.DY)(n.model,r).data}}),(function(e){return{dispatch:e}}))((function(e){var t,n,o=e.id,i=e.data,a=e.dispatch,s=function(e){a({type:"setDataOperations",id:o,operations:{slice:rn({},c,e)}})},c=i.operations.slice;return(0,r.jsxs)(Q.v2,{children:[(0,r.jsxs)(Q.j2,{className:"pa2 ba b--light-gray fw6 f7 pointer flex items-center bg-white".concat(null!==c.from||null!==c.to?" blue":""),style:{borderRadius:"0 0.25rem 0.25rem 0",marginLeft:"-1px"},children:[(0,r.jsx)(tn,{className:"mr1"}),"Slice",(null!==c.from||null!==c.to)&&(0,r.jsxs)("span",{className:"fw4 ml1",children:["[",null!==(t=c.from)&&void 0!==t?t:0,", ",null!==(n=c.to)&&void 0!==n?n:"End","]"]})]}),(0,r.jsx)(Q.YI,{className:"bg-white ba b--silver br2 shadow-4 outline-0 pa12 overflow-auto",children:(0,r.jsxs)(Q.sd,{children:[(0,r.jsx)("div",{className:"gray f7 pb12",children:"Slice"}),(0,r.jsx)(on,{type:"from",nodeDataValue:c.from,normalize:function(e){return null===e?0:e},setNodeData:s,className:"mb3"},"from-".concat(c.from)),(0,r.jsx)(on,{type:"to",nodeDataValue:c.to,normalize:function(e){return null!==e?e:100},setNodeData:s},"to-".concat(c.to))]})})]})}));function sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cn=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){sn(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e,{children:[(0,r.jsx)("rect",{x:"2",y:"3",width:"3",height:"2",rx:"1",fill:"currentColor"}),(0,r.jsx)("rect",{x:"2",y:"12",width:"12",height:"2",rx:"1",fill:"currentColor"}),(0,r.jsx)("rect",{x:"2",y:"9",width:"9",height:"2",rx:"1",fill:"currentColor"}),(0,r.jsx)("rect",{x:"2",y:"6",width:"6",height:"2",rx:"1",fill:"currentColor"})]}))};function ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var un=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ln(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e,{children:[(0,r.jsx)("rect",{x:"2",y:"11",width:"3",height:"2",rx:"1",fill:"currentColor"}),(0,r.jsx)("rect",{x:"2",y:"2",width:"12",height:"2",rx:"1",fill:"currentColor"}),(0,r.jsx)("rect",{x:"2",y:"5",width:"9",height:"2",rx:"1",fill:"currentColor"}),(0,r.jsx)("rect",{x:"2",y:"8",width:"6",height:"2",rx:"1",fill:"currentColor"})]}))};function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fn(e){return function(e){if(Array.isArray(e))return dn(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var pn=function(e){var t=e.id,n=e.data,o=e.dispatch,i=e.index,a=e.selectedColumn,s=e.selectedDirection,c=function(e,r){if(void 0!==i){var a=fn(n.operations.sort);a[i]={column:e,direction:r},o({type:"setDataOperations",id:t,operations:{sort:a}})}else o({type:"setDataOperations",id:t,operations:{sort:fn(n.operations.sort).concat([{column:e,direction:r}])}}),f(void 0),h(void 0)},l=(0,d.useState)(a),u=l[0],f=l[1],p=(0,d.useState)(s),m=p[0],h=p[1];return(0,r.jsxs)("div",{className:"flex mb2",children:[(0,r.jsxs)(Pe.vz,{onChange:function(e){f(e),void 0!==m&&c(e,m)},value:u||"",className:"b--solid ba br2 b--light-gray",children:[(0,r.jsxs)(Pe.Y4,{className:"flex items-center justify-between f6 fw6 dark-gray",children:[(0,r.jsx)("div",{style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis"},children:void 0===u?(0,r.jsx)("span",{className:"light-gray",children:"Column"}):u}),(0,r.jsx)(Pe.r9,{className:"inline-flex items-center",style:{marginRight:"16px"},children:(0,r.jsx)(pt.Z,{})})]}),(0,r.jsx)(mn,{id:t,data:n,dispatch:o,selectedColumn:u})]}),(0,r.jsxs)(Pe.vz,{onChange:function(e){h(e),void 0!==u&&c(u,e)},value:m||"",className:"b--solid ba br2 b--light-gray ml2",children:[(0,r.jsxs)(Pe.Y4,{className:"flex items-center justify-between f6 fw6 dark-gray",children:[void 0===m?(0,r.jsx)("span",{className:"light-gray",children:"Direction"}):"asc"===m?(0,r.jsxs)("div",{className:"inline-flex items-center",children:[(0,r.jsx)(cn,{className:"mr1"}),"Ascending"]}):(0,r.jsxs)("div",{className:"inline-flex items-center",children:[(0,r.jsx)(un,{className:"mr1"}),"Descending"]}),(0,r.jsx)(Pe.r9,{className:"inline-flex items-center",style:{marginRight:"16px"},children:(0,r.jsx)(pt.Z,{})})]}),(0,r.jsx)(Pe.jI,{portal:!1,className:"absolute",children:(0,r.jsx)(Pe.uf,{style:{padding:"12px 0",margin:0},children:["desc","asc"].map((function(e,t){return(0,r.jsxs)(Pe.wt,{value:e,className:"flex items-center justify-between ph12",style:1===t?{marginBottom:0}:{},children:["asc"===e?(0,r.jsxs)("div",{className:"inline-flex items-center",children:[(0,r.jsx)(cn,{className:"mr1"}),"Ascending"]}):(0,r.jsxs)("div",{className:"inline-flex items-center",children:[(0,r.jsx)(un,{className:"mr1"}),"Descending"]}),m===e&&(0,r.jsx)(Le.Z,{className:"ml2"})]},e)}))})})]}),void 0!==i&&(0,r.jsx)("button",{disabled:void 0===u,className:"bg-transparent bn light-gray pointer",onClick:function(){var e=fn(n.operations.sort);e.splice(i,1),o({type:"setDataOperations",id:t,operations:{sort:e}})},children:(0,r.jsx)(C.Z,{})})]},u)},mn=function(e){var t=e.id,n=e.data,o=e.dispatch,i=e.selectedColumn,a=(0,ft.kR)().isExpanded,s=(0,d.useState)([]),c=s[0],l=s[1],u=(0,d.useCallback)((function(e){return n.operations.sort.some((function(t){return t.column===e}))}),[n.operations.sort]);return(0,d.useEffect)((function(){a&&new st(t,n.source,n.operations.from.table).run(o).then((function(e){return l(Array.from(e.keys()))}))}),[a,t,n,o]),(0,r.jsx)(Pe.jI,{className:"absolute",style:{minWidth:"100px",maxHeight:"300px"},portal:!1,children:(0,r.jsx)(Pe.uf,{style:{padding:"12px 0",margin:0},children:c.map((function(e){return(0,r.jsxs)(Pe.wt,{value:e,disabled:u(e),className:"flex items-center justify-between ph12".concat(u(e)&&i!==e?" light-gray":""),children:[e,i===e&&(0,r.jsx)(Le.Z,{className:"ml2"})]},e)}))})})},hn=(0,B.$j)((function(e,t){var n=e.notebook,r=t.id;return{data:(0,c.DY)(n.model,r).data,safe:n.safe}}),(function(e){return{dispatch:e}}))((function(e){var t=e.id,n=e.data,o=e.dispatch,i=e.safe,a=n.operations.sort;return(0,r.jsxs)(Q.v2,{children:[(0,r.jsxs)(Q.j2,{className:"pa2 ba ".concat(i?"b--silver":"b--light-gray"," fw6 f7 pointer flex items-center bg-white").concat(i?" moon-gray":a.length>0?" blue":""),disabled:i,style:{marginLeft:"-1px"},children:[(0,r.jsx)(cn,{className:"mr1"}),"Sort",a.length>0&&(0,r.jsx)("span",{className:"fw4 ml1",children:a.length})]}),(0,r.jsx)(Q.YI,{className:"bg-white ba b--silver br2 shadow-4 outline-0 pa12",children:(0,r.jsxs)(Q.sd,{children:[(0,r.jsx)("div",{className:"gray f7 pb12",children:"Sort"}),a.map((function(e,i){var a=e.column,s=e.direction;return(0,r.jsx)(pn,{index:i,id:t,data:n,dispatch:o,selectedColumn:a,selectedDirection:s},a)})),(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)(pn,{id:t,data:n,dispatch:o})})]})})]})})),vn=n(72255),bn=n(40477),yn=n(98837);function gn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){gn(e,t,n[t])}))}return e}var jn=function(e){var t,n,o,i=e.data,a=e.height,s=void 0===a?50:a,c=e.isUnique,l=void 0!==c&&c,u=e.numCategories,f=e.width,p=void 0===f?130:f,m=e.type,h=e.typeLabel,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rect";return"NULL/EMPTY"===e?$t.empty[t]:e.includes("unique value")?$t.unique[t]:$t.default[t]},b=(0,d.useState)(-1),y=b[0],g=b[1],x=(0,d.useMemo)((function(){var e=i.map((function(e){return e.x1})),t=(0,Dt.Z)().domain([0,1]).range([0,p]),n=(0,vn.Z)(i,(function(e){return e.count})),r=i.map((function(e){return xn({width:t(e.x2-e.x1)},e)})),o=r.findIndex((function(e){return"NULL/EMPTY"===e.label})),a=r.findIndex((function(e){var t;return null===(t=e.label)||void 0===t?void 0:t.includes("unique value")})),s=r.filter((function(e,t){return t!==o&&t!==a})),c=(0,bn.Z)(yn.Z).right(s.map((function(e){return e.width})),2),l=s.slice(0,c);return c<s.length-1&&l.push(s.slice(c,s.length).reduce((function(e,t){return{label:"small display",x1:0,x2:0,count:e.count+t.count,width:e.width+t.width}}))),a>=0&&l.push(r[a]),o>=0&&l.push(r[o]),{x1:e,xScale:t,total:n,allScaled:r,displayData:l}}),[i,p]),j=x.x1,w=x.xScale,k=x.total,C=x.allScaled,O=x.displayData,S=-1===y?null:C[y];return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mid-gray fw4",style:{marginBottom:"5px",maxWidth:"".concat(p,"px")},children:-1===y?"string"!==m?h:"".concat(h," (").concat(Gt(u)," ").concat(u>1?"categories":"category",")"):S&&(0,r.jsxs)(r.Fragment,{children:[Gt(S.count)," ",1===S.count?"row":"rows"," (".concat(Kt((S.count||k)/k),")")]})}),(l||1===u)&&(0,r.jsx)(Jt,{height:s,backgroundColor:"NULL/EMPTY"===i[0].label?$t.empty.background:(null===(t=i[0].label)||void 0===t?void 0:t.includes("unique value"))?$t.unique.background:$t.default.background,color:(null===(n=i[0].label)||void 0===n?void 0:n.includes("unique value"))?$t.unique.text:"NULL/EMPTY"===i[0].label?$t.empty.text:$t.default.text,text:(null===(o=i[0].label)||void 0===o?void 0:o.includes("unique value"))?i[0].label:"NULL/EMPTY"===i[0].label?"all values: ".concat(i[0].label):'all values: "'.concat(i[0].label,'"')}),!l&&u>1&&(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsxs)("div",{style:{width:p,height:s,display:"flex",borderRadius:"5px",overflow:"hidden"},children:[O.map((function(e){var t,n;return(0,r.jsx)("div",{className:"flex items-center fw4 sans-serif",style:xn({},"small display"===e.label&&{background:"repeating-linear-gradient(\n                        to right,\n                        ".concat($t.default.rect," 0px,\n                        ").concat($t.default.rect," 1px,\n                        ").concat($t.default.stroke," 1px,\n                        ").concat($t.default.stroke," 2px\n                      )")},{width:e.width,height:s,borderRight:"1px solid ".concat(v(e.label,"stroke")),backgroundColor:v(e.label,"rect"),opacity:-1===y||(null===S||void 0===S?void 0:S.label)===e.label&&(null===S||void 0===S?void 0:S.width)>=1?1:.4,textAlign:"center"}),children:e.count/k>.25&&"small display"!==e.label&&(0,r.jsxs)("span",{style:{overflow:"hidden",width:"100%",boxSizing:"border-box",padding:"0px 3px 0px 3px",color:(null===(t=e.label)||void 0===t?void 0:t.includes("unique value"))?$t.unique.text:(e.label,"white")},children:[Kt(e.count/k)," ",e.count/k>.8?(null===(n=e.label)||void 0===n?void 0:n.includes("unique value"))?"unique":e.label:""]})},e.label)})),(null===S||void 0===S?void 0:S.width)<2&&(0,r.jsx)("div",{style:{width:p*((null===S||void 0===S?void 0:S.x1)||0),height:s,position:"absolute",borderRight:"1px solid ".concat($t.default.rect)}})]}),(0,r.jsx)("div",{onPointerMove:function(e){var t=e.nativeEvent.offsetX<5?1:e.nativeEvent.offsetX-5,n=w.invert(t),r=(0,At.Nw)(j,n)-1;g(r)},onPointerLeave:function(){g(-1)},style:{position:"absolute",top:"0px",left:"-".concat(5,"px"),width:"".concat(p+10,"px"),height:s+20,backgroundColor:"rgba(255,255,255, .01)"}}),S&&(0,r.jsx)("div",{className:"mid-gray fw4",style:{pointerEvents:"none",position:"absolute",height:"15px",backgroundColor:"white"},children:S.label})]})]})},wn=n(53261);function kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){kn(e,t,n[t])}))}return e}var On=function(e){var t=e.id,n=e.dispatch,o=e.data,i=function(e){return e===o.operations.from.table},a=(0,ft.kR)().isExpanded,s=(0,d.useState)([]),c=s[0],l=s[1];return(0,d.useEffect)((function(){a&&new at(t,o.source).run(n).then((function(e){return l(e.sort((function(e,t){var n=e.name,r=t.name;return n<r?-1:n>r?1:0})))}),(function(e){console.error(e)}))}),[t,n,a,o]),(0,r.jsx)(Pe.jI,{style:{minWidth:"250px",marginLeft:"-8px",maxHeight:"400px"},children:(0,r.jsx)(Pe.uf,{style:{padding:0,margin:0},children:(0,r.jsxs)("div",{className:"pv12",children:[(0,r.jsx)("div",{className:"gray f7 ph12 pb12",children:"Tables"}),o.source.name?c.map((function(e){var t=e.name;return(0,r.jsx)(Pe.wt,{style:{padding:"2px 12px",margin:0},value:t,children:(0,r.jsxs)("div",{className:"flex items-center justify-between w-100",children:[t,i(t)?(0,r.jsx)(Le.Z,{className:"ml2 near-black"}):null]})},t)})):(0,r.jsx)("div",{className:"ph12 gray",children:"No database selected"})]})})})},Sn=(0,B.$j)((function(e,t){var n=e.notebook,r=t.id;return{data:(0,c.DY)(n.model,r).data,safe:n.safe}}),(function(e){return{dispatch:e}}))((function(e){var t=e.data,n=e.id,o=e.dispatch,i=e.safe,a=t.operations.from.table;return(0,r.jsxs)(Pe.vz,{value:a||"",className:"ba ".concat(i?"b--silver moon-gray":"b--light-gray"," bg-white"),style:{maxWidth:"180px",borderRadius:"0 0.25rem 0.25rem 0",marginLeft:"-1px",height:"34px"},disabled:i,onChange:function(e){o({type:"setDataOperations",id:n,operations:Cn({},wn.f3.operations,{from:{table:e,mimeType:null},slice:{from:0,to:100}})})},children:[(0,r.jsx)(Pe.Y4,{children:(0,r.jsxs)("div",{className:"inline-flex items-center justify-between w-100",children:[(0,r.jsx)("span",{className:"mr2 truncate",children:a||"Select a table\u2026"}),(0,r.jsx)(Pe.r9,{className:"inline-flex items-center",style:{marginRight:"16px"},children:(0,r.jsx)(pt.Z,{})})]})}),(0,r.jsx)(On,{id:n,dispatch:o,data:t})]})})),Nn=n(19671),Ln=n(89289),Pn=n(9089),Mn=n(29256);function En(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||An(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(e){return function(e){if(Array.isArray(e))return En(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||An(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function An(e,t){if(e){if("string"===typeof e)return En(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?En(e,t):void 0}}function Zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function In(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Dn=function(e){var t=e.column,n=e.type,o=e.summary,i=e.formatter,a=e.results,s="bigint"===(null===n||void 0===n?void 0:n.databaseBaseType)?"number":"date"===(null===n||void 0===n?void 0:n.databaseBaseType)?"date":(null===n||void 0===n?void 0:n.type)?n.type:null===o||void 0===o?void 0:o.type,c=(0,d.useState)(1),l=c[0],u=c[1],f="".concat((null===n||void 0===n?void 0:n.databaseBaseType)||s||(0,H.O3)(a,t)||"").concat((null===n||void 0===n?void 0:n.isArray)?"[]":""),p=o&&o.nRows>1;return(0,r.jsxs)("th",{className:"header-content",onPointerEnter:function(){return u(9999)},onPointerLeave:function(){return u(1)},style:{minWidth:p?"130px":"auto",padding:p?"5px 20px 16px 20px":"var(--spacing-extra-small)",height:p?"70px":"auto",zIndex:l},children:[(0,r.jsx)("div",{children:t}),!p||"string"!==s&&"object"!==s&&"buffer"!==s&&"boolean"!==s?!p||"number"!==s&&"integer"!==s&&"date"!==s?null:(0,r.jsx)(Xt,{type:s,typeLabel:f,data:o.data,height:30,width:130,numMissing:o.numMissing,nRows:o.nRows,formatter:i}):(0,r.jsx)(jn,{data:o.data,isUnique:o.isUnique,height:30,width:130,numCategories:o.numCategories,type:s,typeLabel:f}),!p&&(0,r.jsx)("div",{className:"mid-gray fw4",children:f}),(0,r.jsx)("style",{children:"\n        th.header-content{\n          border: 1px solid var(--light-gray);\n          text-align: left;\n          vertical-align: top;\n          position: relative;\n          overflow: visible;\n        }\n      "})]})},Un=d.memo((function(e){var t=e.databaseResult,n=e.page,o=e.perPage,i=e.currentUser,a=e.dispatch,s=e.id,c=e.showCharts,l=e.offset,u=t.results,d=t.schema,f=d.size>0?Array.from(d.keys()):(0,H.XP)(u),p=(0,H.QI)(d,u,f),m=(0,H.VQ)(d,u,f),h=(0,_.U)(i,"table_mode")&&c?function(e,t,n){var r=Object.create(null);return n.map((function(n){var o,i,a,s,c,l=(null===(o=e.get(n))||void 0===o?void 0:o.isArray)?"array":"bigint"===(null===(i=e.get(n))||void 0===i?void 0:i.databaseBaseType)?"number":"date"===(null===(a=e.get(n))||void 0===a?void 0:a.databaseBaseType)?"date":(null===(s=e.get(n))||void 0===s?void 0:s.type)?null===(c=e.get(n))||void 0===c?void 0:c.type:(0,H.O3)(t,n);switch(l){case"date":case"integer":case"number":var u=0,d=t.map((function(e){var t=e[n];return null!==t&&"NULL"!==t&&""!==t||u++,e[n]})),f="date"===l?10:15,p=d.length<f?d.length:f,m=(0,Ln.Z)();if("date"===l){var h=Rn((0,Pn.Z)(d),2),v=h[0],b=h[1],y=(0,Mn.jo)(v,b,p);if(null===y||void 0===y?void 0:y.range){var g=y.floor(v),x=y.ceil(new Date(+b+1)),j=y.range(g,x).map((function(e){return+e}));m.thresholds(j).domain([+g,+x])}else m.thresholds(p)}else m.thresholds(p);var w=m(d).map((function(e){return{x1:e.x0,x2:e.x1,count:e.length}}));r[n]={data:w,min:(0,Zt.Z)(t,(function(e){return e[n]})),max:w[w.length-1].x2,numMissing:u,type:l,nRows:t.length};break;default:for(var k,C,O=t.map((function(e){return e[n]})),S=new Set,N=new Map,L=new Set,P=0,M=0;M<O.length;++M)"NULL/EMPTY"!==(k=null===O[M]||"NULL"===O[M]||""===O[M]?"NULL/EMPTY":"buffer"===l||"object"===l?l:String(O[M]))?S.has(k)?void 0===(C=N.get(k))?(L.delete(k),N.set(k,2)):N.set(k,C+1):(S.add(k),L.add(k)):P++;var E=_n(N).sort((function(e,t){return t[1]===e[1]?t[0]-e[0]:t[1]-e[1]}));L.size>0&&E.push(["".concat(L.size," unique value").concat(1===L.size?"":"s"),L.size]),P>0&&E.push(["NULL/EMPTY",P]);var R=0,_=E.map((function(e){return{label:e[0],count:e[1],x1:R/t.length,x2:(R+=e[1])/t.length}})),A=0===P?S.size:S.size+1;r[n]={data:_,numCategories:A,isUnique:L.size===t.length,type:l,nRows:t.length}}})),r}(d,u,f):{},v=u.slice(n*o,n*o+o);return(0,r.jsxs)("div",{className:"jsx-59fae75a7daee50d container",children:[(0,r.jsxs)("table",{className:"jsx-59fae75a7daee50d",children:[(0,r.jsx)("thead",{className:"jsx-59fae75a7daee50d",children:(0,r.jsx)("tr",{"data-cy":"sql-table-header-row",className:"jsx-59fae75a7daee50d",children:u.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("th",{className:"jsx-59fae75a7daee50d v-top pt2",children:(0,_.U)(i,"table_mode")&&u.length>1&&(0,r.jsx)("button",{onClick:function(){a({type:"setChartVisibility",id:s,value:!c})},className:"jsx-59fae75a7daee50d bg-near-white pointer bn p1",children:c?(0,r.jsx)(Ce.Z,{}):(0,r.jsx)(Ne.Z,{})})}),f.map((function(e,t){var n=d.get(e);return(0,r.jsx)(Dn,{column:e,type:n,summary:h[e],formatter:p[e],results:u},t)}))]}):d.size>0?Array.from(d).map((function(e,t){var n=In(e,2),o=n[0],i=n[1];return(0,r.jsx)(Dn,{column:o,type:i,results:u},t)})):(0,r.jsx)("div",{className:"jsx-59fae75a7daee50d pa2 gray i",children:"No results"})})}),(0,r.jsx)("tbody",{className:"jsx-59fae75a7daee50d",children:v.map((function(e,t){return(0,r.jsxs)("tr",{"data-cy":"sql-table-result-row",className:"jsx-59fae75a7daee50d",children:[(0,r.jsx)("td",{style:{padding:"0 4px"},className:"jsx-59fae75a7daee50d",children:(0,r.jsx)("div",{className:"jsx-59fae75a7daee50d flex justify-center",children:(null!==l&&void 0!==l?l:0)+n*o+t})}),f.map((function(t,n){var o=e[t];return(0,r.jsx)("td",{style:m[t],className:"jsx-59fae75a7daee50d "+"".concat(null===o||""===o?"light-gray fw4":""),children:null===o?"NULL":""===o?"EMPTY":p[t](o)},n)}))]},t)}))})]}),(0,r.jsx)(be(),{id:"59fae75a7daee50d",children:"table.jsx-59fae75a7daee50d{background-color:var(--white);\nborder-collapse:collapse;\nmargin:-1px;\nwhite-space:nowrap;\noverflow:visible;\nfont:13px var(--sans-serif);\nline-height:1.2}\ntd.jsx-59fae75a7daee50d{border:1px solid var(--light-gray);\npadding:4px 6px;\noverflow:hidden;\ntext-overflow:ellipsis;\nheight:16px;\ncolor:#444}\ntd.jsx-59fae75a7daee50d:nth-child(1){color:var(--moon-gray)}\n.container.jsx-59fae75a7daee50d{background-color:var(--white);\nborder:1px solid var(--light-gray);\nborder-radius:0.25rem;\noverflow-x:scroll;\noverflow-y:hidden}"})]})})),Vn=(0,B.$j)((function(e,t){var n=e.notebook,r=e.currentUser,o=t.node;return{focused:n.focusId===o.id,hovered:n.hoverId===o.id,databaseResult:n.safe?void 0:n.databaseResults.get(o.id),currentUser:r,notebook:n,safe:n.safe}}),(function(e){return{dispatch:e}}))((function(e){var t=e.node,n=e.focused,i=e.hovered,a=e.editors,s=e.databaseResult,c=e.dispatch,l=e.currentUser,u=e.notebook,f=e.editorState,p=e.hasOpenEditor,m=e.safe,h=t.id,v=t.mode,b=t.data,y=n||i,x=s&&"results"in s,j=s&&"error"in s,w=f.field(o.A),k="bg-white ba b--light-gray pa1 pointer flex items-center",C=n?"var(--observable-focus-dark-blue)":"var(--gray)",O=(0,d.useState)(0),S=O[0],N=O[1],L=(0,d.useState)(10),P=L[0],M=L[1];return(0,d.useEffect)((function(){return N(0)}),[t,P]),(0,d.useEffect)((function(){s&&"results"in s&&S*P>=s.results.length&&N(0)}),[s,P,S]),(0,r.jsxs)("div",{className:"jsx-478b84009fa63529 "+"pea cell".concat((null===s||void 0===s?void 0:s.pending)?" cell-pending":""),children:[(0,r.jsxs)("div",{style:{backgroundColor:n?"var(--observable-focus-lightest-blue)":"var(--near-white)",borderRadius:"".concat(y?0:"0.25rem"," 0.25rem ").concat(p?0:"0.25rem"," ").concat(y||p?0:"0.25rem"),borderBottom:p&&"sql"===v?"1px solid white":"none",margin:"0 -14px",padding:"6px"},className:"jsx-478b84009fa63529",children:[(0,r.jsxs)("div",{className:"jsx-478b84009fa63529 flex flex-wrap justify-between items-center",children:[(0,r.jsxs)("div",{className:"jsx-478b84009fa63529 flex items-center",children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ee.Q,{node:t,dispatch:c,source:"nodeEditor",autoWidth:!0,style:{paddingTop:"5.5px",paddingBottom:"5.5px",border:"1px solid var(--light-gray)",minWidth:"80px",boxShadow:"none"},onRename:n?function(){return a.refocus()}:void 0,onFocus:n?void 0:function(e){c({type:"focus",id:h}),e.target.focus()}}),(0,r.jsx)("span",{style:{color:C,height:18},className:"jsx-478b84009fa63529 ph2",children:"="})]}),(0,r.jsx)(xt,{id:h,onSelect:n?function(){return a.refocus()}:void 0}),"table"===t.mode&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Sn,{id:h}),(0,r.jsx)(_t,{id:h}),(0,r.jsx)(dt,{id:h}),(0,r.jsx)(hn,{id:h}),(0,r.jsx)(an,{id:h})]})]}),(0,r.jsxs)("div",{className:"jsx-478b84009fa63529 flex items-center",children:[x&&(0,r.jsx)("div",{style:{color:C},className:"jsx-478b84009fa63529 f7 mr2",children:"".concat(s.results.length," rows")}),(0,r.jsxs)("button",{disabled:m,onClick:function(){return a.applyCommand(w,(0,Me.z)("click"))},className:"jsx-478b84009fa63529 "+"bg-white ba ".concat(m?"b--silver":"b--light-gray"," br2 pa2 f6 fw5 ").concat(m?"moon-gray":"dark-gray"," flex items-center pointer"),children:[(0,r.jsx)(g.Z,{className:"mr1"}),"Run"]})]})]}),x?(0,r.jsx)("div",{style:{marginTop:"6px"},className:"jsx-478b84009fa63529",children:(0,r.jsx)(Un,{databaseResult:s,page:S,perPage:P,mode:v,currentUser:l,dispatch:c,id:t.id,showCharts:null!==t.data&&(void 0===t.data.ui||t.data.ui.showCharts),offset:b&&"operations"in b?b.operations.slice.from:null})}):j?(0,r.jsx)("div",{style:{marginTop:"6px",wordBreak:"break-all"},className:"jsx-478b84009fa63529 observable-red monospace pv1 ph2 ba b--light-gray br2 bg-white",children:s.error}):null,(x||j)&&(0,r.jsxs)("div",{style:{marginTop:"6px"},className:"jsx-478b84009fa63529 flex justify-between f7",children:[(0,r.jsxs)(Pe.vz,{"data-cy":"per-page-selector",onChange:function(e){var t=parseInt(e);(0,Nn.MR)((0,Nn.ym)({type:"notebook:cells:manage:setPerPage",data:{cellIds:[h],perPage:t},currentUser:l,notebook:u,eventVersion:1})),M(t)},value:P.toString(),className:"f7 flex items-center",style:{height:"auto"},children:[(0,r.jsxs)(Pe.Y4,{className:"flex items-center bg-transparent bn fw4",style:{color:C},children:["".concat(P," per page"),(0,r.jsx)(ke.Z,{})]}),(0,r.jsx)(Pe.jI,{style:{width:"120px"},children:(0,r.jsxs)(Pe.uf,{style:{padding:"12px 0",margin:0},children:[(0,r.jsx)("div",{style:{padding:"8px",paddingTop:"0"},className:"jsx-478b84009fa63529 f7 dark-gray",children:"Rows per page"}),["3","5","10","25","50"].map((function(e){return(0,r.jsxs)(Pe.wt,{value:e,className:"flex items-center justify-between",style:{padding:"2px 12px",margin:0},children:[e,P===parseInt(e)&&(0,r.jsx)(Le.Z,{className:"ml2 near-black"})]},e)}))]})})]}),(0,r.jsxs)("div",{className:"jsx-478b84009fa63529 flex items-center",children:[x&&(0,r.jsx)("span",{style:{color:C},className:"jsx-478b84009fa63529 ph1",children:"page ".concat(S+1," of ").concat(s.results.length?Math.ceil(s.results.length/P):"1")}),(0,r.jsx)("button",{style:{borderRadius:"0.25rem 0 0 0.25rem"},disabled:0===S,onClick:function(){var e=S-1;(0,Nn.MR)((0,Nn.ym)({type:"notebook:cells:view:movePage",data:{cellIds:[h],oldPage:S,newPage:e},currentUser:l,notebook:u,eventVersion:1})),N(e)},className:"jsx-478b84009fa63529 "+"".concat(k).concat(0===S?" moon-gray":""),children:(0,r.jsx)(Se,{})}),(0,r.jsx)("button",{style:{borderRadius:"0 0.25rem 0.25rem 0",marginLeft:"-1px"},disabled:!x||(S+1)*P>s.results.length-1,onClick:function(){var e=S+1;(0,Nn.MR)((0,Nn.ym)({type:"notebook:cells:view:movePage",data:{cellIds:[h],oldPage:S,newPage:e},currentUser:l,notebook:u,eventVersion:1})),N(e)},className:"jsx-478b84009fa63529 "+"".concat(k).concat(!x||(S+1)*P>s.results.length-1?" moon-gray":""),children:(0,r.jsx)(le.Z,{})})]})]})]}),(0,r.jsx)(be(),{id:"478b84009fa63529",children:'.cell.jsx-478b84009fa63529:before{content:"";\nposition:absolute;\nleft:-14px;\ntop:0;\nbottom:1px;\nwidth:4px;\n-webkit-transition:background-color 250ms linear;\ntransition:background-color 250ms linear}\n.cell-pending.jsx-478b84009fa63529:before{background-color:hsl(217, 13%, 70%);\n-webkit-transition:none;\ntransition:none}\n.pageButton.jsx-478b84009fa63529{background-color:var(--white);\npadding:var(--spacing-extra-small)}'})]})})),Tn=function(e){var t,n=e.node,o=e.editorState,i=e.focused,a=e.selected,s=e.selectionFocused,c=e.editorOpen,l=e.workerHeight,u=e.editors,f=e.hovered,p=e.hasPrevious,m=e.hasNext,h=e.editorComponent,v=(0,B.I0)(),b=(0,d.useRef)(null),y=(0,d.useRef)(null),g=(0,d.useRef)(null),x=(0,d.useRef)(null),j=n.id,w=n.mode,k=(0,P.u2)(n),C=(o.field(A.ei).find((function(e){return e.jumpToError}))||{}).jumpToError;return(0,d.useEffect)((function(){var e=V(y.current,j,"editor",v),t=V(g.current,j,"comments",v),n=V(x.current,j,"table",v);return function(){e.disconnect(),t.disconnect(),n.disconnect()}}),[j,v]),(0,d.useEffect)((function(){s&&(0,Z.zT)(b.current)}),[s]),(0,r.jsxs)("div",{ref:b,className:"relative node pen ".concat(f||i?"node-hover":""),"data-node-id":j,id:k||void 0,style:{marginTop:L.KI,marginBottom:L.KI,paddingTop:l},onMouseEnter:function(){return v({type:"hover",id:j})},children:[a||s?(0,r.jsx)("div",{className:"absolute br2 z-1",style:{top:1,left:-13,right:-13,bottom:1,boxShadow:a&&s?"0px 0px 0px 2px var(--lightest-blue), 0px 0px 0px 4px var(--faint-blue)":a?"0px 0px 0px 2px var(--washed-blue)":"0px 0px 0px 2px var(--lightest-blue)"}}):null,(0,r.jsx)("div",{ref:x,children:(0,H.Om)(w)&&(0,r.jsx)(Vn,{node:n,editors:u,editorState:o,hasOpenEditor:c&&"sql"===w})}),(0,r.jsxs)("div",{ref:y,className:"relative",children:[C?(0,r.jsx)(he,{dispatch:v,id:j}):"ImportDeclaration"===(null===(t=(0,P.Qc)(n).body)||void 0===t?void 0:t.type)?(0,r.jsx)(we,{id:j}):null,c&&(0,r.jsx)(h,{node:n,editorState:o,focused:i,hovered:f,selected:a||s,editors:u,hasPrevious:p,hasNext:m,hidden:"table"===w})]}),(0,r.jsx)("div",{ref:g,children:(0,r.jsx)(me,{nodeId:j})})]})},Fn=function(){return(0,r.jsx)("div",{className:"absolute w-100 bt b--blue",style:{marginTop:Math.floor(-L.KI/2)}})},Hn=n(95357);function Bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var qn=(0,B.$j)((function(e){var t=e.notebook;return{isCommentable:(0,z.H7)(t)}}),(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,n=e.commentCount,o=e.isCommentsOpen,i=e.node,a=e.isCommentable,s=e.className,c=void 0===s?"":s,l=zn(e,["dispatch","commentCount","isCommentsOpen","node","isCommentable","className"]);if(!a)return null;var u=o?"Hide comments":"Show ".concat((0,Y.YY)(n,"comment"));return(0,r.jsxs)("button",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Bn(e,t,n[t])}))}return e}({onClick:function(e){e.stopPropagation(),t({type:o?"hideComments":"showComments",nodeId:i.id,trigger:"click",source:"nodeGutterMenu"})},title:u,"aria-label":u,className:"flex items-center sans-serif f6 pointer pa0 hover-mid-gray moon-gray bg-transparent bn no-wrap ".concat(c)},l,{children:[(0,r.jsx)("span",{className:"pr1",children:n>=9?"9+":n}),(0,r.jsx)(Hn.Z,{})]}))})),Wn=n(952),Yn=n(12447);function $n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Kn(e,t,n[t])}))}return e}function Jn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Xn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return $n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Qn=function(e){var t=e.dispatch,n=e.mode,o=e.id;return(0,r.jsx)(r.Fragment,{children:Object.entries(wn.qz).filter((function(e){return"table"!==Xn(e,1)[0]})).map((function(e){var i=Xn(e,2),a=i[0],s=i[1],c=s.label,l=s.icon,u=n===a;return(0,r.jsxs)(Q.sN,{"aria-label":"editor-menu-".concat(c),className:u?"blue":"dark-gray hover-black",onSelect:function(){t({type:"setMode",id:o,source:"gutterMenu",trigger:"click",mode:a})},children:[(0,r.jsx)("span",{className:"mr1",children:(0,r.jsx)(l,{})}),c,u&&(0,r.jsx)(Le.Z,{className:"ml1"})]},a)}))})},er=(0,B.$j)((function(){return{}}),(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,n=e.node,o=e.mode,i=e.focused,a=e.selected,s=e.className,c=void 0===s?"":s,l=e.children,u=Jn(e,["dispatch","node","mode","focused","selected","className","children"]),d=n.id,f={styles:(0,r.jsx)(be(),{id:"45aa039bf753e81",dynamic:[i||a?"var(--observable-focus-light-blue)":"var(--light-silver)",i||a?"var(--observable-focus-dark-blue)":"var(--gray)",Yn.pp],children:"*.__jsx-style-dynamic-selector{background-color:".concat(i||a?"var(--observable-focus-light-blue)":"var(--light-silver)",";\ncolor:").concat(i||a?"var(--observable-focus-dark-blue)":"var(--gray)","}\n@media ").concat(Yn.pp," {*.__jsx-style-dynamic-selector{border-bottom-left-radius:var(--border-radius-2)}}")}),className:be().dynamic([["45aa039bf753e81",[i||a?"var(--observable-focus-light-blue)":"var(--light-silver)",i||a?"var(--observable-focus-dark-blue)":"var(--gray)",Yn.pp]]])},p=f.className,m=f.styles;return(0,r.jsxs)(Q.v2,{children:[(0,r.jsxs)(Q.j2,Gn({title:"Set mode",className:"bn pa0 hover-mid-gray pointer ".concat(p," ").concat(c)},u,{children:[l,m]})),(0,r.jsx)(Q.qy,{position:Q.Ly.right,children:(0,r.jsx)(Qn,{dispatch:t,id:d,mode:o})})]})})),tr=0,nr=null;function rr(){nr=requestAnimationFrame(rr),scrollBy(0,tr)}function or(e){(tr=Math.min(0,e-20)||Math.max(0,e-innerHeight+20))&&!nr?nr=requestAnimationFrame(rr):nr&&!tr&&(cancelAnimationFrame(nr),nr=null)}var ir=n(87099),ar=n(61107),sr=n(64804),cr=n(61777),lr=n(26825),ur=n(63231),dr=n(92946);function fr(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,o)}function pr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){fr(i,r,o,a,s,"next",e)}function s(e){fr(i,r,o,a,s,"throw",e)}a(void 0)}))}}function mr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vr(e,t,n){return t&&hr(e.prototype,t),n&&hr(e,n),e}function br(e){return(br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xr(e,t)}function gr(e,t){return!t||"object"!==jr(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xr(e,t){return(xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jr=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function wr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=br(e);if(t){var o=br(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return gr(this,n)}}var kr=function(e){yr(n,e);var t=wr(n);function n(e){var r;return mr(this,n),(r=t.call(this))._id=e,r}return vr(n,[{key:"process",value:function(e){var t=this;return pr(Ie().mark((function n(){var r;return Ie().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e({type:"request_download_type",node_id:t._id});case 2:return r=n.sent,n.abrupt("return",{type:Cr(r.type),typeAsView:Cr(r.typeAsView)});case 4:case"end":return n.stop()}}),n)})))()}}]),n}(qe.i);function Cr(e){return e?"blob"===e.type?{type:"blob",mime:e.mime+""}:{type:e.type+""}:void 0}var Or=function(e){yr(n,e);var t=wr(n);function n(e,r,o,i){var a;return mr(this,n),(a=t.call(this))._id=e,a._asView=r,a._type=o,a._format=i,a}return vr(n,[{key:"process",value:function(e){var t=this;return pr(Ie().mark((function n(){return Ie().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e({type:"request_download",node_id:t._id,as_view:t._asView,download_type:t._type,format:t._format});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()}}]),n}(qe.i);function Sr(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,o)}function Nr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Sr(i,r,o,a,s,"next",e)}function s(e){Sr(i,r,o,a,s,"throw",e)}a(void 0)}))}}function Lr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Lr(e,t,n[t])}))}return e}function Mr(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Er(e,t){for(t=t?t.nextElementSibling:e.firstElementChild;t&&!t.classList.contains("node");)t=t.nextElementSibling;return t||null}var Rr=function(e){var t=function(){a({type:u?"blur":"focus",id:M})},n=function(){a({type:"togglePin",id:M})},o=function(){a(F)},i=e.commentCount,a=e.dispatch,c=e.editorOpen,l=e.editable,u=e.focused,f=e.selected,p=e.hovered,m=e.isCommentingLocked,h=e.isCommentsOpen,v=e.isComposeOpen,b=e.node,g=e.deletable,x=e.commentable,j=e.canComment,w=e.safe,k=e.notebookSpecifier,O=e.className,S=void 0===O?"":O,N=e.children,L=Mr(e,["commentCount","dispatch","editorOpen","editable","focused","selected","hovered","isCommentingLocked","isCommentsOpen","isComposeOpen","node","deletable","commentable","canComment","safe","notebookSpecifier","className","children"]),M=b.id,E=b.pinned,R=b.mode,_=(0,P.u2)(b),A=(0,d.useRef)(null),Z=(0,d.useState)(!1),I=Z[0],D=Z[1],U=(0,d.useRef)(!1);function V(e,t,n){return T.apply(this,arguments)}function T(){return(T=Nr(Ie().mark((function e(t,n,r){return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ir.L,e.next=3,new Or(M,t,n,r).run(a);case 3:e.t1=e.sent,e.t2="".concat(_||"untitled").concat(r?".".concat(r):""),(0,e.t0)(e.t1,e.t2);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,d.useEffect)((function(){var e,t=function(t){!t.ctrlKey&&!t.button&&t.isPrimary&&l&&((e=t.target).setPointerCapture(t.pointerId),o.style.cursor="grabbing",c=void 0,s=!0,u=t.clientX,d=t.clientY)},n=function(t){if(s&&t.isPrimary){var n=t.clientX,r=t.clientY;if(void 0===c){if(n-u>20)return o.style.cursor="",e.releasePointerCapture(t.pointerId),e=void 0,void(c=!1);Math.abs(r-d)>20&&(c=!0,a({type:"dragStarted",id:M}),D(!0),U.current&&A.current&&A.current.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})))}if(c){for(var i,l=o.closest(".notebook");i=Er(l,i);){var f=i.getBoundingClientRect();if((f.top+f.bottom)/2>r)break}a({type:"dragged",id:i?+i.dataset.nodeId:null}),or(r)}}},r=function(t){t.isPrimary&&(e&&(e.releasePointerCapture(t.pointerId),e=void 0,o.style.cursor=""),c&&(a({type:"dragEnded"}),D(!1)),or(NaN),c=!1,s=!1)},o=A.current,i=navigator.maxTouchPoints||"ontouchstart"in o,s=!1,c=!1,u=NaN,d=NaN;return i&&o.addEventListener("touchmove",ar.P),o.addEventListener("pointerdown",t),o.addEventListener("pointermove",n),o.addEventListener("pointerup",r),o.addEventListener("pointercancel",r),o.addEventListener("lostpointercapture",r),function(){i&&o.removeEventListener("touchmove",ar.P),o.removeEventListener("pointerdown",t),o.removeEventListener("pointermove",n),o.removeEventListener("pointerup",r),o.removeEventListener("pointercancel",r),o.removeEventListener("lostpointercapture",r)}}),[M,a,l]);var F,H="";i?h?(H="Hide ".concat((0,Y.xC)(i,"comment")),F={type:"hideComments",nodeId:M,trigger:"click",source:"nodeGutterMenu"}):(H="Show ".concat((0,Y.YY)(i,"comment")),F={type:"showComments",nodeId:M,trigger:"click",source:"nodeGutterMenu"}):v?(H="Cancel comment",F={type:"commentComposeCancel",nodeId:M,content:"",trigger:"click",source:"nodeGutterMenu"}):j?(H="Add comment",F={type:"commentComposeOpen",nodeId:M,trigger:"click",source:"nodeGutterMenu"}):(H="Add comment",F={type:"showModal",modal:"login",modalProps:{loginReason:"comment"},trigger:"click",source:"comment"});var B=!w&&!(0,P.cS)(b),z=l?"Click for cell actions\nDrag to move cell":"Click to comment",q={styles:(0,r.jsx)(be(),{id:"4e243f6c85d1033f",dynamic:[(u||f)&&l?"var(--observable-focus-light-blue)":p&&l?"var(--light-silver)":"transparent",(u||f)&&l?"var(--observable-focus-dark-blue)":"var(--gray)",Yn.pp,c&&B&&"table"!==R?"0px":"var(--border-radius-2)"],children:"*.__jsx-style-dynamic-selector{will-change:transform;\ncursor:-webkit-grab;\ncursor:grab;\nbackground-color:".concat((u||f)&&l?"var(--observable-focus-light-blue)":p&&l?"var(--light-silver)":"transparent",";\ncolor:").concat((u||f)&&l?"var(--observable-focus-dark-blue)":"var(--gray)","}\n@media ").concat(Yn.pp," {*.__jsx-style-dynamic-selector{border-top-left-radius:var(--border-radius-2);\nborder-bottom-left-radius:").concat(c&&B&&"table"!==R?"0px":"var(--border-radius-2)","}}")}),className:be().dynamic([["4e243f6c85d1033f",[(u||f)&&l?"var(--observable-focus-light-blue)":p&&l?"var(--light-silver)":"transparent",(u||f)&&l?"var(--observable-focus-dark-blue)":"var(--gray)",Yn.pp,c&&B&&"table"!==R?"0px":"var(--border-radius-2)"]]])},W=q.className,$=q.styles,K=l&&!!_,G=l&&!c&&!E,J=l&&!E&&B,X=l&&B,ee=l,te=l,ne=l,re=l&&g,oe=x&&(i>0||j||!m),ie=l&&function(e){var t,n=(0,P.Qc)(e);return null!==n.id||"ImportDeclaration"===(null===(t=n.body)||void 0===t?void 0:t.type)}(b),ae=w||(0,P.cS)(b);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Q.v2,{children:function(e){var i=e.isExpanded;return U.current=i,(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Q.j2,Pr({ref:A,title:z,"aria-label":z,className:"bn pa0 hover-mid-gray ".concat(u||p||i?"db":"dn"," ").concat(W," ").concat(S)},L,{children:[N,$]})),(0,r.jsxs)(Q.qy,{position:Q.Ly.right,children:[K?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Q.Uk,{href:"#".concat(_),children:(0,r.jsx)("div",{className:"mw5 code f7 fw5 hover-blue",children:_})}),(0,r.jsx)(Q.R,{})]}):null,G?(0,r.jsxs)(Q.sN,{onSelect:t,children:[(0,r.jsx)(ur.Z,{className:"w1 h1 mr1"}),"Edit"]}):J?(0,r.jsxs)(Q.sN,{onSelect:t,children:[(0,r.jsx)(C.Z,{className:"w1 h1 mr1"}),"Close"]}):null,X&&(0,r.jsxs)(Q.sN,{onSelect:n,children:[(0,r.jsx)(y.Z,{className:"w1 h1 mr1","aria-label":E?"Unpin":"Pin"}),E?"Unpin":"Pin"]}),oe&&(0,r.jsxs)(Q.sN,{onSelect:o,"aria-label":H,children:[(0,r.jsx)(Hn.Z,{className:"w1 h1 mr1"}),H]}),ie&&(0,r.jsxs)(Q.sN,{title:"Copy the code to import this cell",onSelect:Nr(Ie().mark((function e(){return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(Ir(b,k));case 2:a({type:"showSuccessToast",message:"Copied import code to clipboard"});case 3:case"end":return e.stop()}}),e)}))),children:[(0,r.jsx)(cr.Z,{className:"w1 h1 mr1"}),"Copy import"]}),ne&&(0,r.jsxs)(Q.sN,{title:"Copy a link to this cell",onSelect:Nr(Ie().mark((function e(){var t;return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URL("#".concat(_||"cell-".concat(M)),window.location.href),e.next=3,navigator.clipboard.writeText(t.href);case 3:a({type:"showSuccessToast",message:"Copied link to clipboard"});case 4:case"end":return e.stop()}}),e)}))),children:[(0,r.jsx)(dr.ZP,{className:"w1 h1 mr1"}),"Copy link"]}),ee&&(0,r.jsxs)(Q.sN,{disabled:!_,title:_?"Embed this cell in a web page":"js"!==b.mode?"Only named cells can be embedded; name this cell by making it a JavaScript cell":"Name this cell to embed",onSelect:function(){return a({type:"showModal",modal:"embed",modalProps:{selectedNode:b},source:"nodeGutterMenu"})},children:[(0,r.jsx)(sr.Z,{className:"w1 h1 mr1"}),"Embed"]}),te&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Zr,{onDownload:V,id:M,dispatch:a}),(0,r.jsx)(Zr,{asView:!0,onDownload:V,id:M,dispatch:a})]}),re&&(0,r.jsx)(_r,{dispatch:a,id:M}),ae?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Q.R,{}),(0,r.jsx)(Qn,{dispatch:a,id:M,mode:R})]}):null]})]})}}),I&&(0,r.jsx)(s.h,{children:(0,r.jsx)("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0,cursor:"grabbing",zIndex:1}})})]})},_r=function(e){var t=e.dispatch,n=e.id,o=(0,d.useState)(!1),i=o[0],a=o[1],s=(0,Re.uF)().isExpanded;return(0,d.useEffect)((function(){s||a(!1)}),[s]),(0,r.jsxs)(r.Fragment,{children:[!i&&(0,r.jsxs)(Q.sN,{onMouseUp:function(e){e.preventDefault(),a(!0)},onSelect:function(){},className:"hover-dark-red hover-bg-washed-red",children:[(0,r.jsx)(k.Z,{"aria-label":"Delete",className:"w1 h1 mr1"}),"Delete"]}),(0,r.jsxs)("div",{className:i?"db":"dn",children:[(0,r.jsx)(Q.ti,{children:"Are you sure?"}),(0,r.jsxs)(Q.sN,{onSelect:function(){return t({type:"remove",id:n})},className:"hover-dark-red hover-bg-washed-red",children:[(0,r.jsx)(k.Z,{"aria-label":"Delete confirmation",className:"w1 h1 mr1"}),"Delete"]})]})]})},Ar=new Set(["csv","map","set","typedarray","array","object"]),Zr=function(e){var t=e.asView,n=void 0!==t&&t,o=e.id,i=e.dispatch,a=e.onDownload,s=(0,d.useState)(),c=s[0],l=s[1],u=(0,Re.uF)().isExpanded;if((0,d.useEffect)((function(){u?new kr(o).run(i).then(l,(function(){})):l(void 0)}),[i,o,u]),void 0===c)return null;var f=n?c.typeAsView:c.type;return void 0===f?null:(0,r.jsxs)(r.Fragment,{children:["svg"===f.type&&(0,r.jsxs)(Q.sN,{onSelect:function(){return a(n,f.type,"svg")},children:[(0,r.jsx)(lr.Z,{className:"w1 h1 mr1"}),"Download SVG"]}),("svg"===f.type||"canvas"===f.type)&&(0,r.jsxs)(Q.sN,{onSelect:function(){return a(n,f.type,"png")},children:[(0,r.jsx)(lr.Z,{className:"w1 h1 mr1"}),"Download PNG"]}),"css"===f.type&&(0,r.jsxs)(Q.sN,{onSelect:function(){return a(n,f.type,"css")},children:[(0,r.jsx)(lr.Z,{className:"w1 h1 mr1"}),"Download CSS"]}),"blob"===f.type&&(0,r.jsxs)(Q.sN,{onSelect:function(){return a(n,f.type,function(e){switch(e){case"image/png":return"png";case"image/jpeg":return"jpg";case"image/gif":return"gif";case"image/bmp":return"bmp";case"application/json":return"json";case"application/x-sqlite3":return"db";case"application/zip":return"zip";case"text/css":return"css";case"text/csv":return"csv";case"text/plain":return"txt";case"text/html":return"html";case"text/javascript":return"js";case"audio/mpeg":return"mp3";case"video/mp4":return"mp4";case"text/tab-separated-values":return"tsv"}return""}(f.mime))},children:[(0,r.jsx)(lr.Z,{className:"w1 h1 mr1"}),"Download file"]}),"csv"===f.type&&(0,r.jsxs)(Q.sN,{onSelect:function(){return a(n,f.type,"csv")},children:[(0,r.jsx)(lr.Z,{className:"w1 h1 mr1"}),"Download CSV"]}),"string"===f.type&&(0,r.jsxs)(Q.sN,{onSelect:function(){return a(n,f.type,"txt")},children:[(0,r.jsx)(lr.Z,{className:"w1 h1 mr1"}),"Download text"]}),Ar.has(f.type)&&(0,r.jsxs)(Q.sN,{onSelect:function(){return a(n,f.type,"json")},children:[(0,r.jsx)(lr.Z,{className:"w1 h1 mr1"}),"Download JSON"]})]})};function Ir(e,t){var n=(0,P.Qc)(e);if(null!==n.id)return"import {".concat((0,P.m8)(n.id),'} from "').concat(t,'"');var r=n.body,o=r.specifiers,i=r.injections,a=r.source;return i?"import {".concat(o.map((function(e){var t=e.local.name,n=e.view,r=e.mutable;return n?"viewof ".concat(t):r?"mutable ".concat(t):t})).join(", "),'} from "').concat(t,'"'):"import {".concat(o.map((function(e){var t=e.imported.name,n=e.local.name,r=e.view,o=e.mutable;return"".concat(r?"viewof ".concat(t):o?"mutable ".concat(t):t).concat(t===n?"":" as ".concat(n))})).join(", "),'} from "').concat(a.value,'"')}var Dr=d.memo((function(e){var t=e.dispatch,n=e.editorOpen,o=e.focused,i=e.selecting,a=e.selected,s=e.selectionFocused,c=e.height,l=e.hovered,d=e.isCommentingLocked,f=e.isCommentsOpen,p=e.isComposeOpen,m=e.commentable,h=e.canComment,v=e.deletable,b=e.editable,y=void 0===b||b,g=e.node,x=e.notebookComments,j=e.notebookSpecifier,w=e.saveVersion,k=e.safe,C=e.mode,O=e.outputHeight,S=g.id,N=g.pinned,M="table"===C,E=(o||l&&n)&&!M,R=!k&&!(0,P.cS)(g),_=L.re,A=R?Math.min(Math.max(O,L.NQ),L.T6):L.T6,Z=(x.get(g.id)||[]).filter((function(e){return e.node_id===g.id&&e.node_id<=w})),I=wn.qz[C].icon;return(0,r.jsxs)("div",{id:"cell-".concat(S),style:{height:c},className:be().dynamic([["e0a0f56bcafa78bf",[L.Mv]]])+" absolute gutter",children:[Z.length>0&&(0,r.jsx)(qn,{commentCount:Z.length,isCommentsOpen:f,node:g,className:"absolute top-0 z-1",style:{right:2*(_+4),height:A}}),(0,r.jsx)("button",{"aria-label":"gutter",onMouseEnter:function(){return t({type:"hover",id:S})},onClick:function(e){i||e.metaKey?(t({type:"blur"}),t({type:"selectionToggle",id:S})):t({type:o?"blur":"focus",id:S})},title:i?a?"Unselect cell":"Select cell":N?o?"Blur cell ".concat((0,u.ZP)("Escape")):"Focus cell":o?"Close cell ".concat((0,u.ZP)("Escape")):"Edit cell",className:be().dynamic([["e0a0f56bcafa78bf",[L.Mv]]])+" db bn bg-transparent absolute top-0 bottom-0 right-0 w-100 pointer moon-gray hover-mid-gray",children:y&&(o||l||i)&&R&&(0,r.jsx)("div",{style:{right:_+4,width:_,height:A},className:be().dynamic([["e0a0f56bcafa78bf",[L.Mv]]])+" absolute top-0 flex items-center justify-center",children:i?(0,r.jsx)("input",{type:"checkbox",checked:a,className:be().dynamic([["e0a0f56bcafa78bf",[L.Mv]]])+" pointer"}):M?null:(0,r.jsx)(Ce.Z,{style:{transform:n?"":"rotate(-90deg)"}})})}),(0,r.jsx)(Rr,{dispatch:t,node:g,focused:o,selected:a||s,editorOpen:n,editable:y,hovered:l,notebookSpecifier:j,safe:k,commentCount:Z.length,isCommentingLocked:d,isCommentsOpen:f,isComposeOpen:p,commentable:m,canComment:h,deletable:v,className:"absolute top-0",style:{right:1,width:_,height:R?Math.max(O,A):c},children:(0,r.jsx)("div",{style:{width:_,height:A},className:be().dynamic([["e0a0f56bcafa78bf",[L.Mv]]])+" absolute top-0 flex items-center justify-center",children:y?R?(0,r.jsx)(Wn.Z,{}):(0,r.jsx)(I,{className:be().dynamic([["e0a0f56bcafa78bf",[L.Mv]]])}):(0,r.jsx)(Hn.Z,{})})}),E&&R&&(0,r.jsx)("div",{style:{top:O,height:"calc(100% - ".concat(O,"px)")},className:be().dynamic([["e0a0f56bcafa78bf",[L.Mv]]])+" absolute right-0",children:(0,r.jsx)(er,{node:g,mode:C,focused:o,selected:a||s,className:"absolute bottom-0",style:{top:-1,right:1,width:_,borderTop:"solid 1px white"},children:(0,r.jsx)("div",{style:{width:_,height:L.T6},className:be().dynamic([["e0a0f56bcafa78bf",[L.Mv]]])+" absolute top-0 flex items-center justify-center",children:(0,r.jsx)(I,{className:be().dynamic([["e0a0f56bcafa78bf",[L.Mv]]])})})})}),(0,r.jsx)(be(),{id:"e0a0f56bcafa78bf",dynamic:[L.Mv],children:".gutter.__jsx-style-dynamic-selector{width: calc((100vw - 100%) / 2 - ".concat(L.Mv,"px + 1px);\nmargin-left: calc((100% - 100vw) / 2)}")})]})})),Ur=(0,B.$j)((function(e,t){var n=e.notebook,r=t.node,o=t.isNodeCommentable;return{isCommentingLocked:(0,Y.fC)(n),isCommentsOpen:n.openComments.has(r.id),isComposeOpen:n.composingComments.has(r.id),commentable:o(r.id),canComment:(0,W.RF)(n),notebookComments:n.comments,notebookSpecifier:(0,Y.J6)(n),saveVersion:n.saveVersion,deletable:n.model.nodes.length>1}}),(function(e){return{dispatch:e}}))(Dr),Vr=n(78120),Tr=n(76135),Fr=n(68230),Hr=n(82893);function Br(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zr(e){return function(e){if(Array.isArray(e))return Br(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Br(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Br(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qr(e,t){var n=function(e){var t=new RegExp(zr(e).map(Wr).join(".*"),"i");return function(e){return t.test(e)}}(e);return function(e){return t.some((function(t){return n(e[t])}))}}function Wr(e){return"".concat(e).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var Yr=n(15612);function $r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kr(e){return function(e){if(Array.isArray(e))return $r(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return $r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Gr=function(e){var t,n=e.text,o=e.searchString,i=e.highlightClass,a=void 0===i?"underline":i,s=function(e,t){return(0,r.jsx)("span",{className:t?a:"",children:e})},c=Kr(o.toLowerCase()),l=[],u=0,d=0,f=0,p=!0,m=!1,h=void 0;try{for(var v,b=n[Symbol.iterator]();!(p=(v=b.next()).done);p=!0){var y=v.value,g=c[f]===y.toLowerCase();t!==g&&(d>u&&l.push(s(n.slice(u,d),t)),u=d,t=g),++d,t&&++f}}catch(x){m=!0,h=x}finally{try{p||null==b.return||b.return()}finally{if(m)throw h}}return l.push(s(n.slice(u),t)),(0,r.jsx)("span",{children:l})},Jr=n(17905),Xr=n(17881);function Qr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var to=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){eo(e,t,n[t])}))}return e}({width:"60",height:"40",viewBox:"0 0 60 40",fill:"none"},e,{children:[(0,r.jsx)("rect",{width:"60",height:"40",rx:"4",fill:"#F5F5F5"}),(0,r.jsxs)("g",{transform:"translate(22, 12)",children:[(0,r.jsx)("rect",{x:"5.5",y:"3",width:"8.5",height:"2",rx:"0.5",fill:"currentColor"}),(0,r.jsx)("rect",{x:"2",y:"6",width:"12",height:"2",rx:"0.5",fill:"currentColor"}),(0,r.jsx)("rect",{x:"2",y:"9",width:"12",height:"2",rx:"0.5",fill:"currentColor"}),(0,r.jsx)("rect",{x:"2",y:"12",width:"6.5",height:"2",rx:"0.5",fill:"currentColor"})]})]}))},no=n(37720);function ro(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ro(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ro(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var io=[{items:[ao("js"),ao("md"),ao("html"),ao("sql"),ao("table"),ao("tex")]},{title:"Plot",items:Tr.aS.map(so)},{title:"Trees and Networks",items:[{label:"GraphViz",description:"Node-link diagram with DOT",icon:Xr.Y,mode:"js",type:"snippet",apply:co("dot`digraph g {\n\trankdir = LR;\n\ta -> b -> c;\n}`",4,1)},{label:"Mermaid",description:"Node-link diagram with Mermaid",icon:Xr.Y,mode:"js",type:"snippet",apply:co("mermaid`graph LR\na--\x3eb\nb--\x3ec`",8,1)}]},{title:"Inputs",items:Tr.Cq.map(so)},{title:"Text",items:Tr.L7.map((function(e){var t=e.label,n=e.description,r=e.apply;return{label:t,description:null!==n&&void 0!==n?n:"",icon:to,mode:"md",type:"snippet",apply:r}})).concat({label:"Mathematical formula",description:"Typeset math with KaTeX",icon:function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Qr(e,t,n[t])}))}return e}({width:"60",height:"40",viewBox:"0 0 60 40",fill:"none"},e,{children:[(0,r.jsx)("rect",{width:"60",height:"40",rx:"4",fill:"#F5F5F5"}),(0,r.jsxs)("g",{transform:"translate(22, 12)",children:[(0,r.jsx)("rect",{x:"3",y:"7",width:"10",height:"2",rx:"0.5",fill:"currentColor"}),(0,r.jsx)("path",{d:"M7 1H9V6H7V2.5L6 3V1.5L7 1Z",fill:"currentColor"}),(0,r.jsx)("path",{d:"M7 10H5L7 12.5L5 15H7L8 13.75L9 15H11L9 12.5L11 10H9L8 11.25L7 10Z",fill:"currentColor"})]})]}))},mode:"tex",type:"snippet",apply:co("c = \\pm\\sqrt{a^2 + b^2}")})},{title:"Imports",items:Tr.Xk.map(so)}];function ao(e){var t=wn.qz[e];return{type:"mode",label:t.label,icon:t.icon,mode:e}}function so(e){var t,n,r;return{type:"snippet",label:null!==(t=e.shortLabel)&&void 0!==t?t:e.label,description:null!==(n=e.description)&&void 0!==n?n:"",icon:null!==(r=e.thumbnail)&&void 0!==r?r:Xr.Y,apply:e.apply}}function co(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(r,o,i,a){r.dispatch(r.state.update({changes:{from:i,to:a,insert:e},selection:Vr.jT.range(t,e.length-n)}))}}function lo(e){e.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowDown",bubbles:!0}))}var uo=io.flatMap((function(e){return e.items})),fo=!0,po=!1,mo=void 0;try{for(var ho,vo=io[Symbol.iterator]();!(fo=(ho=vo.next()).done);fo=!0){var bo=ho.value,yo=!0,go=!1,xo=void 0;try{for(var jo,wo=bo.items[Symbol.iterator]();!(yo=(jo=wo.next()).done);yo=!0){jo.value.category=bo.title}}catch(li){go=!0,xo=li}finally{try{yo||null==wo.return||wo.return()}finally{if(go)throw xo}}}}catch(li){po=!0,mo=li}finally{try{fo||null==vo.return||vo.return()}finally{if(po)throw mo}}var ko=new Set,Co=!0,Oo=!1,So=void 0;try{for(var No,Lo=uo[Symbol.iterator]();!(Co=(No=Lo.next()).done);Co=!0){for(var Po=No.value;ko.has(Po.label);)Po.label+=" ";ko.add(Po.label)}}catch(li){Oo=!0,So=li}finally{try{Co||null==Lo.return||Lo.return()}finally{if(Oo)throw So}}var Mo=function(e){var t=e.item,n=e.onClick,o=e.filter,i=e.fuzzyMatch,a=t.label,s=t.type,c=t.icon;return(0,r.jsx)(Yr.O2,{value:a,className:"ph1 theme-blue",onClick:function(e){return n(e,a)},children:"snippet"!==s?(0,r.jsxs)("div",{className:"flex justify-between items-center h2 pa1 br2 fw5",children:[o.length&&i?(0,r.jsx)(Gr,{text:a,searchString:o}):a,(0,r.jsx)(c,{className:"".concat("mode"===s?"br-100 ba b--silver pa1 mid-gray":""," highlight-inherit"),style:"mode"===s?{width:14,height:14}:{width:21,height:21}})]}):(0,r.jsxs)("div",{className:"flex justify-between items-center ph1 pv2 br2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb1 fw5",children:o.length&&i?(0,r.jsx)(Gr,{text:a,searchString:o}):a}),(0,r.jsx)("div",{className:"f7 gray highlight-inherit",children:o.length&&i?(0,r.jsx)(Gr,{text:t.description,searchString:o}):t.description})]}),(0,r.jsx)(c,{className:"mid-gray highlight-blue",style:{width:50,height:30}})]})})},Eo=function(e){var t=e.previousId,n=e.nextId,o=e.focusId,i=e.hoverId,a=e.insertingId,s=e.hasInsertMenu,c=e.dispatch,l=function(e){requestAnimationFrame((function(){var t;lo(e),(null===(t=N.current)||void 0===t?void 0:t.querySelector("[data-highlighted]"))||lo(e)}))},f=function(e){var r=uo.find((function(t){return t.label===e}));r?(c({type:"closeInsertMenu"}),"mode"===r.type?c({type:"insertBefore",id:n,mode:r.mode}):"snippet"===r.type&&c({type:"insertSnippet",apply:r.apply,label:r.label,mode:r.mode,afterId:t})):M&&c({type:"showModal",modal:"search",modalProps:{query:M}})},p=function(e,t){e.preventDefault(),f(t)},m=null!==o&&(o===t||o===n),h=null!==i&&(i===t||i===n),v=null!==t&&null!==n,b=(0,d.useState)(!1),y=b[0],g=b[1],x=(0,Hr.O)(),j=x.open,w=x.openMenu,k=x.closeMenu,C=x.triggerRef,O=x.uiRef,S=(0,d.useRef)(null),N=(0,d.useRef)(null),P=(0,d.useState)(""),M=P[0],E=P[1],R=(0,Fr.Xx)(uo.filter(qr(M,["label","category","description"])),(function(e){return e.category})).map((function(e){var t=oo(e,2);return{title:t[0],items:t[1]}}));return(0,d.useEffect)((function(){void 0!==a&&a===n?w():k()}),[k,a,n,w,t]),(0,d.useEffect)((function(){j||(E(""),c({type:"closeInsertMenu"}))}),[c,j]),(0,d.useEffect)((function(){if(v){var e=function(e){return g(e.shiftKey)},t=function(){return g(!1)};return addEventListener("keydown",e),addEventListener("keyup",e),addEventListener("blur",t),function(){removeEventListener("keydown",e),removeEventListener("keyup",e),removeEventListener("blur",t)}}}),[v]),(0,r.jsxs)("div",{className:"absolute",style:{marginTop:1-L.KI,left:-L.KI-L.re/2-5},children:[(0,r.jsxs)("div",{ref:C,className:"jsx-e91a1b2dce5303d0 absolute",children:[(0,r.jsx)("svg",{width:L.KI,height:L.KI-2,viewBox:"-8.5 -7.5 17 15",style:{overflow:"visible"},role:"button","aria-label":"Click to insert or merge cells",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none",onClick:function(e){e.preventDefault(),v&&e.shiftKey?c({type:"merge",beforeId:t,afterId:n}):c(s?j?{type:"closeInsertMenu"}:{type:"openInsertMenu",id:n}:{type:"insertBefore",id:n})},className:"jsx-e91a1b2dce5303d0 "+"".concat(j?"light-blue":m||h?"moon-gray":"transparent"),children:y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("title",{className:"jsx-e91a1b2dce5303d0",children:"Merge cells"}),(0,r.jsx)("path",{d:"M-3,4L0,1.5L3,4M0,1.5V6.5",className:"jsx-e91a1b2dce5303d0"}),(0,r.jsx)("path",{d:"M-3,4L0,1.5L3,4M0,1.5V6.5",transform:"rotate(180)",className:"jsx-e91a1b2dce5303d0"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("title",{className:"jsx-e91a1b2dce5303d0",children:null!==o&&o===n?"Insert cell before (".concat((0,u.ZP)("Shift-Mod-Enter"),")"):null!==o&&o===t?"Insert cell after (".concat((0,u.ZP)("Mod-Enter"),")"):"Insert cell"}),(0,r.jsx)("path",{d:"M0,-4.5V4.5M-4.5,0H4.5",className:"jsx-e91a1b2dce5303d0"}),j&&(0,r.jsx)("path",{d:"M8.5,0h23M-8.5,0h-23",style:{stroke:"var(--faint-blue)"},className:"jsx-e91a1b2dce5303d0"})]})}),(0,r.jsx)(be(),{id:"e91a1b2dce5303d0",children:"svg.jsx-e91a1b2dce5303d0{overflow:visible;\nwill-change:transform}\nsvg.jsx-e91a1b2dce5303d0:not(.black):hover{color:var(--mid-gray)}\nsvg.jsx-e91a1b2dce5303d0:not(.black):active{color:var(--black)}\n.cursor.jsx-e91a1b2dce5303d0{width:0;\n-webkit-transition:width 0.2s;\ntransition:width 0.2s;\nborder-top-width:0;\nborder-top-style:solid}\n.cursor.active.jsx-e91a1b2dce5303d0{width:calc(14rem - 17px);\nborder-top-width:2px}"})]}),j&&(0,r.jsx)(no.J,{extraStyle:{right:"auto",left:-2,top:10,width:"18rem",marginTop:"0.5rem"},ref:O,children:(0,r.jsxs)(Yr.hQ,{"aria-label":"custom option demo",role:"dialog",onSelect:f,onBlur:function(e){e.currentTarget.contains(e.relatedTarget)||k()},openOnFocus:!0,children:[(0,r.jsx)("div",{className:"pa2 ".concat(M?"":"absolute o-0"),children:(0,r.jsx)(Yr.gA,{ref:S,placeholder:"Filter",autocomplete:!1,spellCheck:!1,onChange:function(e){E(e.target.value),l(e.target)},onKeyDown:function(e){if(!e.isDefaultPrevented()){var t=N.current;if(!t)return;window.requestAnimationFrame((function(){var e=t.querySelector("[aria-selected=true]");if(e){var n=e.offsetTop-t.scrollTop,r=t.scrollTop+t.clientHeight-(e.offsetTop+e.clientHeight);r<0&&(t.scrollTop-=r),n<0&&(t.scrollTop+=n)}}))}},onFocus:function(e){l(e.target)},className:"w-100 border-box",type:"search",value:M,autoFocus:!0})}),(0,r.jsx)(Yr.Gk,{ref:N,className:"relative",style:{maxHeight:"25em",overflowY:"scroll"},children:!M.length||R.length?(M.length?R:io).map((function(e,t){var n=e.title,o=e.items;return(0,r.jsxs)("div",{className:"pt2 mb2 bt b--light-gray",children:[n&&(0,r.jsx)("div",{className:"gray f7 ph2 pv1",children:M.length?(0,r.jsx)(Gr,{text:n,searchString:M}):n}),o.map((function(e,t){return(0,r.jsx)(Mo,{item:e,filter:M,onClick:p,fuzzyMatch:!0},t)}))]},t)})):M.trim().length>0&&(0,r.jsx)("div",{className:"pt2 mb2 bt b--light-gray",children:(0,r.jsx)(Mo,{item:{label:"Search for ".concat(M),type:"link",icon:Jr.Z},filter:M,onClick:p,fuzzyMatch:!1})})},M)]})})]})},Ro=n(53582),_o=n(64063),Ao=n.n(_o),Zo=n(48873),Io=n(5969),Do=n(31343),Uo=n(8802),Vo=n(58671),To=n(9008),Fo=n(11163);function Ho(e){return Bo(e.input)&&Bo(e.stack)&&Bo(e.message)&&Bo(e.name)}function Bo(e){return void 0===e||"string"===typeof e}var zo=JSON.parse('{"xF":"worker-052c4c55.html"}'),qo=n(99248);function Wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yo(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,o)}function $o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Yo(i,r,o,a,s,"next",e)}function s(e){Yo(i,r,o,a,s,"throw",e)}a(void 0)}))}}function Ko(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Go(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function Jo(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Xo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(li){s=!0,o=li}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||ei(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qo(e){return function(e){if(Array.isArray(e))return Wo(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ei(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ei(e,t){if(e){if("string"===typeof e)return Wo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wo(e,t):void 0}}var ti=new Map,ni=0,ri=["allow-downloads","allow-forms","allow-popups-to-escape-sandbox","allow-popups","allow-same-origin","allow-scripts",N.D1?"allow-top-navigation":"allow-top-navigation-by-user-activation"].join(" "),oi=["accelerometer","autoplay","clipboard-write","camera","encrypted-media","fullscreen","geolocation","gyroscope","magnetometer","microphone","midi","vr"].join("; ");function ii(e){return new Map(e.filter((function(e){return"notebook"===e.type})).map((function(e){return[e.specifier,e.value]})))}function ai(e){var t=e.state,n=e.currentUser,o=e.dispatch,i=function(e){return new Promise((function(t,n){ti.set(e.id=++ni,[t,n]),P.current(e)}))},a=function(e){var t=location.pathname,n=location.search,r=location.hash;H.current===t&&B.current===r||(H.current=t,B.current=r,e.push({type:"navigate",pathname:t,search:n,hash:r}))},s=function(){return Math.min(J.current,G.current)},l=function(){return"".concat(t.id,"@").concat(s())},u=function(e){return e.toModuleURL(l())},f=function(e,t){return(0,ht.a8)("/document/".concat(e,"/import").concat("?resolutions=".concat(l())),t)},p=function(e){return Q.current.has(e+"")},m=function(){return!((0,z.QY)(t)&&(0,W.mG)(t))||K.current>=s()},h=function(e){return!S||void 0!==e.login&&e.login!==x.login},v=function(){if(m()){var e=!0,t=!1,n=void 0;try{for(var r,o=$.current.entries()[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=Xo(r.value,2)[1];i.needsToBeSigned&&(i.needsToBeSigned=!1,ae(i))}}catch(li){t=!0,n=li}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},b=function(){if(m()){var e=P.current,t=!0,n=!1,r=void 0;try{for(var o,i=$.current.entries()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=Xo(o.value,2),s=a[0],c=a[1],l=c.id,u=c.specifier,d=c.module,f=c.error;f?(e({type:"resolve_import",id:l,specifier:u,error:f}),$.current.delete(s)):"string"===typeof d&&(e({type:"resolve_import",id:l,specifier:u,module:d}),$.current.delete(s))}}catch(li){n=!0,r=li}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},y=function(e){o({type:"resolveDependencies",resolutions:e,trigger:"implicit",source:"cellEvaluation"});var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value,c=s.specifier,l=s.value;ee.current.set(c,l)}}catch(li){n=!0,r=li}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}},g=function(e){if(S){var t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;D.current.add(a)}}catch(li){n=!0,r=li}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},x=t.owner,j=t.model,w=t.files,k=t.heights,C=t.workerTasks,O=(0,Y.DF)(t),S=(0,Y.cE)(t),N=(0,d.useRef)(),P=(0,d.useRef)(),M=(0,d.useRef)(),E=(0,d.useRef)(),R=(0,d.useRef)(),A=(0,d.useRef)(j.nodes[0]),Z=(0,d.useRef)(),I=(0,d.useRef)(),D=(0,d.useRef)(),V=(0,d.useRef)(),F=(0,d.useRef)(),H=(0,d.useRef)(),B=(0,d.useRef)(),$=(0,d.useRef)(new Map),K=(0,d.useRef)(),G=(0,d.useRef)(),J=(0,d.useRef)(t.saveVersion),X=(0,d.useRef)(),Q=(0,d.useRef)(ii(j.resolutions)),ee=(0,d.useRef)(new Map);function te(){return(te=$o(Ie().mark((function e(){var t,n;return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.nodes[0].id,e.next=3,i({type:"extract_title",node_id:t});case 3:n=e.sent,o({type:"title",value:(n+"").slice(0,255)});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){return re.apply(this,arguments)}function re(){return(re=$o(Ie().mark((function e(t){var n;return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,ht.a8)("/document/".concat(t,"/imports?resolutions=").concat(l(),"&importer=").concat(S?x.login:"anonymous"),{signal:F.current});case 3:return n=e.sent.specifiers,e.abrupt("return",Object.entries(n).filter((function(e){return Xo(e,2)[1].owner!==x.login})).map((function(e){var t=Xo(e,2);return{type:"notebook",specifier:t[0],value:t[1].resolution}})));case 7:if(e.prev=7,e.t0=e.catch(0),404!==e.t0.status){e.next=11;break}return e.abrupt("return",[]);case 11:throw e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function oe(e,t,n,r){return ie.apply(this,arguments)}function ie(){return(ie=$o(Ie().mark((function e(t,n,r,o){var i,a;return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={id:n,specifier:r+""},$.current.set(t,i),!o||p(r)){e.next=9;break}return e.next=5,ne(r);case 5:if(a=e.sent,$.current.get(t)===i){e.next=8;break}return e.abrupt("return");case 8:a.length&&y(a);case 9:if(!h(r)){e.next=12;break}return i.module=u(r),e.abrupt("return");case 12:i.needsToBeSigned=!0,v();case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return se.apply(this,arguments)}function se(){return(se=$o(Ie().mark((function e(t){var n,r,o,i,a;return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(t.specifier,{signal:F.current});case 3:if(n=e.sent,r=n.import_path,o=n.owner,i=n.secrets,a=n.database_clients,o.id!==x.id){e.next=16;break}if(t.module="".concat("https://api.observablehq.com").concat(r),!i){e.next=13;break}return e.next=13,ce(i);case 13:a&&g(a),e.next=17;break;case 16:t.module=u(je.Z.parse(t.specifier));case 17:e.next=24;break;case 19:if(e.prev=19,e.t0=e.catch(0),"AbortError"!==e.t0.name){e.next=23;break}return e.abrupt("return");case 23:t.error=Go(e.t0,Do.ZP)&&404===e.t0.status?"Notebook '".concat(t.specifier,"' not found"):e.t0.message;case 24:b();case 25:case"end":return e.stop()}}),e,null,[[0,19]])})))).apply(this,arguments)}function ce(e){return le.apply(this,arguments)}function le(){return(le=$o(Ie().mark((function e(t){var n,r,o,i,a,s,c,l,u,d,f,p=arguments;return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.length>1&&void 0!==p[1]?p[1]:[],S){e.next=3;break}return e.abrupt("return");case 3:if(t.length){e.next=6;break}return void 0===I.current&&(I.current=null,n.unshift({type:"reset_secret",delay:!1})),e.abrupt("return");case 6:return r=P.current,I.current||(I.current=ue()),t.some((function(e){return!Z.current.has(e)}))&&(n.unshift({type:"reset_secret",delay:!0}),o=!0),e.next=12,I.current;case 12:for(i=e.sent,a=[],s=!0,c=!1,l=void 0,e.prev=15,u=t[Symbol.iterator]();!(s=(d=u.next()).done);s=!0)f=d.value,Z.current.has(f)||(Z.current.add(f),i.has(f)&&a.push([f,i.get(f)]));e.next=23;break;case 19:e.prev=19,e.t0=e.catch(15),c=!0,l=e.t0;case 23:e.prev=23,e.prev=24,s||null==u.return||u.return();case 26:if(e.prev=26,!c){e.next=29;break}throw l;case 29:return e.finish(26);case 30:return e.finish(23);case 31:if(a.length||o){e.next=33;break}return e.abrupt("return");case 33:r({type:"resolve_secrets",secrets:a});case 34:case"end":return e.stop()}}),e,null,[[15,19,23,31],[24,,26,30]])})))).apply(this,arguments)}function ue(){return de.apply(this,arguments)}function de(){return(de=$o(Ie().mark((function e(){var t;return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("team"!==x.type){e.next=7;break}return e.next=4,(0,ht.a8)("/team/".concat(x.id,"/secrets"));case 4:t=e.sent,e.next=12;break;case 7:return e.next=9,(0,ht.a8)("/user/secrets");case 9:if(t=e.sent,x.id===n.id){e.next=12;break}throw new Error("access denied");case 12:return e.abrupt("return",new Map(t.map((function(e){return[e.name,e.value]}))));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}K.current=t.saveVersion,G.current=j.version,(0,d.useEffect)((function(){X.current=j.resolutions,Q.current=ii(j.resolutions)}),[j.resolutions]),(0,d.useEffect)((function(){var e=function(){var e=[];a(e),e.length&&P.current({type:"bundle",events:e})};return addEventListener("hashchange",e),function(){return removeEventListener("hashchange",e)}}),[]),(0,d.useEffect)((function(){var e=function(){P.current({type:"blur"})},t=function(){var e;document.activeElement===N.current&&(o({type:"selectionClear"}),null===(e=window.getSelection())||void 0===e||e.removeAllRanges())};return t(),addEventListener("focus",e),addEventListener("blur",t),function(){removeEventListener("focus",e),removeEventListener("blur",t)}}),[o]);var fe=(0,_.y)(n,t,"current_user_emails");return(0,d.useEffect)((function(){if(n&&O){var e=n.login,t=n.name,r=n.bio,o=n.home_url,i=n.avatar_url,a=n.identities;V.current=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ko(e,t,n[t])}))}return e}({login:e,name:t,bio:r,url:o,avatar:i},fe&&{email:a.concat(n).map((function(e){return e.email})).find((function(e){return!!e}))})}else V.current=void 0}),[O,fe,n]),(0,d.useEffect)((function(){var e=function(e){if(e.isTrusted&&e.origin===s&&e.source===c){var l=e.data;if(void 0!==l.id){var u=ti.get(l.id);if(u){var m=Xo(u,2),h=m[0],v=m[1];return ti.delete(l.id),void(void 0!==l.error?v(l.error):h(l.value))}}else switch(l.type){case"hello":return void t(l);case"resize":return void n(l);case"hover":return void r(l);case"errors":return void a(l);case"navigate":return void i(l);case"request_database_token":return void function(e){d.apply(this,arguments)}(l.name);case"request_cloud_file":return void function(e){f.apply(this,arguments)}(l.name);case"current_user":return void function(){p.apply(this,arguments)}();case"escape":return void(document.activeElement===N.current&&(window.focus(),o({type:"blur"})));case"database_results":return void He(o,l)}}},t=function(){if(u){var e=!0,t=!1,n=void 0;try{for(var r,o=u[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;c.postMessage(i,s)}}catch(li){t=!0,n=li}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}u=null}},n=function(e){var t=e.node_id,n=e.height;T({dispatch:o,type:"worker",id:+t,height:+n})},r=function(e){var t=e.node_id;o({type:"hover",id:+t})},i=function(e){var t=e.pathname,n=e.search,r=e.hash,o="".concat(t).concat(n).concat(r);Fo.default.push(o)},a=function(e){var t=e.errors;if(Go(t,Map)){var n=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=Xo(a.value,2),l=c[0],u=c[1];if("number"!==typeof l||null!==u&&!Ho(u))return}}catch(li){r=!0,i=li}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}o({type:"workerErrors",errors:t})}},s=(0,q.vE)(x),c=N.current.contentWindow,l=new AbortController,u=[];function d(){return(d=$o(Ie().mark((function e(t){var n,r;return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=P.current,S){e.next=4;break}return n({type:"resolve_database_token",name:t,error:qo.uW}),e.abrupt("return");case 4:if(D.current.has(t)){e.next=7;break}return n({type:"resolve_database_token",name:t,error:"Database not allowed"}),e.abrupt("return");case 7:return e.prev=8,e.next=11,(0,ht.Fv)("".concat("team"===x.type?"/team/".concat(x.id):"/user","/data-connector/token"),{name:t});case 11:r=e.sent,e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(8),n({type:"resolve_database_token",name:t,error:"Database not found"}),e.abrupt("return");case 18:n({type:"resolve_database_token",name:t,token:r});case 19:case"end":return e.stop()}}),e,null,[[8,14]])})))).apply(this,arguments)}function f(){return(f=$o(Ie().mark((function e(t){var n,r,o;return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=P.current,S){e.next=4;break}return n({type:"resolve_cloud_file",name:t,error:qo.Px}),e.abrupt("return");case 4:if(r=X.current.find((function(e){return"cloud_file"===e.type&&e.specifier===t}))){e.next=8;break}return n({type:"remove_file",name:t}),e.abrupt("return");case 8:return e.prev=8,e.next=11,(0,Zo.w)(x,r);case 11:o=e.sent,n({type:"resolve_cloud_file",name:t,url:o}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),n({type:"resolve_cloud_file",name:t,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[8,15]])})))).apply(this,arguments)}function p(){return(p=$o(Ie().mark((function e(){return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,P.current)({type:"current_user",currentUser:V.current});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return addEventListener("message",e),c.postMessage({type:"hello"},s),P.current=function(e){u?u.push(e):c.postMessage(e,s)},M.current=-1,E.current=new Map,R.current=new Map,Z.current=new Set,D.current=new Set,F.current=l.signal,function(){o({type:"workerGoodbye"}),removeEventListener("message",e),P.current=void 0,M.current=void 0,E.current=void 0,R.current=void 0,Z.current=void 0,I.current=void 0,D.current=void 0,F.current=void 0,H.current=void 0,B.current=void 0,l.abort()}}),[O,S,o,x]),(0,d.useEffect)((function(){var e=[],n=[],r=[],o=[];!function(e,t,n,r,o,i,a,s,l){var u=e.current<0?Ro.Z.create(t).events.filter((function(e){return e})):t.history.slice(e.current),d=new Set,f=!1,p=!0,m=!1,h=void 0;try{for(var v,b=u[Symbol.iterator]();!(p=(v=b.next()).done);p=!0){var y=v.value,g=y.type;switch(g){case"mode_node":case"insert_node":case"modify_node":case"modify_name":case"modify_data":var x=y.node_id,j=y.new_next_node_id,w=y.new_node_mode;if(si(y,t))continue;var k=(0,Vo.Z)((0,c.DY)(t,x)||{value:"",mode:"js",name:null}),C={type:g,node_id:x,new_node_value:k,new_next_node_id:j,new_node_mode:w};if("import"===k.type)r.push({nodeId:x,value:k,shouldCapture:e.current>=0&&y.version>l});else{var O,S;if(k.secrets)(O=o).push.apply(O,Qo(k.secrets));if(k.databaseClients)(S=i).push.apply(S,Qo(k.databaseClients))}d.add(x),n.push(C);break;case"move_node":var N=y.node_id,L=y.new_next_node_id;n.push({type:g,node_id:N,new_next_node_id:L});break;case"remove_node":var P=y.node_id;n.push({type:g,node_id:P});break;case"resolve_dependency":var M=y.version,E=y.specifier,R=y.specifier_type,_=y.new_resolution;if("cloud_file"===R)_?n.push({type:"insert_file",name:E,cloud:!0}):n.push({type:"remove_file",name:E});else if("notebook"===R){var A=s.get(E);A&&A===_?s.delete(E):a.current<M&&(f=!0,a.current=M)}}}}catch(li){m=!0,h=li}finally{try{p||null==b.return||b.return()}finally{if(m)throw h}}f&&function(e,t,n,r){var o=!0,i=!1,a=void 0;try{for(var s,l=e.nodes[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;if(!t.has(u.id)){t.add(u.id);var d=(0,Vo.Z)((0,c.DY)(e,u.id)||{value:"",mode:"js",name:null});"import"===d.type&&(n.push({nodeId:u.id,value:d,shouldCapture:!1}),r.push({type:"modify_node",node_id:u.id,new_node_value:d}))}}}catch(li){i=!0,a=li}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}}(t,d,r,n);e.current=t.history.length}(M,j,e,n,r,o,J,ee.current,t.saveVersion),function(e,t,n){if(e.current!==t){var r=e.current;e.current=t;var o=!0,i=!1,a=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=Xo(s.value,2),u=l[0],d=l[1],f=r.get(u);if((0,Io.ki)(d))if((0,Io.ki)(f)){if("pending"===f.status&&void 0===f.blob&&"pending"!==d.status){var p=d.url;n.push({type:"modify_file",name:u,url:p})}}else{var m=d.url,h=d.blob,v=d.mimeType;n.push({type:"insert_file",name:u,url:m,blob:h,mimeType:v})}}}catch(li){i=!0,a=li}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}var b=!0,y=!1,g=void 0;try{for(var x,j=r[Symbol.iterator]();!(b=(x=j.next()).done);b=!0){var w=Xo(x.value,2),k=w[0],C=w[1],O=t.get(k);!(0,Io.ki)(O)&&(0,Io.ki)(C)&&n.push({type:"remove_file",name:k})}}catch(li){y=!0,g=li}finally{try{b||null==j.return||j.return()}finally{if(y)throw g}}}}(E,w,e),function(e,t,n){if(e.current!==t){var r=e.current;e.current=t;var o=!0,i=!1,a=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=Xo(s.value,2),u=l[0],d=l[1],f=d.editor+d.comments+d.table;(r.has(u)?r.get(u).editor+r.get(u).comments+r.get(u).table:0)!==f&&n.push({type:"offset_node",node_id:u,height:f})}}catch(li){i=!0,a=li}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}var p=!0,m=!1,h=void 0;try{for(var v,b=r[Symbol.iterator]();!(p=(v=b.next()).done);p=!0){var y=Xo(v.value,2),g=y[0],x=y[1].editor;t.has(g)||0===x||n.push({type:"offset_node",node_id:g,height:0})}}catch(li){m=!0,h=li}finally{try{p||null==b.return||b.return()}finally{if(m)throw h}}}if(n.length){var j=new Map,w=!0,k=!1,C=void 0;try{for(var O,S=n[Symbol.iterator]();!(w=(O=S.next()).done);w=!0){var N=O.value,L=N.type,P=N.node_id;switch(L){case"insert_node":var M=t.get(P);M&&j.set(P,M.editor+M.comments+M.table);break;case"remove_node":j.delete(P)}}}catch(li){k=!0,C=li}finally{try{w||null==S.return||S.return()}finally{if(k)throw C}}var E=!0,R=!1,_=void 0;try{for(var A,Z=j[Symbol.iterator]();!(E=(A=Z.next()).done);E=!0){var I=Xo(A.value,2),D=I[0],U=I[1];n.push({type:"offset_node",node_id:D,height:U})}}catch(li){R=!0,_=li}finally{try{E||null==Z.return||Z.return()}finally{if(R)throw _}}}}(R,k,e),function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=a.nodeId,c=a.value,l=a.shouldCapture,d=je.Z.parse(c.specifier);null===d?c.module=c.specifier:(c.notebook=d.toNotebookURL(),h(d)&&(!l||p(d))&&m()?c.module=u(d):(c.module=++ni,oe(s,c.module,d,l)))}}catch(li){n=!0,r=li}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}(n),ce(r,e),g(o),a(e),e.length&&P.current({type:"bundle",events:e}),function(e,t,n){var r=t.nodes[0];if(r!==e.current||n.some((function(e){var t=e.type,n=e.node_id;return"modify_node"===t&&n===r.id})))return e.current=r,!0;return!1}(A,j,e)&&function(){te.apply(this,arguments)}(),function(e){if(e.size){var t=!0,n=!1,r=void 0;try{for(var o,a=Qo(e)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;e.delete(s),s.resolve(s.process(i))}}catch(li){n=!0,r=li}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}(C),v(),b()})),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(To.default,{children:(0,r.jsx)("link",{rel:"prefetch",href:"https://cdn.jsdelivr.net/npm/marked@0.3.12/marked.min.js",crossOrigin:""})}),(0,r.jsx)("iframe",{ref:N,src:"".concat((0,q.vE)(x),"/next/").concat(zo.xF||"missing-manifest"),style:{width:"calc(100% + ".concat(2*L.Mv,"px)"),height:U(k)+(j.nodes.length+1)*L.KI,margin:"0 ".concat(-L.Mv,"px"),border:"none"},scrolling:"no",sandbox:ri,allow:oi},[(0,Uo.Z)(o),(0,Uo.Z)(ai),O,S].join())]})}function si(e,t){if("modify_data"!==e.type)return!1;var n=function(e,t){return t.reset(e.version).nodes.find((function(t){return t.id===e.node_id})).mode}(e,t);if("table"!==n&&"sql"!==n)return!1;var r=e.old_node_data||{},o=(r.ui,Jo(r,["ui"])),i=e.new_node_data||{},a=(i.ui,Jo(i,["ui"]));return Ao()(o,a)}var ci=function(e){var t=e.notebook,n=e.dispatch,s=e.editors,c=e.currentUser,l=e.editorComponent,u=e.disablePointerEvents,f=void 0!==u&&u,p=e.isNodeCommentable,m=void 0===p?function(){return!1}:p,h=e.isEditorAlwaysOpen,v=void 0===h?function(){return!1}:h,b=e.editable,y=void 0===b||b,g=t.model,x=t.safe,j=t.heights,w=t.focusId,k=t.selection,C=t.selectionFocusId,O=t.editorStates,M=t.dragId,R=t.dropId,A=t.hoverId;return function(e,t,n,r){var o=(0,d.useState)(N.Qg&&!!location.hash),i=o[0],a=o[1],s=(0,d.useState)(!0),c=s[0],l=s[1],u=(0,d.useRef)();(0,d.useEffect)((function(){if(i){var e=setTimeout((function(){return l(!1)}),3e3);return function(){return clearTimeout(e)}}}),[i]),(0,d.useEffect)((function(){if(i){var o=location.hash.slice(1),s=!1,d=201;if(o.startsWith("comment-")){var f=document.getElementById(o);if(f)d=f.getBoundingClientRect().top,s=!0;else{var p=o.slice(8),m=!0,h=!1,v=void 0;try{for(var b,y=n[Symbol.iterator]();!(m=(b=y.next()).done);m=!0){var g=E(b.value,2),x=g[0];if(g[1].some((function(e){return e.id===p}))){r({type:"showComments",nodeId:x,trigger:"Implicit",source:"hash"});break}}}catch(li){h=!0,v=li}finally{try{m||null==y.return||y.return()}finally{if(h)throw v}}}}else{var j=!0,w=!1,k=void 0;try{for(var C,O=e[Symbol.iterator]();!(j=(C=O.next()).done);j=!0){var S,N,M=C.value;if(c&&!(null===(S=t.get(M.id))||void 0===S?void 0:S.worker))break;if((0,P.u2)(M)===o||"cell-".concat(M.id)===o){s=!0;break}d+=((null===(N=t.get(M.id))||void 0===N?void 0:N.total)||0)+L.KI}}catch(li){w=!0,k=li}finally{try{j||null==O.return||O.return()}finally{if(w)throw k}}}if(s)if(c)u.current&&clearTimeout(u.current),u.current=setTimeout((function(){return l(!1)}),150);else{var R=d-L.MT-5;Math.abs(window.scrollY-R)>L.MT&&scrollTo(0,R),a(!1)}else c||a(!1)}return function(){u.current&&clearTimeout(u.current)}}),[i,c,e,t,n,r])}(g.nodes,j,t.comments,n),(0,r.jsxs)("div",{className:"relative notebook z-0 pb6",onMouseLeave:function(){return n({type:"hover",id:null})},children:[!x&&(0,r.jsx)("div",{className:"absolute w-100 ".concat(null!==M||f?"pen":""),style:{top:-L.KI,overflowAnchor:"none"},children:(0,r.jsx)(ai,{state:t,dispatch:n,currentUser:c})}),y&&(0,r.jsx)(Eo,{previousId:null,nextId:g.nodes[0].id,focusId:w,hoverId:A,insertingId:t.insertingId,hasInsertMenu:(0,_.U)(c,"insert_menu"),dispatch:n}),g.nodes.map((function(e,u,f){var p=e.id,h=e.pinned,b=O.get(p);if(!b)return null;var g=b.field(o.A),S=b.field(i.C),N=w===p,L=j.get(p),M=L?L.table+L.worker:0,E=(0,P.cS)(e),Z=O.get(p).field(a.JN),I=y&&(v(p)||x||h||N||E||!!Z.length||!(0,P.QF)(e)||t.searchResultsVisible&&!!t.searchResults&&t.searchResults.has(e.id)),D=L?L.editor+M:0;return(0,r.jsxs)(d.Fragment,{children:[R===p&&(0,r.jsx)(Fn,{}),(0,r.jsx)(Ur,{node:e,height:D,outputHeight:M,focused:N,editorOpen:I,hovered:A===p,selecting:k.size>0,selected:k.has(p),selectionFocused:C===p,safe:x,mode:S,isNodeCommentable:m,editable:y}),(0,r.jsx)(Tn,{node:e,editorState:b,focused:N,selected:k.has(p),selectionFocused:C===p,editorOpen:I,workerHeight:L?L.worker:0,editors:s,hovered:A===p,editorComponent:l,hasPrevious:u>0,hasNext:u<f.length-1}),y&&(0,r.jsx)(Eo,{previousId:p,nextId:u<f.length-1?f[u+1].id:null,focusId:w,hoverId:A,insertingId:t.insertingId,hasInsertMenu:(0,_.U)(c,"insert_menu"),dispatch:n})]},g)})),null===R&&(0,r.jsx)(Fn,{}),(k.size||null!==C)&&(0,r.jsx)(S,{model:g,selection:k,selectionFocusId:C,dispatch:n})]})}},21142:function(e,t,n){var r=n(85893),o=n(65988),i=n.n(o),a=n(12447),s=(n(67294),n(4242)),c=n(52426);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}t.Z=(0,s.$j)((function(e){var t=e.page;return{paddingRight:null!==t.pane&&(0,c.wo)(t.pane).width,paddingLeft:t.collectionsSidebarOpen?216:0}}))((function(e){var t=e.className,n=void 0===t?"":t,o=e.children,s=e.paddingRight,c=e.paddingLeft,d=u(e,["className","children","paddingRight","paddingLeft"]);return(0,r.jsxs)("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}({},d,{className:i().dynamic([["d6dfa35c066cbf63",[a.hs,s?"calc(max(".concat(s,"px - max((100vw - var(--max-width-8))/2, 0px), var(--spacing-extra-large) - var(--spacing-large)) + var(--spacing-large))"):"var(--spacing-extra-large)",s?"calc(max(".concat(s,"px - max((100vw - var(--max-width-page))/2, 0px), 0px) + var(--spacing-large))"):"var(--spacing-large)",c?"calc(max(".concat(c,"px + var(--spacing-large) - max((100vw - var(--max-width-page))/2, 0px), 0px) + var(--spacing-large))"):"var(--spacing-large)"]]])+" "+(d&&null!=d.className&&d.className||"".concat(c?"mw-page":"mw8"," mw-page-xl center ph4 pr5-l body ").concat(n)),children:[o,(0,r.jsx)(i(),{id:"d6dfa35c066cbf63",dynamic:[a.hs,s?"calc(max(".concat(s,"px - max((100vw - var(--max-width-8))/2, 0px), var(--spacing-extra-large) - var(--spacing-large)) + var(--spacing-large))"):"var(--spacing-extra-large)",s?"calc(max(".concat(s,"px - max((100vw - var(--max-width-page))/2, 0px), 0px) + var(--spacing-large))"):"var(--spacing-large)",c?"calc(max(".concat(c,"px + var(--spacing-large) - max((100vw - var(--max-width-page))/2, 0px), 0px) + var(--spacing-large))"):"var(--spacing-large)"],children:"@media ".concat(a.hs," {.body.__jsx-style-dynamic-selector{padding-right:").concat(s?"calc(max(".concat(s,"px - max((100vw - var(--max-width-8))/2, 0px), var(--spacing-extra-large) - var(--spacing-large)) + var(--spacing-large))"):"var(--spacing-extra-large)","}}\n@media screen and (min-width:90em) {.body.__jsx-style-dynamic-selector{padding-right:").concat(s?"calc(max(".concat(s,"px - max((100vw - var(--max-width-page))/2, 0px), 0px) + var(--spacing-large))"):"var(--spacing-large)","}}\n@media screen and (min-width:60em) {.body.__jsx-style-dynamic-selector{padding-left:").concat(c?"calc(max(".concat(c,"px + var(--spacing-large) - max((100vw - var(--max-width-page))/2, 0px), 0px) + var(--spacing-large))"):"var(--spacing-large)","}}")})]}))}))},56367:function(e,t,n){n.d(t,{R:function(){return l}});var r=n(85893),o=n(68337),i=n.n(o),a=n(67294),s=n(84193),c=i()().add("@",{validate:function(e,t,n){var r=e.slice(t);n.re.mention||(n.re.mention=new RegExp("^([a-zA-Z0-9_]){1,15}(?!_)(?=$|"+n.re.src_ZPCc+")"));var o=r.match(n.re.mention);return o?!(t>=2&&"@"===r[t-2])&&o[0].length:0},normalize:function(e){e.url="/".concat(e.url)}}),l=function(e){var t=[],n=0,o=0,i=e.content.split("\n"),l=!0,u=!1,d=void 0;try{for(var f,p=i[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var m=f.value,h=c.match(m);if(h){var v=0,b=!0,y=!1,g=void 0;try{for(var x,j=h[Symbol.iterator]();!(b=(x=j.next()).done);b=!0){var w=x.value,k=w.index,C=w.lastIndex,O=w.schema,S=w.text,N=w.url;k>v&&t.push((0,r.jsx)(a.Fragment,{children:m.substring(v,k)},++n)),t.push((0,r.jsx)(s.Z,{href:N,children:(0,r.jsx)("a",{rel:"".concat("@"===O?"":"nofollow ","noopener noreferrer ugc"),className:"no-underline black hover-blue",children:S},++n)})),v=C}}catch(L){y=!0,g=L}finally{try{b||null==j.return||j.return()}finally{if(y)throw g}}m.length>v&&t.push((0,r.jsx)(a.Fragment,{children:m.substring(v)},++n))}else t.push((0,r.jsx)(a.Fragment,{children:m},++n));i.length>1&&++o<i.length&&t.push((0,r.jsx)("br",{},++n))}}catch(L){u=!0,d=L}finally{try{l||null==p.return||p.return()}finally{if(u)throw d}}return(0,r.jsx)(r.Fragment,{children:t})}},78009:function(e,t,n){n.d(t,{l:function(){return d}});var r=n(85893),o=n(730),i=n(27193),a=n(36448),s=(n(67294),n(8385)),c=n(84193);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var d=function(e){var t=e.participants,n=e.size,d=e.link,f=void 0===d||d,p=u(e,["participants","size","link"]);return t.length?(0,r.jsx)("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}({className:"flex flex-row-reverse"},p,{children:t.map((function(e,l){var u=(0,r.jsx)(s.q,{user:e,size:n,style:{borderColor:(0,o.Lq)(l),marginLeft:(.6*-n*t.length-1)/t.length},title:(0,i.KY)(e),className:"br-100 ba bw1 pointer"});return f?(0,r.jsx)(c.Z,{href:(0,a.GN)(e),children:(0,r.jsx)("a",{children:u})},l):(0,r.jsx)("div",{children:u},l)}))})):null}},37720:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(85893);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}var a=n(67294).forwardRef((function(e,t){var n=e.open,o=e.children,a=e.onClick,s=e.extraStyle,c=e.top,l=e.className,u=e.left,d=e.leftPos,f=e.rightPos;return(0,r.jsx)("nav",{ref:t,onClick:a,className:"db absolute lh-solid tl z-5 ".concat(l),style:i({},u?{left:void 0!==d?d:-8}:{right:void 0!==f?f:-8},{width:"10rem"},c?{bottom:"1.6rem"}:{top:"100%"},s),"aria-label":"submenu","aria-hidden":!n,children:(0,r.jsx)("div",{className:"bg-white ba b--silver br2 shadow-4",style:{marginTop:"-4px"},children:o})})}))},64893:function(e,t,n){n.d(t,{i:function(){return u}});var r=n(85893),o=n(14151),i=n(16691),a=n(62990),s=n(67294);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=function(e){var t=e.time,n=e.precision,u=l(e,["time","precision"]),d=(0,i.L)(t),f=(0,o.d)((0,s.useCallback)((function(){return t.toLocaleString("en")}),[t]));return(0,r.jsx)("span",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}({title:f},u,{children:n?(0,a.aP)(t,d,n):(0,a.lY)(t,d)}))}},52426:function(e,t,n){n.d(t,{YE:function(){return on},wo:function(){return rn}});var r=n(85893),o=n(65988),a=n.n(o),s=n(37497),c=n(586),l=n(12447),u=n(65062),d=n(55818),f=n(5152),p=n(67294),m=n(4242),h=n(89905),v=n(27565),b=n(3764),y=n(27919),g=n(28041),x=n(92946),j=n(47311),w=n(602),k=n(74080),C=n(19671),O=n(2741),S=n(48873),N=n(11222),L=n(66421),P=n(4598),M=n(25655),E=n(47692),R=n(36448),_=n(30238),A=n(26825),Z=n(19868),I=n(1099),D=n(2845),U=n(8433),V=n(42568),T=n(18582),F=n(47743),H=n(11342),B=n(40821);function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){z(e,t,n[t])}))}return e}function W(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Y=function(e){var t=e.name,n=e.provider,o=e.dispatch,i=e.mimeType,a=e.size,c=e.downloadUrl;return(0,r.jsx)("div",{className:"flex flex-shrink-0 items-center",children:(0,r.jsxs)(V.v2,{children:[(0,r.jsx)(s.hU,{icon:I.v,title:"File actions",colorless:!0,asMenuButton:!0}),(0,r.jsxs)(V.qy,{children:[(0,r.jsxs)(V.sN,{onSelect:function(){return o({type:"cloudFileSnippet",name:t,provider:n,mimeType:i,size:a})},children:[(0,r.jsx)(_.Z,{className:"mr2"})," Insert into notebook"]}),c?(0,r.jsxs)(V.Uk,{onClick:function(){return o({type:"downloadCloudFile",provider:n,mimeType:i,size:a})},href:c,children:[(0,r.jsx)(A.Z,{className:"mr2"})," Download"]}):null,(0,r.jsxs)(V.sN,{onSelect:function(){return o({type:"removeCloudFile",name:t,provider:n,mimeType:i,size:a})},className:"hover-dark-red hover-bg-washed-red",children:[(0,r.jsx)(U.Z,{className:"mr2"})," Delete"]})]})]})})},$=function(e){var t,n=e.name,o=e.path,i=e.used,a=e.hasToken,s=e.dispatch,c=(0,H.Xk)(o),l=(0,B.ZP)(a?"/user/token?provider=microsoftData":null,w.a8,{revalidateOnFocus:!1}),u=l.data,d=l.error,f=(0,B.ZP)((function(){return!d&&u&&c?(0,H.g4)(o,u.access_token):null}),T.r,{revalidateOnFocus:!1}),p=f.data,m=f.error,h=void 0===m?d:m;return(0,r.jsxs)("div",{className:"ma3 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center truncate",children:[(0,r.jsx)(D.ZP,{className:"flex-shrink-0 mr2",style:{width:24,height:24}}),(0,r.jsxs)("div",{className:"f7 truncate",children:[(0,r.jsx)("div",{className:"fw6 dark-gray flex items-center truncate",children:!h&&a&&c?(0,r.jsx)("div",{className:"truncate",children:(0,r.jsx)("a",{href:null!==(t=null===p||void 0===p?void 0:p.webUrl)&&void 0!==t?t:void 0,className:"hover-blue no-underline",target:"_blank",rel:"noreferrer",children:n})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.Z,{className:"flex-shrink-0",style:{width:12,height:12},children:(0,r.jsx)("title",{children:null===h||void 0===h?void 0:h.message})}),(0,r.jsx)("div",{className:"ml2 dark-red truncate",children:n})]})}),(0,r.jsxs)("div",{className:"pt1 gray truncate",children:[i?(0,r.jsx)("span",{className:"f7 fw6 blue",children:"In use"}):(0,r.jsx)("span",{className:"f7 gray",children:"Unused"})," \u2022 ",(null===u||void 0===u?void 0:u.provider_username)||"No account connected"]})]})]}),(0,r.jsx)(Y,{name:n,mimeType:(0,H.bh)(p,n),size:(0,H.ap)(p),downloadUrl:p?p["@microsoft.graph.downloadUrl"]:void 0,provider:"microsoftData",dispatch:s})]})},K=function(e){var t,n,o=e.name,i=e.path,a=e.used,s=e.hasToken,c=e.dispatch,l=(0,F.ty)(i),u=(0,B.ZP)(s?"/user/token?provider=googleData":null,w.a8,{revalidateOnFocus:!1}),d=u.data,f=u.error,p=(0,B.ZP)((function(){return!f&&d&&l?(0,F.wA)("".concat(i,"?fields=mimeType,size,webContentLink,webViewLink&supportsAllDrives=true"),d.access_token):null}),T.r,{revalidateOnFocus:!1}),m=p.data,h=p.error,v=void 0===h?f:h;return(0,r.jsxs)("div",{className:"ma3 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center truncate",children:[(0,r.jsx)(Z.Z,{className:"flex-shrink-0 mr2",style:{width:24,height:24}}),(0,r.jsxs)("div",{className:"f7 truncate",children:[(0,r.jsx)("div",{className:"fw6 dark-gray flex items-center truncate",children:!v&&s&&l?(0,r.jsx)("div",{className:"truncate",children:(0,r.jsx)("a",{href:null===m||void 0===m?void 0:m.webViewLink,className:"hover-blue no-underline",target:"_blank",rel:"noreferrer",children:o})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.Z,{className:"flex-shrink-0",style:{width:12,height:12},children:(0,r.jsx)("title",{children:null===v||void 0===v?void 0:v.message})}),(0,r.jsx)("div",{className:"ml2 dark-red truncate",children:o})]})}),(0,r.jsxs)("div",{className:"pt1 gray truncate",children:[a?(0,r.jsx)("span",{className:"f7 fw6 blue",children:"In use"}):(0,r.jsx)("span",{className:"f7 gray",children:"Unused"})," \u2022 ",(null===d||void 0===d?void 0:d.provider_username)||"No account connected"]})]})]}),(0,r.jsx)(Y,{name:o,mimeType:null!==(t=null===m||void 0===m?void 0:m.mimeType)&&void 0!==t?t:"",size:+(null!==(n=null===m||void 0===m?void 0:m.size)&&void 0!==n?n:0),downloadUrl:null===m||void 0===m?void 0:m.webContentLink,provider:"googleData",dispatch:c})]})},G=function(e){var t=e.specifier,n=W(e,["specifier"]);switch(t.provider){case"microsoftData":return(0,r.jsx)($,q({},t,n));case"googleData":return(0,r.jsx)(K,q({},t,n))}},J=n(63231),X=n(27193),Q=function(e){var t=e.name,n=e.type,o=e.owner;return(0,r.jsxs)("div",{className:"ma3 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(b.t,{className:"mr2"}),(0,r.jsxs)("div",{className:"f7",children:[(0,r.jsx)("div",{className:"fw6 pb1 dark-gray",children:t}),(0,r.jsxs)("div",{className:"gray",children:[(0,X.Zb)(n)||(0,r.jsx)(r.Fragment,{children:"\xa0"}),"team"===o.type&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"light-gray",children:" \u2022 "}),(0,X.KY)(o)]})]})]})]}),(0,r.jsx)("div",{className:"flex",children:(0,r.jsxs)(V.v2,{children:[(0,r.jsx)(s.hU,{icon:I.v,title:"Database actions",colorless:!0,asMenuButton:!0}),(0,r.jsx)(V.qy,{children:(0,r.jsxs)(V.Uk,{href:"".concat((0,R.rF)(o),"/databases?edit=").concat(encodeURIComponent(t)),className:"nowrap",children:[(0,r.jsx)(J.Z,{className:"mr2","aria-label":"Database actions"}),"Edit details"]})})]})})]})},ee=n(58127),te=n(2102),ne=n(88725);function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe=function(e){var t=e.children,n=e.onDrop,o=e.dispatch,i=e.fileSource,a=e.loginSource,s=e.currentUser,c=(0,ee.Y)((function(e){var t=e.dataTransfer.files;(0,L.Yb)(s)?(!function(e){o({type:"localFilesAttached",files:e,source:i,trigger:"dragAndDrop"})}(Array.from(t)),n&&n(Array.from(t))):o({type:"showModal",modal:"login",modalProps:{loginReason:"files"},trigger:"dragAndDrop",source:a})})),l=c.isDraggingOver,u=c.dragAndDropEvents;return(0,r.jsxs)("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){re(e,t,n[t])}))}return e}({className:"relative","data-cy":"drop-target"},u,{children:[t,l&&(0,r.jsxs)("div",{className:"flex absolute right-0 bottom-0 top-0 left-0 tc bg-near-white b--light-silver o-90 b--dashed justify-center flex-column z-max bw1",children:[(0,r.jsx)("div",{className:"f6 fw6 near-black",children:"Upload files"}),(0,r.jsxs)("div",{className:"f7 fw5 dark-gray mt2",children:[(0,te.B)(ne.D_)," maximum per file"]})]})]}))},ie=n(14663);function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ae(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2"},e,{children:[(0,r.jsx)("path",{d:"M4 9L4 3C4 2.44771 4.44772 2 5 2L11.0001 2C11.5523 2 12 2.44768 12 2.99992V2.99992"}),(0,r.jsx)("path",{d:"M12 7L12 13C12 13.5523 11.5523 14 11 14L5 14C4.44771 14 4 13.5523 4 13V13"}),(0,r.jsx)("path",{d:"M1 6L4 9L7 6"}),(0,r.jsx)("path",{d:"M15 10L12 7L9 10"})]}))},ce=n(26674),le=function(e){var t=e.file,n=e.dispatch,o=e.used,i=e.currentUser,a=e.isFileDeletable,c=e.canDeleteFile,l=e.pane,u=function(e){n({type:"insertFile",file:e})},d=function(e,t,r){(0,L.Yb)(i)?n({type:"showModal",modal:"replaceFile",modalProps:{fileToReplace:e}}):n({type:"showModal",modal:"login",modalProps:{loginReason:"files"},trigger:t,source:r})};return(0,r.jsxs)("div",{className:"flex items-center justify-between ma3","data-cy":"file-item",children:[(0,r.jsx)("div",{className:"overflow-x-hidden",children:(0,r.jsx)(ce.J,{file:t,used:o})}),(0,r.jsxs)("div",{className:"flex flex-shrink-0 items-center",children:[(0,r.jsx)(s.hU,{icon:o?se:_.Z,onClick:o?function(){return d(t,"click","".concat(l,"PaneReplaceFileButton"))}:function(){return u(t)},title:o?"Replace file":"Insert into notebook"}),(0,r.jsxs)(V.v2,{children:[(0,r.jsx)(s.hU,{icon:I.v,title:"File actions",colorless:!0,asMenuButton:!0}),(0,r.jsxs)(V.qy,{children:[(0,r.jsxs)(V.sN,{onSelect:function(){return u(t)},children:[(0,r.jsx)(_.Z,{className:"mr2"})," Insert into notebook"]}),(0,r.jsxs)(V.sN,{onSelect:function(){return n({type:"copyFileCode",file:t})},children:[(0,r.jsx)(ie.Z,{className:"mr2"})," Copy usage code"]}),(0,r.jsx)(V.R,{}),"downloadUrl"in t&&(0,r.jsxs)(V.Uk,{onClick:function(){return n({type:"downloadFile",file:t})},href:t.downloadUrl,children:[(0,r.jsx)(A.Z,{className:"mr2"})," Download"]}),(0,r.jsxs)(V.sN,{onSelect:function(){return d(t,"click","".concat(l,"PaneMenuReplace"))},disabled:!o,children:[(0,r.jsx)(se,{className:"mr2"})," Replace file"]}),(0,r.jsx)(V.R,{}),c?(0,r.jsxs)(V.sN,{disabled:!a,onSelect:function(){return n({type:"showModal",modal:"deleteFile",modalProps:{name:t.name}})},className:"hover-dark-red hover-bg-washed-red",children:[(0,r.jsx)(U.Z,{className:"mr2"})," Delete"]}):null]})]})]})]})};function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||pe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e){return function(e){if(Array.isArray(e))return ue(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){if(e){if("string"===typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}var me=function(e){var t=e.title,n=e.icon,o=e["aria-label"],i=e.onAdd;return(0,r.jsxs)("div",{className:"jsx-335f9f217f61bc08 ph3 pt3 f6 fw6 lh-title near-black flex items-center justify-between section-header",children:[(0,r.jsxs)("span",{className:"jsx-335f9f217f61bc08 flex items-center",children:[p.createElement(n,{className:"mr2 bg-near-white pa1 br2 border-box",style:{width:24,height:24}}),t]}),i&&(0,r.jsx)(s.hU,{onClick:i,icon:j.Z,"aria-label":o,colorless:!0}),(0,r.jsx)(a(),{id:"335f9f217f61bc08",children:".section-header.jsx-335f9f217f61bc08{border-top:1px solid var(--light-silver);\nmargin-top:var(--spacing-medium)}\n.section-header.jsx-335f9f217f61bc08:first-of-type{border:none;\nmargin-top:0}"})]})},he=function(e){var t=e.files,n=e.used,o=e.currentUser,i=e.notebook,a=e.dispatch,s=(t=fe(t).sort((function(e,t){return e.name<t.name?-1:1}))).filter((function(e){return n.has(e.name)})),c=t.filter((function(e){return!n.has(e.name)})),l=function(e){return(0,r.jsx)(le,{isFileDeletable:(0,k.cn)(e,i),canDeleteFile:(0,L.uP)(e,i),file:e,dispatch:a,used:n.has(e.name),currentUser:o,pane:"data"},e.name)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(me,{title:"File attachments",icon:g.Z,"aria-label":"Upload files",onAdd:function(){(0,L.Yb)(o)?(a({type:"notebookFilePickerOpened",source:"dataPane",trigger:"click"}),(0,O.Z)().then((function(e){return a({type:"localFilesAttached",files:e,source:"dataPane",trigger:"click"})}))):a({type:"showModal",modal:"login",modalProps:{loginReason:"files"},trigger:"click",source:"dataPaneAttachFileButton"})}}),s.map(l),c.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ve,{children:"Unused"}),c.map(l)]}):null]})},ve=function(e){var t=e.children;return(0,r.jsxs)("div",{className:"flex ma3",children:[(0,r.jsx)("span",{className:"gray mr1",children:t}),(0,r.jsx)("span",{className:"flex-grow-1 bb b--light-silver"})]})},be=function(e){var t=e.databases,n=e.notebook,o=e.dispatch,i=n.owner;return(0,M.cE)(n)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(me,{icon:b.Z,title:"Databases","aria-label":"Add database",onAdd:function(){return o({type:"showModal",modal:"addDatabase"})}}),t.map((function(e){var t=e.name,n=e.type;return(0,r.jsx)(Q,{name:t,type:n,owner:i},t)}))]}):(0,R.Hw)(n)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(me,{icon:b.Z,title:"Databases"}),(0,r.jsx)("div",{className:"ph3 pt3 f7 fw5 gray",children:"Databases are only available in private notebooks."})]}):null},ye=function(e){var t=e.cloudFiles,n=e.notebook,o=e.currentUser,i=e.used,a=e.dispatch,s=function(e,t){(0,C.MR)((0,C.ym)({type:"notebook:manage:cloudFileAuth",notebook:n,currentUser:o,data:{provider:e,alreadyAuthenticated:t},eventVersion:1}))},c=t.map((function(e){return(0,S.a)(e)})).filter(N.K),l=de((0,w.h_)(o&&(0,M.cE)(n)&&c.length>0&&"/user/tokens"),1)[0];return(0,M.cE)(n)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(me,{icon:x.ZP,title:"Cloud files","aria-label":"Add cloud file",onAdd:function(){return a({type:"showModal",modal:"addCloudFile"})}}),(0,M.vi)(n).map((function(e){return(0,r.jsx)(v.E,{provider:e,alreadyAuthenticated:!!l&&l.some((function(t){return t.provider===e})),onAuth:s,children:(0,r.jsxs)("div",{className:"ph3 mt2 f7 flex items-center",children:[(0,r.jsx)(y.Z,{className:"mr2 flex-shrink-0"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:"mr1 mid-gray",children:["This notebook encountered an error importing"," ",P.c[e].name," files. Please"]}),(0,r.jsx)("button",{type:"submit",className:"blue pointer underline-hover bg-transparent pa0 bn",children:"connect your account"}),"."]})]})},e)})),l&&c.length?(0,r.jsxs)(r.Fragment,{children:[Object.entries(P.c).map((function(e){var t=de(e,2),n=t[0],o=t[1];return c.some((function(e){return e.provider===n}))&&(0,r.jsx)(v.E,{provider:n,alreadyAuthenticated:l.some((function(e){return e.provider===n})),onAuth:s,children:(0,r.jsxs)("div",{className:"ph3 mt2 f7",children:[(0,r.jsxs)("span",{className:"mr1 mid-gray",children:["This notebook uses ",o.name," files."]}),(0,r.jsx)("button",{className:"blue pointer underline-hover bg-transparent pa0 bn",type:"submit",children:l.some((function(e){return e.provider===n}))?"Switch account":"Connect account"})]})},n)})),c.map((function(e){return(0,r.jsx)(G,{specifier:e,used:i.has(e.specifier),dispatch:a,hasToken:l.some((function(t){return t.provider===e.provider}))},e.specifier)}))]}):null]}):(0,R.Hw)(n)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(me,{icon:x.ZP,title:"Cloud files"}),(0,r.jsx)("div",{className:"ph3 pt3 f7 fw5 gray",children:"Cloud files are only available in private notebooks."})]}):null},ge=(0,m.$j)((function(e){return{notebook:e.notebook,currentUser:e.currentUser}}),(function(e){return{dispatch:e}}))((function(e){var t=e.notebook,n=e.currentUser,o=e.dispatch,i=t.model,a=i.nodes,s=i.resolutions,c=t.files,l=t.owner,u=(0,E.Z)(a),d=u.fileAttachments,f=u.databaseClients,p=s.filter(M.HC),m=(0,M.Pu)(c),h=Array.from(f).map((function(e){return{name:e}})),v=de((0,w.h_)(f.size>0&&(0,M.cE)(t)?"".concat((0,M.p0)(t)?"/team/".concat(l.id):"/user","/data-connectors?detail=false"):null),1)[0],b=void 0===v?h:v;return(0,r.jsxs)("div",{className:"overflow-y-auto w-100",children:[(0,r.jsx)("div",{className:"bg-white bb b--light-silver pa3 f5 fw6 lh-title near-black z-1 br3 br--top",style:{position:"sticky",top:0},children:"Data"}),(0,r.jsxs)(oe,{dispatch:o,currentUser:n,fileSource:"dataPane",loginSource:"dataPaneDragAndDrop",children:[(0,r.jsx)(he,{files:m,used:d,currentUser:n,dispatch:o,notebook:t}),(0,r.jsx)(be,{databases:b.filter((function(e){var t=e.name;return f.has(t)})),notebook:t,dispatch:o}),(0,r.jsx)(ye,{dispatch:o,notebook:t,currentUser:n,cloudFiles:p,used:d}),(0,r.jsx)("div",{className:"pt3"})]})]})})),xe=n(34091),je=n(26959),we=n(84193),ke=n(56912),Ce=n(928),Oe=n(14416),Se=n(22027);function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||Me(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e){return function(e){if(Array.isArray(e))return Ne(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Me(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){if(e){if("string"===typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ne(e,t):void 0}}var Ee=function(){var e=(0,m.I0)(),t=(0,m.v9)((function(e){return e.notebook}),Oe.wU),n=(0,m.v9)((function(e){return e.page.dependenciesPaneSpecifier}),Oe.wU);(0,p.useEffect)((function(){var t=setTimeout((function(){n&&e({type:"removeDependenciesPaneSpecifier"})}),3e3);return function(){return clearTimeout(t)}}),[n,e]);var o=(0,ke.uF)(t),i=(0,ke.uF)(t,{ignoreResolutions:!0});return o&&i?(0,r.jsx)(Re,{dispatch:e,notebook:t,importData:o,latestImportData:i,selectedSpecifier:n}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"pa3 bb b--light-silver",children:(0,r.jsx)("div",{className:"f5 fw6 lh-title near-black",children:"Dependency versions"})}),(0,r.jsx)("div",{className:"flex justify-center pa3",children:(0,r.jsx)(Se.Z,{})})]})},Re=function(e){var t=e.dispatch,n=e.notebook,o=e.importData,i=e.latestImportData,c=e.selectedSpecifier,l=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=new Map(m);if(e){var r=!0,o=!1,i=void 0;try{for(var a,s=S[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=Le(a.value,2),l=c[0],u=c[1];n.set(l,u.version)}}catch(k){o=!0,i=k}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}else{var d=!0,f=!1,p=void 0;try{for(var v,b=C[Symbol.iterator]();!(d=(v=b.next()).done);d=!0){var y,g=Le(v.value,2),x=g[0],w=g[1];(null===(y=O.get(x))||void 0===y?void 0:y.version)||n.set(x,w.version)}}catch(k){f=!0,p=k}finally{try{d||null==b.return||b.return()}finally{if(f)throw p}}}Pe(O).forEach((function(e){var t=Le(e,1)[0];j.has(t)||n.set(t,void 0)})),t({type:"toggleDependencyLock",locked:!0,bulk:!0}),h(n)},u=function(e,t){if(j.get(e)){var n=O.has(e)?O.get(e).version:null,r=new Map(m);t==n?r.delete(e):r.set(e,t),h(r)}},d=(0,p.useMemo)((function(){return(0,ke.$r)(o)}),[o]).directImports,f=(0,p.useState)(new Map),m=f[0],h=f[1],v=(0,p.useRef)(!0);(0,p.useEffect)((function(){var e=setTimeout((function(){v.current=!1}),1e3);return function(){return clearTimeout(e)}}),[]);var b=(0,L.mG)(n),y=!(b&&(0,k.QY)(n))||n.isCompare,g=n.trashed?" because the notebook is in the trash":b?n.isCompare?" while in compare mode":"aborted"===n.clientState?" because there was a connection error":n.autosave?n.isReverting?" because the notebook is reverting":null:" while viewing history":" because you don\u2019t have permission to edit this notebook",x=new Set(Array.from(d).flatMap((function(e){var t=Le(e,2),n=t[0],r=t[1];return[n].concat(Pe(r.map((function(e){return Le(e,2)[1]}))))}))),j=new Map(Object.entries(i.specifiers).slice(1).flatMap((function(e){var t=Le(e,2),n=t[0],r=t[1];return(0,ke.xT)(r)?[]:[[n,Ce.Z.parse(r.resolution)]]}))),w=new Set(Object.entries(o.specifiers).slice(1).filter((function(e){var t=Le(e,2)[1];return(0,ke.xT)(t)})).map((function(e){return Le(e,1)[0]}))),C=new Map(Pe(j).filter((function(e){var t,n=Le(e,1)[0];return!(null===(t=Ce.Z.parse(n))||void 0===t?void 0:t.version)}))),O=new Map(n.model.resolutions.filter((function(e){return"notebook"===e.type})).map((function(e){return[e.specifier,Ce.Z.parse(e.value)]}))),S=new Map(Pe(C).filter((function(e){var t=Le(e,2),n=t[0],r=t[1],o=O.get(n);return o&&void 0!==o.version&&o.version!==r.version}))),N=Pe(S.keys()).filter((function(e){return x.has(e)})).length;return(0,r.jsxs)("div",{className:a().dynamic([["d3671eaecffeb05a",[v.current?"0.25s":"0s"]]])+" relative overflow-y-auto w-100",children:[(0,r.jsx)("div",{style:{position:"sticky",top:0},className:a().dynamic([["d3671eaecffeb05a",[v.current?"0.25s":"0s"]]])+" f5 fw6 lh-title near-black pa3 bb b--light-silver bg-white z-1 br3 br--top",children:"Dependency versions"}),d.size>0?(0,r.jsxs)(r.Fragment,{children:[y?(0,r.jsxs)("div",{className:a().dynamic([["d3671eaecffeb05a",[v.current?"0.25s":"0s"]]])+" f7 pa3 bb b--light-silver bg-washed-yellow",children:["Dependency changes cannot be made",g,"."]}):null,(0,r.jsx)("div",{className:a().dynamic([["d3671eaecffeb05a",[v.current?"0.25s":"0s"]]])+" pa3 flex items-center justify-between lh-copy f6 bb b--light-silver",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:a().dynamic([["d3671eaecffeb05a",[v.current?"0.25s":"0s"]]])+" "+"mr2 ".concat(N?"fw7":""),children:N?(0,M.YY)(N,"update available","updates available"):"No updates available"}),(0,r.jsx)(s.KM,{disabled:y||!N,onClick:function(){return l(!0)},text:"Update all",className:"nowrap nr2"}),(0,r.jsxs)(V.v2,{children:[(0,r.jsx)(s.hU,{icon:I.v,title:"Notebook import actions",colorless:!0,asMenuButton:!0}),(0,r.jsxs)(V.qy,{position:V.Ly.bottomLeft,children:[(0,r.jsx)(V.sN,{disabled:y,onSelect:l,children:"Lock all"}),(0,r.jsx)(V.sN,{disabled:y,onSelect:function(){t({type:"toggleDependencyLock",locked:!1,bulk:!0}),h(new Map(Pe(O).map((function(e){var t=Le(e,1)[0];return[t,j.has(t)?null:void 0]}))))},children:"Unlock all"})]})]})]})}),(0,r.jsxs)("div",{className:a().dynamic([["d3671eaecffeb05a",[v.current?"0.25s":"0s"]]])+" pa3 nb1",children:[(0,r.jsx)("div",{className:a().dynamic([["d3671eaecffeb05a",[v.current?"0.25s":"0s"]]])+" pv2 f6 fw6 lh-title near-black",children:"Direct imports"}),Array.from(x).filter((function(e){return d.has(e)})).sort().map((function(e){var t,n;return(0,r.jsx)("div",{"data-cy":"notebook-import",className:a().dynamic([["d3671eaecffeb05a",[v.current?"0.25s":"0s"]]])+" "+"nl1 nr1 mv1".concat(c===e?" blue-fade":"").concat(w.has(e)?" error":""),children:(0,r.jsx)(_e,{specifier:e,resolvedVersion:m.has(e)?m.get(e):null===(t=O.get(e))||void 0===t?void 0:t.version,latestVersion:null===(n=j.get(e))||void 0===n?void 0:n.version,onLock:function(t){return u(e,t)},isReadonly:y,isDirty:m.has(e)})},e)}))]}),x.size>d.size&&(0,r.jsxs)("div",{className:a().dynamic([["d3671eaecffeb05a",[v.current?"0.25s":"0s"]]])+" pa3 nt3 nb1",children:[(0,r.jsx)("div",{className:a().dynamic([["d3671eaecffeb05a",[v.current?"0.25s":"0s"]]])+" pv2 f6 fw6 lh-title near-black",children:"Indirect imports"}),Array.from(x).filter((function(e){return!d.has(e)})).sort().map((function(e){var t,n,i;return(0,r.jsx)("div",{"data-cy":"notebook-import",className:a().dynamic([["d3671eaecffeb05a",[v.current?"0.25s":"0s"]]])+" "+"nl1 nr1 mv1 ".concat(c&&(null===(t=d.get(c))||void 0===t?void 0:t.some((function(t){return Le(t,2)[1]===e})))?"blue-fade":"").concat(w.has(e)?" error":""),children:(0,r.jsx)(_e,{specifier:e,resolvedVersion:m.has(e)?m.get(e):null===(n=O.get(e))||void 0===n?void 0:n.version,latestVersion:null===(i=j.get(e))||void 0===i?void 0:i.version,onLock:function(t){return u(e,t)},isReadonly:y,isDirty:m.has(e),importers:o.imports.filter((function(t){return Le(t,2)[1]===e})).map((function(e){return Le(e,1)[0]}))})},e)}))]})]}):(0,r.jsx)("div",{className:a().dynamic([["d3671eaecffeb05a",[v.current?"0.25s":"0s"]]])+" pa3",children:"This notebook has no dependencies."}),m.size?(0,r.jsxs)("div",{className:a().dynamic([["d3671eaecffeb05a",[v.current?"0.25s":"0s"]]])+" pa2 sticky bottom-0 right-0 left-0 flex justify-end br3 br--bottom shadow-1-ns bg-white",children:[(0,r.jsx)(s.kq,{text:"Cancel",onClick:function(){return h(new Map)}}),(0,r.jsx)(s.KM,{text:"Save ".concat((0,M.YY)(m.size,"change")),onClick:function(){m.size&&(t({type:"resolveDependencies",source:"dependenciesPane",trigger:"click",resolutions:Pe(m).map((function(e){var t=Le(e,2),n=t[0],r=t[1];return{type:"notebook",specifier:n,value:void 0===r?null:"".concat(j.get(n).id).concat(null===r?"":"@".concat(r))}}))}),h(new Map))}})]}):null,(0,r.jsx)(a(),{id:"d3671eaecffeb05a",dynamic:[v.current?"0.25s":"0s"],children:".error.__jsx-style-dynamic-selector a{color:var(--red)}\n.blue-fade.__jsx-style-dynamic-selector{border-radius:4px;\n-webkit-animation-name:flash;\nanimation-name:flash;\n-webkit-animation-duration:2s;\nanimation-duration:2s;\n-webkit-animation-iteration-count:1;\nanimation-iteration-count:1;\n-webkit-animation-timing-function:ease;\nanimation-timing-function:ease;\nanimation-delay:".concat(v.current?"0.25s":"0s","}\n@keyframes flash {0% {background-color:var(--observable-focus-light-blue)}60% {background-color:var(--observable-focus-light-blue)}100% {background-color:#fefefe}}")})]})},_e=function(e){var t=e.specifier,n=e.resolvedVersion,o=e.latestVersion,i=e.onLock,a=e.importers,s=e.isDirty,c=e.isReadonly,l=Ce.Z.parse(t);return null===l?(0,r.jsx)(Ae,{specifier:t,title:"URL import versions cannot be locked",buttonText:"N/A",locked:!1,rel:"ugc nofollow noreferrer",isReadonly:c,isDirty:s,importers:a,dim:!0}):void 0!==l.version?(0,r.jsx)(Ae,{specifier:l,title:'This dependency version is locked via the "@'.concat(l.version,'" in the import statement'),buttonText:l.version+"",locked:!0,isReadonly:c,isDirty:s,importers:a}):void 0===n&&void 0===o?(0,r.jsx)(Ae,{specifier:l,title:"Error: specified notebook not found",buttonText:"\u26a0\ufe0e",locked:!1,isReadonly:c,isDirty:s,importers:a,dim:!0}):c?(0,r.jsx)(Ae,{specifier:l,title:n?"Version is locked":"Version is not locked",buttonText:n?n+"":o+"",locked:!!n,isReadonly:c,isDirty:s,importers:a}):n||void 0===o?n!==o&&o?(0,r.jsx)(Ae,{specifier:l,title:"Update this dependency to ".concat(o),buttonText:"".concat(n," \u2192 ").concat(o),locked:!0,isReadonly:c,isDirty:s,importers:a,onLockClick:function(){return i(null)},onButtonClick:function(){return i(o)}}):(0,r.jsx)(Ae,{specifier:l,title:"This dependency version is the latest",buttonText:n+"",locked:!0,isReadonly:c,isDirty:s,importers:a,onLockClick:function(){return i(null)}}):(0,r.jsx)(Ae,{specifier:l,title:"Lock at version ".concat(o),buttonText:o+"",locked:!1,isReadonly:c,isDirty:s,importers:a,onLockClick:function(){return i(o)}})},Ae=function(e){var t,n,o=e.specifier,i=e.title,a=e.buttonText,c=e.locked,l=e.isReadonly,u=e.isDirty,d=e.importers,f=e.onLockClick,p=void 0===f?null:f,h=e.onButtonClick,v=void 0===h?null:h,b=e.dim,y=void 0!==b&&b,g=e.rel,x=void 0===g?"":g,j=(0,m.I0)();return(0,r.jsxs)("div",{className:"flex items-center justify-between pa1".concat(y?" gray":""),children:[(0,r.jsx)(we.Z,{href:(t=o,n=Ce.Z,(null!=n&&"undefined"!==typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):t instanceof n)?o.toNotebookURL():o),children:(0,r.jsx)("a",{rel:x,title:"".concat(o).concat(d?"\nImported by:\n".concat(d.join("\n")):""),className:"truncate overflow-hidden nowrap",children:o+""})}),(0,r.jsxs)("div",{className:"ml2 tr flex justify-end items-center nowrap",title:i,children:[l||null===v?(0,r.jsx)(s.sn,{disabled:!0,onClick:function(){},style:{lineHeight:.5,color:"var(--".concat(y?"gray":"dark-gray",")")},className:"bn pr1",text:a}):(0,r.jsx)(s.KM,{onClick:function(){v(),j({type:"upgradeDependency"})},style:{lineHeight:.5},className:"bn mr1",text:a}),(0,r.jsx)("button",{"data-cy":"".concat(c?"Locked":"Unlocked"," ").concat(o),disabled:!l&&null===p,style:{color:u?"var(--blue)":void 0,lineHeight:.5},onClick:p?function(){j({type:"toggleDependencyLock",locked:!c}),p()}:function(){},className:"ph0 flex items-center bn bg-transparent  ".concat(null!==p?"hover-black pointer dark-gray":"gray"),children:c?(0,r.jsx)(xe.Z,{}):(0,r.jsx)(je.Z,{})})]})]},"notebook-".concat(o))},Ze=n(11233),Ie=n(60803),De=n(60138),Ue=n(19170),Ve=(0,m.$j)((function(e){var t=e.notebook;return{regexSearch:t.regexSearch,searchTerm:t.searchTerm,searchResults:t.searchResults,selectedSearchResult:t.selectedSearchResult}}),(function(e){return{dispatch:e}}))((function(e){var t=e.regexSearch,n=e.searchTerm,o=e.searchResults,i=e.selectedSearchResult,a=e.dispatch,c=function(e){a({type:"setSearchTerm",searchTerm:e})},l=(0,Ue._)(o,i),u=o&&void 0!==l,d=function(){if(n&&t)try{new RegExp(n,"gu")}catch(e){return e.message||"invalid regex"}}();return(0,r.jsxs)("div",{className:"mh3",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(Ze.x,{type:"text",placeholder:"Find",value:n,autoFocus:!0,onChange:function(e){var t=e.target.value;return c(t)},className:"flex-auto",hasError:d,onKeyDown:function(e){"Enter"!==e.key||e.altKey||e.ctrlKey||e.metaKey?"Escape"!==e.key||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||(e.stopPropagation(),a({type:"dismissPane"})):(e.stopPropagation(),e.shiftKey?a({type:"selectPreviousSearchResult"}):a({type:"selectNextSearchResult"}))},id:"find-pane-input",leftElement:(0,r.jsx)("div",{children:(0,r.jsx)(De.Z,{className:"db moon-gray"})}),rightElement:(0,r.jsx)(s.hU,{icon:h.Z,onClick:function(){return c("")},style:{width:28,height:28,marginRight:2},colorless:!0,disabled:!n})}),(0,r.jsxs)("div",{className:"flex ml2",children:[(0,r.jsx)(s.hA,{icon:function(){return(0,r.jsx)(Ie.Z,{className:u?"":"moon-gray",style:{transform:"rotate(-180deg)"}})},title:"Previous search result",onClick:function(){return a({type:"selectPreviousSearchResult"})},disabled:!u,style:{borderRadius:"4px 0 0 4px",width:32,height:32},colorless:!0}),(0,r.jsx)(s.hA,{icon:function(){return(0,r.jsx)(Ie.Z,{className:u?"":"moon-gray"})},title:"Next search result",onClick:function(){return a({type:"selectNextSearchResult"})},disabled:!u,style:{borderRadius:"0 4px 4px 0",width:32,height:32,marginLeft:1},colorless:!0})]})]}),d&&(0,r.jsx)("div",{className:"red mt2",children:d})]})})),Te=n(17764),Fe=n(40287);function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Be=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){He(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor"},e,{children:[(0,r.jsx)("path",{d:"M8 9L8 3C8 2.44772 8.44772 2 9 2L11 2",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M5 6L8 9L11 6",strokeWidth:"2"}),(0,r.jsx)("circle",{cx:"8",cy:"14",r:"0.5"}),(0,r.jsx)("circle",{cx:"5",cy:"14",r:"0.5"}),(0,r.jsx)("circle",{cx:"11",cy:"14",r:"0.5"})]}))};function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qe=function(e){return(0,r.jsxs)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ze(e,t,n[t])}))}return e}({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor"},e,{children:[(0,r.jsx)("path",{d:"M8 9L8 3C8 2.44772 8.44772 2 9 2L11 2",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M5 6L8 9L11 6",strokeWidth:"2"}),(0,r.jsx)("circle",{cx:"8",cy:"14",r:"0.5"})]}))},We=(0,m.$j)((function(e){var t,n=e.page,r=e.notebook;return{replaceInputExpanded:n.replaceInputExpanded,replaceTerm:r.replaceTerm,canReplace:!!r.selectedSearchResult&&!!(null===(t=r.searchResults)||void 0===t?void 0:t.size)}}),(function(e){return{dispatch:e}}))((function(e){var t=e.canReplace,n=e.replaceInputExpanded,o=e.replaceTerm,i=e.dispatch;return(0,r.jsxs)("div",{className:"flex flex-column mt3 pa3 bt b--light-silver",children:[(0,r.jsxs)("button",{className:"f6 fw6 bn flex items-center bg-transparent b--transparent relative pointer pa0",onClick:function(){return i({type:"toggleReplaceInputExpanded"})},children:[n?(0,r.jsx)(Te.Z,{className:"mr1"}):(0,r.jsx)(Fe.Z,{className:"mr1"}),"Replace"]}),n&&(0,r.jsxs)("div",{className:"flex mt2",children:[(0,r.jsx)(Ze.x,{type:"text",placeholder:"Replace",value:o,onChange:function(e){var t=e.target.value;return i({type:"setReplaceTerm",replaceTerm:t})},className:"flex-auto",leftElement:(0,r.jsx)(se,{className:"moon-gray"}),onKeyDown:function(e){"Enter"!==e.key||e.altKey||e.ctrlKey||e.metaKey||(e.stopPropagation(),i({type:"replaceCurrent",trigger:"keypress",source:"findPane"}))},rightElement:(0,r.jsx)(s.hU,{icon:h.Z,onClick:function(){return i({type:"setReplaceTerm",replaceTerm:""})},style:{width:28,height:28,marginRight:2},colorless:!0,disabled:!o})}),(0,r.jsxs)("div",{className:"flex ml2",children:[(0,r.jsx)(s.hA,{icon:function(){return(0,r.jsx)(qe,{className:t?"":"moon-gray"})},title:"Replace Current",onClick:function(){return i({type:"replaceCurrent",trigger:"click",source:"findPane"})},disabled:!t,style:{borderRadius:"4px 0 0 4px",width:32,height:32},colorless:!0}),(0,r.jsx)(s.hA,{icon:function(){return(0,r.jsx)(Be,{className:t?"":"moon-gray"})},title:"Replace All",onClick:function(){return i({type:"replaceAll",trigger:"click",source:"findPane"})},disabled:!t,style:{borderRadius:"0 4px 4px 0",width:32,height:32,marginLeft:1},colorless:!0})]})]})]})})),Ye=n(33494),$e=n(53261),Ke=n(72760),Ge=function(e){var t=e.selectedSearchResult,n=e.node,o=e.searchResults,i=e.dispatch,a=$e.qz[n.mode].icon,s=(0,Ke.u2)(n),c=(0,p.useRef)(null);return(0,p.useEffect)((function(){c.current&&t&&(0,Ye.zT)(c.current)}),[t]),(0,r.jsxs)("div",{className:"ma3",children:[(0,r.jsxs)("div",{className:"mt3 mb1 flex items-center dark-gray monospace-bold",children:[(0,r.jsx)(a,{className:"mr1"}),s||(0,r.jsxs)("span",{className:"i",children:["unnamed (#",n.id,")"]})]}),o.map((function(e,o){var a=(null===t||void 0===t?void 0:t.nodeResultIndex)===o&&t.nodeId===n.id;return(0,r.jsx)("div",{className:"mh3",ref:a?c:null,"data-cy":"find-result-row",children:(0,r.jsxs)("button",{className:"w-100 pa1 tl bn br2 monospace ".concat(a?"bg-blue white":"bg-transparent hover-bg-light-silver"," "),onClick:function(){return i({type:"selectSearchResult",selectedSearchResult:{nodeId:n.id,nodeResultIndex:o}})},children:[(0,r.jsx)("span",{className:a?"o-70":"o-50",children:e.beforeText}),(0,r.jsx)("span",{className:"br1\n                ".concat(a?"bg-observable-orange black":"bg-observable-yellow","\n              "),children:e.termText}),(0,r.jsx)("span",{className:a?"o-70":"o-50",children:e.afterText})]})},o)}))]})},Je=(0,m.$j)((function(e){var t=e.notebook;return{model:t.model,selectedSearchResult:t.selectedSearchResult,searchResults:t.searchResults}}),(function(e){return{dispatch:e}}))((function(e){var t=e.model,n=e.selectedSearchResult,o=e.searchResults,i=e.dispatch;if(!o)return null;if(!(0,Ue.n)(o))return(0,r.jsx)("div",{className:"pa3",children:"No results"});var a=[],s=!0,c=!1,l=void 0;try{for(var u,d=t.nodes[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var f=u.value,p=o.get(f.id);p&&a.push((0,r.jsx)(Ge,{node:f,selectedSearchResult:n,searchResults:p,dispatch:i},f.id))}}catch(m){c=!0,l=m}finally{try{s||null==d.return||d.return()}finally{if(c)throw l}}return(0,r.jsx)("div",{className:"overflow-y-auto flex-auto bt b--light-silver",children:(0,r.jsx)("div",{children:a})})})),Xe=n(93314),Qe=(0,m.$j)((function(e){var t=e.page,n=e.notebook;return{findOptionsInputExpanded:t.findOptionsInputExpanded,caseSensitiveSearch:n.caseSensitiveSearch,wholeWordSearch:n.wholeWordSearch,regexSearch:n.regexSearch}}),(function(e){return{dispatch:e}}))((function(e){var t=e.findOptionsInputExpanded,n=e.caseSensitiveSearch,o=e.wholeWordSearch,i=e.regexSearch,a=e.dispatch;return(0,r.jsxs)("div",{className:"flex flex-column pa3 bt b--light-silver",children:[(0,r.jsxs)("button",{className:"f6 fw6 bn flex items-center bg-transparent b--transparent relative pointer pa0",onClick:function(){return a({type:"toggleFindOptionsExpanded"})},children:[t?(0,r.jsx)(Te.Z,{className:"mr1"}):(0,r.jsx)(Fe.Z,{className:"mr1"}),"Settings"]}),t&&(0,r.jsxs)("div",{className:"mt2",children:[(0,r.jsx)(Xe.X,{checked:n,onChange:function(){return a({type:"toggleCaseSensitiveSearch"})},label:"Case sensitive"}),(0,r.jsx)(Xe.X,{checked:o,onChange:function(){return a({type:"toggleWholeWordSearch"})},label:"Whole word"}),(0,r.jsx)(Xe.X,{checked:i,onChange:function(){return a({type:"toggleRegexSearch"})},label:"Regular expression"})]})]})})),et=(0,m.$j)((function(e){var t=e.notebook;return{searchResults:t.searchResults,selectedSearchResult:t.selectedSearchResult}}),null)((function(e){var t=e.searchResults,n=e.selectedSearchResult,o=(0,Ue._)(t,n),i=(0,Ue.n)(t);return(0,r.jsxs)("div",{className:"flex align-items pa3",children:[(0,r.jsx)("div",{className:"f5 fw6 near-black flex-auto lh-title",children:"Find and replace"}),(0,r.jsx)("div",{className:"f6 dark-gray",children:t?void 0===n?(0,r.jsx)(r.Fragment,{children:i}):(0,r.jsxs)(r.Fragment,{children:[o+1,(0,r.jsx)("span",{className:"gray",children:" of "}),i]}):null})]})})),tt=(0,m.$j)(null,(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch;return(0,r.jsxs)("div",{className:"bb b--light-silver w-100 flex flex-column",onKeyDown:function(e){e.altKey||e.metaKey||e.ctrlKey||("ArrowDown"===e.key?t({type:"selectNextSearchResult"}):"ArrowUp"===e.key&&t({type:"selectPreviousSearchResult"}))},children:[(0,r.jsxs)("div",{className:"flex flex-column",children:[(0,r.jsx)(et,{}),(0,r.jsx)(Ve,{}),(0,r.jsx)(We,{}),(0,r.jsx)(Qe,{})]}),(0,r.jsx)(Je,{})]})})),nt=n(62990);function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ot(e,t,n[t])}))}return e}function at(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ct=6e5,lt=new Set(["revert"]),ut=new Set(["pin","unpin"]);function dt(e,t){if(e.length){for(var n,r=[],o=0;o<e.length;o++)e[o].relevant?(n&&r.push(n),r.push([o,o]),n=void 0):n?n[1]=o:n=[o,o],delete e[o].relevant;return n&&r.push(n),{folds:r,events:e,title:t}}}var ft=n(87769),pt=n(93797),mt=n(99414),ht=n(71066),vt=n(98768),bt=n(89642),yt=n(8385);function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xt(e,t,n[t])}))}return e}function wt(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gt(e,t)}(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(e){var t=e.node_id,n=e,r=n.node_name,o=n.node_value_start,i=r||o?"":" empty cell";switch(e.type){case"insert_node":return"Added".concat(i);case"modify_node":return e.is_new?"Added".concat(i):e.node_old_name?"Renamed":"Edited".concat(i);case"remove_node":case"move_node":return"Removed".concat(i);case"pin_node":return"Pinned".concat(i);case"unpin_node":return"Unpinned".concat(i);case"modify_title":return"Titled \u201c".concat(e.title,"\u201d");case"modify_license":return null===e.license?"Removed license":"Licensed ".concat((0,bt.ax)(e.license));case"modify_copyright":return""!==e.copyright?"Copyright".concat(e.copyright.replace(/^copyright\b/i,"")):"Removed copyright notice";case"revert":return"Reverted to ".concat(t);case"create":return e.fork?"Forked from \u201c".concat(e.fork.title,"\u201d"):"Created";case"mode_node":var a=($e.qz[e.mode]||{label:""}).label;return"Mode ".concat(a);case"resolve_dependency":var s,c,l=e.specifier_type,u=e.specifier,d=e.value;if("notebook"!==l)return"";if(!d||!(null===(s=Ce.Z.parse(d))||void 0===s?void 0:s.version))return"Version lock for ".concat(u," was removed");var f=null===(c=Ce.Z.parse(d))||void 0===c?void 0:c.version;return"Locked ".concat(u," to version ").concat(f);case"modify_data":return"operations"in e.data?"Edited table":"Set database ".concat(e.data.source.name);case"modify_name":return e.node_old_name?"Renamed":"Named";default:return""}}function Ct(e){var t=e.merge;if(t){var n="Merged \u201c".concat(t.document.title,"\u201d");return(0,r.jsx)("span",{title:n,children:n})}var o=e,i=o.node_old_name,a=o.node_name,s=o.node_value_start,c=kt(e);return(0,r.jsxs)("span",{title:"".concat(c," ").concat("Renamed"===c?"".concat(i," to "):"").concat(a||s||""),children:[c," ","Renamed"===c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{style:{fontSize:"0.8rem"},className:"code",children:i})," ","to"," "]}),a||s?(0,r.jsxs)("span",{style:{fontSize:"0.8rem"},className:"code",children:[a||s," "]}):null]})}var Ot=function(e){var t=e.events,n=e.isVersioned,o=e.currentVersion,i=e.dispatch,s=!!wt(t).slice(1).length,c=!t.slice(1).some((function(e){return e.version===o})),u=(0,p.useState)(!c),d=u[0],f=u[1],m=(0,l.GS)(l.ro),h=m?{width:"2em",height:"2em"}:{width:"1.5em",height:"1.5em"},v=m?"3em":"2em";return(0,r.jsx)(r.Fragment,{children:t.map((function(e,t){var l=function(){i({type:"loadVersion",version:e.version})};if(c&&!d&&t>0)return null;var u=function(e){if(e.publish_time)return ft.Z;switch(e.type){case"create":return mt.Z;case"modify_license":case"modify_copyright":return pt.Z;case"pin_node":case"unpin_node":return ht.Z;case"resolve_dependency":var t,n=e.specifier_type,r=e.value;return"notebook"!==n||r&&(null===(t=Ce.Z.parse(r))||void 0===t?void 0:t.version)?xe.Z:je.Z;case"revert":return vt.Z;default:return J.Z}}(e),b=0===t,y=n&&e.version===o,g=y?"bg-light-blue":"bg-transparent",x=y?"white":b?"black":"gray",j=c?y?"white":"near-black":"moon-gray",w=c?y?"hover-light-silver":"hover-dark-gray":"",k=y?"white":e.latest_publish?"blue":"gray",C=y?"o-60 white":"moon-gray",O=(e.merge?e.merge:e).user;return(0,r.jsxs)(p.Fragment,{children:[(0,r.jsx)("div",{className:a().dynamic([["fb0916f873f838f8",[v]]])+" "+"cell cellStart ".concat(g),children:b&&s&&(0,r.jsx)("button",{onClick:function(e){e.stopPropagation(),f(!d)},disabled:!c,style:{width:m?v:"auto"},title:d?"Collapse history range":"Expand history range",className:a().dynamic([["fb0916f873f838f8",[v]]])+" "+"flex items-center justify-center pointer f7 lh-solid fw6 bg-transparent b--transparent br2 bn pa0 h-100 ".concat(j," ").concat(w),children:d?(0,r.jsx)(Te.Z,jt({},h)):(0,r.jsx)(Fe.Z,jt({},h))})}),(0,r.jsx)("div",{title:e.time&&(0,nt.Dh)(e.time),onClick:l,className:a().dynamic([["fb0916f873f838f8",[v]]])+" "+"cell ".concat(g," fw5 ").concat(x," tr nowrap"),children:e.time&&(0,nt.jD)(e.time)}),(0,r.jsx)("div",{title:(0,R.RX)(O),onClick:l,className:a().dynamic([["fb0916f873f838f8",[v]]])+" "+"cell ".concat(g),children:(0,r.jsx)(yt.q,{user:O,size:16,className:"v-top br-pill"})}),(0,r.jsx)("div",{onClick:l,className:a().dynamic([["fb0916f873f838f8",[v]]])+" "+"cell ".concat(g),children:(0,r.jsx)(u,{className:a().dynamic([["fb0916f873f838f8",[v]]])+" "+(k||"")})}),(0,r.jsx)("button",{onClick:l,tabIndex:0,className:a().dynamic([["fb0916f873f838f8",[v]]])+" "+"cell br0 bn ".concat(g," ").concat(k),children:e.latest_publish?(0,r.jsx)("span",{title:"Published (latest). ".concat(kt(e)),className:a().dynamic([["fb0916f873f838f8",[v]]])+" truncate",children:"Published (latest)"}):e.publish_time?(0,r.jsx)("span",{title:"Published. ".concat(kt(e)),className:a().dynamic([["fb0916f873f838f8",[v]]])+" truncate",children:"Published"}):(0,r.jsx)("span",{className:a().dynamic([["fb0916f873f838f8",[v]]])+" truncate",children:Ct(e)})}),(0,r.jsx)("div",{onClick:l,className:a().dynamic([["fb0916f873f838f8",[v]]])+" "+"cell cellEnd ".concat(g," tr"),children:(0,r.jsxs)("span",{className:a().dynamic([["fb0916f873f838f8",[v]]])+" "+(C||""),children:["v",e.version]})}),(0,r.jsx)(a(),{id:"fb0916f873f838f8",dynamic:[v],children:".cell.__jsx-style-dynamic-selector{display:-webkit-box;\ndisplay:-webkit-flex;\ndisplay:-ms-flexbox;\ndisplay:flex;\n-webkit-align-items:center;\n-webkit-box-align:center;\n-ms-flex-align:center;\nalign-items:center;\npadding:4px;\nheight:".concat(v,";\nmax-width:100%;\noverflow:hidden;\ncursor:pointer}\nbutton.cell.__jsx-style-dynamic-selector{padding:4px 2px}\n.cellStart.__jsx-style-dynamic-selector{border-top-left-radius:4px;\nborder-bottom-left-radius:4px;\nmargin-left:var(--spacing-small)}\n.cellEnd.__jsx-style-dynamic-selector{border-top-right-radius:4px;\nborder-bottom-right-radius:4px;\nmargin-right:var(--spacing-small);\npadding-right:var(--spacing-small)}")})]},t)}))})},St=function(e){var t=e.range,n=t.folds,o=t.events,i=t.title,s=e.isVersioned,c=e.currentVersion,l=e.dispatch,u=e.isFirst;return o.length?(0,r.jsxs)(r.Fragment,{children:[!u&&(0,r.jsx)("div",{style:{height:1},className:"jsx-72f872caad23174c spacer flex-auto mt3 bg-light-silver",children:(0,r.jsx)(a(),{id:"72f872caad23174c",children:".spacer.jsx-72f872caad23174c{grid-column-start:1;\ngrid-column-end:7}"})}),(0,r.jsxs)("div",{className:"jsx-d962454df8eed240 pt3 pb2 ph3 flex rangeHeader",children:[(0,r.jsx)("span",{className:"jsx-d962454df8eed240 mr1 f6 fw6 near-black",children:i}),(0,r.jsx)(a(),{id:"d962454df8eed240",children:".rangeHeader.jsx-d962454df8eed240{grid-column-start:1;\ngrid-column-end:7}"})]}),n.map((function(e,t){return(0,r.jsx)(Ot,{events:o.slice(e[0],e[1]+1),isVersioned:s,dispatch:l,currentVersion:c},"".concat(i).concat(t))}))]}):null},Nt=(0,m.$j)((function(e){return{notebook:e.notebook,currentUser:e.currentUser}}))((function(e){var t=e.notebook,n=e.currentUser,o=t.suggestionsTo;return o.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"jsx-448bdbec10f793c0 pt3 pb1 ph3 flex suggestionsEntry",children:[(0,r.jsx)("span",{className:"jsx-448bdbec10f793c0 mr1 f6 fw6 near-black",children:"Suggestions"}),(0,r.jsx)("hr",{style:{height:1,marginTop:"0.65em"},className:"jsx-448bdbec10f793c0 flex-auto mt2 bn bg-light-gray v-base"})]}),o.map((function(e,o){var i=e.creator,a=e.description,s=e.from_id,c=e.to_id;return(0,r.jsx)("div",{title:"View suggestion",className:"jsx-448bdbec10f793c0 br2 pa2 mt2 mh3 bg-washed-yellow suggestionsEntry",children:(0,r.jsx)(we.Z,{href:"/compare/".concat(c,"...").concat(s),children:(0,r.jsxs)("a",{onClick:function(){return function(e){var r=e.to_id,o=e.to_owner,i=e.from_id,a=e.from_owner;(0,C.MR)((0,C.ym)({type:"notebook:view:suggestion",data:{base:(0,C.tb)({id:r,owner:o},n),target:(0,C.tb)({id:i,owner:a},n),trigger:"click",source:"historyPane"},eventVersion:1,notebook:t,currentUser:n}))}(e)},className:"jsx-448bdbec10f793c0 no-underline",children:[(0,r.jsxs)("div",{className:"jsx-448bdbec10f793c0 flex items-center",children:[(0,r.jsx)(yt.q,{user:i,className:"br-100 mr2",size:16}),(0,R.RX)(i)]}),(0,r.jsxs)("div",{className:"jsx-448bdbec10f793c0 mid-gray f7 pt2",children:["\u201c",a,"\u201d"]})]})})},o)})),(0,r.jsx)(a(),{id:"448bdbec10f793c0",children:".suggestionsEntry.jsx-448bdbec10f793c0{grid-column-start:1;\ngrid-column-end:7}"})]}):null}));function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Mt=p.memo((function(e){var t=e.history,n=e.forkOf,o=e.autosave,i=e.version,s=e.dispatch,c=t&&function(e,t){var n=function(e){var n=o[e],r=n.user_id,a=n.publish_user_id,s=n.time,l=n.publish_time,u=at(n,["user_id","publish_user_id","time","publish_time"]),d=i.find((function(e){return n.version===e.to_end_version}));w.push(it({},u,{user:c.get(r),publish_user:c.get(a),time:s,publish_time:l,fork:t&&t.version===n.version?t:null,merge:d,relevant:!!(0===e||d||n.publish_time||lt.has(n.type)||"create"===n.type&&t||o[e-1].time.getTime()-n.time.getTime()>ct)&&!ut.has(n.type)}))},r=e.users,o=e.events,i=e.merges,a=e.identifiers,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,c=new Map,l=!0,u=!1,d=void 0;try{for(var f,p=r[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var m=f.value;c.set(m.id,m)}}catch(se){u=!0,d=se}finally{try{l||null==p.return||p.return()}finally{if(u)throw d}}var h=!0,v=!1,b=void 0;try{for(var y,g=i[Symbol.iterator]();!(h=(y=g.next()).done);h=!0){var x=y.value;c.set(x.user.id,x.user)}}catch(se){v=!0,b=se}finally{try{h||null==g.return||g.return()}finally{if(v)throw b}}var j=c.size;o=o.slice().reverse().filter((function(e){return"noop"!==e.type}));for(var w=[],k=0;k<o.length;k++)n(k);for(var C=new Map,O=new Map,S=new Map,N=new Map(a),L=w.length-1;L>=0;L--){var P=w[L];switch(P.type){case"modify_node":case"insert_node":var M=C.get(P.node_id);M&&P.node_name&&M!==P.node_name&&(P.node_old_name=M),C.set(P.node_id,P.node_name),O.set(P.node_id,P.node_value_start);break;case"move_node":case"pin_node":case"unpin_node":case"remove_node":C.get(P.node_id)?P.node_name=C.get(P.node_id):O.get(P.node_id)?P.node_value_start=O.get(P.node_id):N.has(P.node_id)&&Object.assign(P,N.get(P.node_id));break;case"modify_name":var E=C.get(P.node_id);E&&P.node_name&&E!==P.node_name&&(P.node_old_name=E),C.set(P.node_id,P.node_name);break;case"revert":S.set(P.version,P.node_id)}}var R=w.findIndex((function(e){return"create"===e.type}));w.splice(R+1,w.length);var _,A=0,Z=!0,I=!1,D=void 0;try{for(var U,V=w[Symbol.iterator]();!(Z=(U=V.next()).done);Z=!0){var T=U.value,F=+T.publish_time;if(F&&F>A&&(A=F,_=T),"revert"===T.type){for(var H=T.node_id;S.has(H);)H=S.get(H);T.node_id=H}}}catch(se){I=!0,D=se}finally{try{Z||null==V.return||V.return()}finally{if(I)throw D}}_&&(_.latest_publish=!0);var B=new Map,z=!0,q=!1,W=void 0;try{for(var Y,$=w[Symbol.iterator]();!(z=(Y=$.next()).done);z=!0){var K=Y.value,G=void 0;G=K.time?(0,nt.gE)(K.time,s)?(0,nt.vm)(K.time):(0,nt.um)(K.time,s)?(0,nt.mr)(K.time,{month:"short",day:"numeric"}):(0,nt.mr)(K.time,{month:"short",day:"numeric",year:"numeric"}):"Earlier";var J=B.get(G);J?J.push(K):(J=[K],B.set(G,J))}}catch(se){q=!0,W=se}finally{try{z||null==$.return||$.return()}finally{if(q)throw W}}var X=[],Q=!0,ee=!1,te=void 0;try{for(var ne,re=B[Symbol.iterator]();!(Q=(ne=re.next()).done);Q=!0){var oe=st(ne.value,2),ie=oe[0],ae=dt(oe[1],ie);ae&&X.push(ae)}}catch(se){ee=!0,te=se}finally{try{Q||null==re.return||re.return()}finally{if(ee)throw te}}return{ranges:X,events:w,userCount:j}}(t,n);return c?(0,r.jsx)("div",{className:"overflow-y-auto",children:(0,r.jsxs)("div",{className:"jsx-d511b6cc9924123c history",children:[(0,r.jsx)(Nt,{}),c.ranges.map((function(e,t){return(0,r.jsx)(St,{range:e,dispatch:s,isVersioned:!o,currentVersion:i,isFirst:0===t},t)})),(0,r.jsx)(a(),{id:"d511b6cc9924123c",children:".history.jsx-d511b6cc9924123c{display:grid;\ngrid-template-columns:auto auto auto auto 1fr auto;\n-webkit-align-items:center;\n-webkit-box-align:center;\n-ms-flex-align:center;\nalign-items:center}"})]})}):(0,r.jsx)("div",{className:"flex justify-center p4",children:(0,r.jsx)(Se.Z,{})})})),Et=(0,m.$j)((function(e){return{notebook:e.notebook}}),(function(e){return{dispatch:e}}))((function(e){var t=e.notebook,n=t.autosave,o=t.id,i=t.forkOf,a=t.model.version,s=e.dispatch,c=Pt((0,w.h_)("/document/".concat(o,"/history")),1)[0];return(0,r.jsxs)("div",{className:"overflow-y-auto w-100 pb3",children:[(0,r.jsx)("div",{className:"f5 fw6 lh-title near-black pa3 bb b--light-silver bg-white br3 br--top",style:{position:"sticky",top:0},children:"Version history"}),(0,r.jsx)(Mt,{history:c,forkOf:i,autosave:n,version:a,dispatch:s})]})})),Rt=(0,f.default)((function(){return Promise.all([n.e(1522),n.e(8850)]).then(n.bind(n,58850))}),{loadableGenerated:{webpack:function(){return[58850]}}}),_t=n(48373),At=n(96386),Zt=n(33042),It=n(78009);var Dt=14,Ut="var(--moon-gray)",Vt=function(e){var t=e.from,n=e.to,o=e.sign,i=e.yScale,a="circular"===(0,At.Do)(t,n);return(0,r.jsx)("path",{d:"M ".concat(3*o," 0 H ").concat(o*Dt/2," v ").concat(i(t.node,n.node)," h ").concat(o*(a?-1:1)*4),fill:"none",strokeWidth:"2",stroke:"currentColor"})},Tt=function(e){var t=e.node,n=e.nameClassName,o=(0,Ke.Qc)(t),i=(0,Ke.u2)(t),a=o.id,s=t.value;return a&&(s="".concat(s.slice(0,a.start)," ").concat(s.slice(a.end))),(s=s.trim()).length>255&&(s="".concat(s.slice(0,255),"\u2026")),(0,r.jsxs)("div",{className:"truncate code f7",title:"".concat(i?"".concat(i," "):"").concat(s),children:[i&&(0,r.jsxs)("span",{className:n,children:[i," "]}),s]})},Ft=p.memo((function(e){var t=e.node,n=e.connections,o=e.focusedNode,i=e.participants,s=e.selected,c=e.error,l=e.yScale,u=e.onSelect,d=t.id,f=n.get(t),p=f.up,m=f.down,h=f.isIsland,v=o?(0,At.Do)(f,n.get(o)):"none",b="none"===v,y="same"===v,g="direct downstream"===v||"indirect downstream"===v,x="direct upstream"===v||"indirect upstream"===v,j="direct downstream"===v||"direct upstream"===v;return(0,r.jsxs)("button",{"data-cy":v,style:{height:21,fontFamily:"inherit",color:c?"var(--red)":y||j?"var(--blue)":h||o?Ut:"black",paddingLeft:45,paddingTop:1,paddingBottom:1},onClick:function(){u({type:y?"blur":"focus",id:d},{focused:y,downstream:g,upstream:x,direct:j})},className:"jsx-5b348d2ff6ad01ac bg-white minimap-cell br2 bn pv0 pr0 bg-transparent tl w-100 flex relative pointer justify-between items-center",children:[(0,r.jsxs)("div",{style:{boxShadow:s?"inset 0 0 0 1.5px var(--washed-blue)":void 0},className:"jsx-5b348d2ff6ad01ac "+"flex minimap-cell-label h-100 w-100 ph1 items-center moon-gray br2 ".concat(y?"bg-blue white focused":""),children:[(0,r.jsx)(Tt,{node:t,nameClassName:y?"fw6":j?"blue":o?"":"black"}),i&&(0,r.jsx)(It.l,{size:14,participants:i,link:!1})]}),(0,r.jsxs)("svg",{style:{overflow:"visible",top:10.5,left:"calc(var( --spacing-extra-small ) + ".concat(17,"px)"),width:1,height:1},className:"jsx-5b348d2ff6ad01ac "+"absolute z-".concat(y?2:1),children:[(0,r.jsxs)("g",{transform:"translate(".concat(o?g?Dt:x?-14:0:0,", 0)"),className:"jsx-5b348d2ff6ad01ac",children:[!(o&&b)&&(0,r.jsxs)("g",{className:"jsx-5b348d2ff6ad01ac",children:[p.length&&(0,r.jsx)("path",{d:"M 0 0 h ".concat(-8),fill:"none",strokeWidth:"2",stroke:"currentColor",className:"jsx-5b348d2ff6ad01ac"}),m.length&&(0,r.jsx)("path",{d:"M 0 0 h ".concat(8),fill:"none",strokeWidth:"2",stroke:"currentColor",className:"jsx-5b348d2ff6ad01ac"})]}),(0,r.jsx)("circle",{r:h?1.5:3,fill:"currentColor",className:"jsx-5b348d2ff6ad01ac"})]}),y&&(0,r.jsxs)("g",{className:"jsx-5b348d2ff6ad01ac pen",children:[m.map((function(e,t){return(0,r.jsx)(Vt,{from:f,to:n.get(e),sign:1,yScale:l},t)})),p.map((function(e,t){return(0,r.jsx)(Vt,{from:f,to:n.get(e),sign:-1,yScale:l},t)}))]})]}),(0,r.jsx)(a(),{id:"5b348d2ff6ad01ac",children:".minimap-cell.jsx-5b348d2ff6ad01ac:hover .minimap-cell-label.jsx-5b348d2ff6ad01ac:not(.focused){background-color:var(--near-white)}"})]})})),Ht=(0,m.$j)((function(e){return{notebook:e.notebook,currentUser:e.currentUser}}),(function(e){return{dispatch:e}}))((function(e){var t=e.notebook,n=e.currentUser,o=e.dispatch,i=function(e,r){y?j(e):o(e),(0,C.MR)((0,C.ym)({type:"notebook:view:minimapClick",data:r,eventVersion:2,notebook:t,currentUser:n}))},a=t.model,s=t.editorStates,c=t.participants,u=t.focusId,d=t.selectionFocusId,f=t.selection,m=a.nodes,h=(0,p.useMemo)((function(){return function(e){var t=new Map,n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,c=s.node_ids,l=!0,u=!1,d=void 0;try{for(var f,p=c[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var m=f.value;t.has(m)?t.get(m).push(s):t.set(m,[s])}}catch(h){u=!0,d=h}finally{try{l||null==p.return||p.return()}finally{if(u)throw d}}}}catch(h){r=!0,o=h}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t}(c)}),[c]),v=(0,p.useMemo)((function(){return(0,At.E6)(m)}),[m]),b=(0,p.useMemo)((function(){return function(e,t){return 21*(m.indexOf(t)-m.indexOf(e))}}),[m]),y=(0,l.GS)(l.ro),g=(0,p.useState)(null),x=g[0],j=g[1],w="focus"===(null===x||void 0===x?void 0:x.type)?(0,Zt.DY)(a,x.id):"blur"===(null===x||void 0===x?void 0:x.type)?void 0:null!==u?(0,Zt.DY)(a,u):null!==d?(0,Zt.DY)(a,d):void 0,k=(0,p.useRef)(!1);return(0,p.useEffect)((function(){return k.current=!0,function(){k.current=!1}}),[]),(0,p.useEffect)((function(){return function(){x&&!k.current&&o(x)}}),[o,x]),(0,r.jsxs)("div",{className:"overflow-y-auto w-100",children:[(0,r.jsx)("div",{className:"f5 fw6 lh-title near-black pa3 bb b--light-silver bg-white z-3 br3 br--top",style:{position:"sticky",top:0},children:"Minimap"}),(0,r.jsx)("div",{className:"pa3",children:m.map((function(e){var t;return(0,r.jsx)(Ft,{node:e,connections:v,focusedNode:w,selected:f.has(e.id),participants:h.get(e.id),error:!!(null===(t=s.get(e.id))||void 0===t?void 0:t.field(_t.ei).length),yScale:b,onSelect:i},e.id)}))})]})})),Bt=n(76135),zt=n(64241),qt=n(17881),Wt=n(44754);function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Gt=[{title:"Inputs",snippets:Bt.Cq,docs:"/@observablehq/inputs?collection=@observablehq/inputs"},{title:"Plot",snippets:Bt.aS,docs:"/@observablehq/plot?collection=@observablehq/plot"},{title:"Manipulating Data",snippets:Bt.J4,docs:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array"},{title:"Imports",snippets:Bt.Xk,docs:"/@observablehq/introduction-to-imports"}];var Jt=function(e){var t=e.href,n=e.topic,o=e.dispatch;return(0,r.jsxs)("a",{href:t,target:"_blank",rel:"noopener noreferrer",onClick:function(){return o({type:"viewSnippetsDocs",topic:n})},className:"flex items-center blue no-underline",children:[(0,r.jsx)(zt.Z,{className:"mr1"}),"Docs"]})},Xt=function(e){var t=e.dispatch,n=e.label,o=e.apply,i=e.thumbnail,s=void 0===i?qt.Y:i;return(0,r.jsxs)("button",{title:"Insert ".concat(n.toLocaleLowerCase()," snippet"),onClick:function(){return t({type:"insertSnippet",apply:o,label:n})},className:"jsx-98319bc75a420d73 snippet mt2 db w-100 flex justify-start items-center pointer bn bg-transparent pa0",children:[(0,r.jsx)(s,{style:{borderRadius:5},className:"jsx-98319bc75a420d73 mr2 ba b--light-gray moon-gray snippet-thumbnail"}),(0,r.jsx)("div",{className:"jsx-98319bc75a420d73 flex-grow-1 flex justify-between items-center fw4",children:(0,r.jsx)("div",{className:"jsx-98319bc75a420d73 snippet-label",children:n})}),(0,r.jsx)(a(),{id:"98319bc75a420d73",children:".snippet.jsx-98319bc75a420d73:hover .snippet-label.jsx-98319bc75a420d73, .snippet.jsx-98319bc75a420d73:hover .snippet-thumbnail.jsx-98319bc75a420d73{color:var(--blue)}"})]},n)},Qt=(0,m.$j)((function(){return{}}),(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,n=(0,p.useState)([]),o=n[0],i=n[1],a=Kt((0,Wt.G)("",500),3),s=a[0],c=a[1],l=a[2];return(0,p.useEffect)((function(){l.length&&t({type:"filterSnippets",query:l})}),[l,t]),(0,r.jsxs)("div",{className:"overflow-y-auto w-100",children:[(0,r.jsxs)("div",{className:"bg-white bb b--light-silver pa3 br3 br--top",style:{position:"sticky",top:0},children:[(0,r.jsx)("div",{className:"f5 fw6 lh-title near-black",children:"Snippets"}),(0,r.jsxs)("div",{className:"relative mt3",children:[(0,r.jsx)(Ze.Z,{name:"filter",className:"db w-100 pl4",placeholder:"Search",type:"text",value:s,onChange:function(e){c(e.target.value),i(e.target.value.toLowerCase().split(/\s+/).filter((function(e){return e})))}}),(0,r.jsx)(De.Z,{className:"absolute",style:{color:"var(--moon-gray)",top:8,left:8}})]})]}),Gt.map((function(e,n){return(0,r.jsxs)("div",{className:"f6 fw6 lh-f6 near-black ph3 mb3".concat(n>0?" bt b--light-silver":""),children:[(0,r.jsxs)("div",{className:"mv3 flex justify-between items-center",children:[(0,r.jsx)("div",{children:e.title}),(0,r.jsx)(Jt,{dispatch:t,topic:e.title,href:e.docs})]}),e.snippets.filter((function(e){return function(e,t){return t.every((function(t){return e.toLowerCase().includes(t)}))}(e.label,o)})).map((function(e){return(0,r.jsx)(Xt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$t(e,t,n[t])}))}return e}({dispatch:t},e),e.label)}))]},e.title)}))]})}));function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tn(e){return function(e){if(Array.isArray(e))return en(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return en(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return en(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nn=(0,f.default)((function(){return n.e(9108).then(n.bind(n,99108))}),{loadableGenerated:{webpack:function(){return[99108]}}});function rn(e){var t=u.j;switch(e){case"help":return{pane:(0,r.jsx)(nn,{}),closeLabel:"help",width:t};case"data":return{pane:(0,r.jsx)(ge,{}),closeLabel:"data",width:t};case"history":return{pane:(0,r.jsx)(Et,{}),closeLabel:"history",width:t};case"snippets":return{pane:(0,r.jsx)(Qt,{}),closeLabel:"snippets",width:t};case"minimap":return{pane:(0,r.jsx)(Ht,{}),closeLabel:"minimap",width:u.l6};case"dependencies":return{pane:(0,r.jsx)(Ee,{}),closeLabel:"dependencies",width:t};case"insights":return{pane:(0,r.jsx)(Rt,{}),closeLabel:"insights",width:t};case"find":return{pane:(0,r.jsx)(tt,{}),closeLabel:"find",width:t};default:return{pane:null,closeLabel:"",width:0}}}var on=(0,m.$j)((function(e){var t=e.page;return{paneType:t.pane,helpArticlesOpen:t.helpArticlesOpen}}),(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,n=e.paneType,o=e.helpArticlesOpen,i=e.panes,f=rn(n),p=f.pane,m=f.closeLabel,v=f.width;return(0,r.jsxs)("div",{className:a().dynamic([["7d823b4a19606dcc",[u.Lv,l.hs,l.pp,u.Lv,u.Sf,v]]])+" flex fixed z-1",children:[p&&(0,r.jsxs)("div",{className:a().dynamic([["7d823b4a19606dcc",[u.Lv,l.hs,l.pp,u.Lv,u.Sf,v]]])+" mt3-l shadow-1-ns br3 self-start bg-white flex pane",children:[(0,r.jsx)("button",{onClick:function(){return t({type:"dismissPane"})},className:a().dynamic([["7d823b4a19606dcc",[u.Lv,l.hs,l.pp,u.Lv,u.Sf,v]]])+" absolute dn-l dismiss-button pointer pa3 bn bg-transparent z-4",children:(0,r.jsx)(h.Z,{"aria-label":"Close ".concat(m," pane")})}),p]},[n].concat(tn(o)).join()),(0,r.jsx)("div",{className:a().dynamic([["7d823b4a19606dcc",[u.Lv,l.hs,l.pp,u.Lv,u.Sf,v]]])+" gray hover-black mt3 ml1 sidebar animate-all dn db-l",children:i.map((function(e){var o=e.type,i=e.icon,a=e.label,l=e.count,u=e.signpost,f=e.badgeStyle,m=e.unimplemented,h=e.disabled,v=!(m||h),b=(0,r.jsx)(s.Ct,{count:l,badgeStyle:f,disabled:!v,colorless:!0,selected:n===o,children:(0,r.jsx)(s.hU,{icon:i,onClick:v?function(){return t({type:"togglePane",pane:o})}:void 0,onKeyDown:v?function(e){return"Escape"===e.key&&t({type:"dismissPane"})}:void 0,disabled:!v,selected:n===o,className:"ma2",colorless:!0,solidBackground:!0,title:(0,d.f)(m?"".concat(a," is not yet implemented"):"".concat(n===o?"Close":"Open"," ").concat(a))})},o);return u&&!p?(0,r.jsx)(c.y,{type:u,top:16,left:8,children:b},o):b}))}),(0,r.jsx)(a(),{id:"7d823b4a19606dcc",dynamic:[u.Lv,l.hs,l.pp,u.Lv,u.Sf,v],children:".fixed.__jsx-style-dynamic-selector{top:".concat(u.Lv,"px;\nright:var(--spacing-medium);\nbottom:0}\n@media ").concat(l.hs," {.fixed.__jsx-style-dynamic-selector{right:0}}\n.pane.__jsx-style-dynamic-selector{position:fixed;\ntop:0;\nright:0;\nbottom:0;\nleft:0}\n@media ").concat(l.pp," {.pane.__jsx-style-dynamic-selector{position:static;\nmax-height:calc(100vh - ").concat(u.Lv,"px - ").concat(u.Sf,"px - 38px);\nwidth: calc(\n              ").concat(v,"px - 2 * var(--spacing-small) - var(--spacing-extra-small) -\n                var(--width-2) \n            )}}\n.dismiss-button.__jsx-style-dynamic-selector{top:0;\nright:0}")})]})}))},586:function(e,t,n){n.d(t,{y:function(){return f}});var r=n(85893),o=n(34236),i=n(67294),a=n(40042),s=n(69475),c=n(34119),l=n(98807),u=n(89905),d=[{type:"help",title:"Want help?",content:function(){return(0,r.jsxs)(r.Fragment,{children:["Get started quickly with tutorials in the"," ",(0,r.jsxs)("b",{className:"dark-gray",children:[(0,r.jsx)(l.Z,{className:"nb1"})," Help"]})," ","pane. You\u2019ll also find shortcuts, docs, and support."]})}},{type:"settings",title:"Welcome!",content:function(){return(0,r.jsxs)(r.Fragment,{children:["Finish setting up your profile by choosing a name, avatar, and more in"," ",(0,r.jsxs)("b",{className:"dark-gray",children:[(0,r.jsx)(c.Z,{className:"nb1"})," Settings"]}),"."]})}}],f=(0,a.$)((function(e){return{currentUser:e.currentUser,currentSignpost:e.decorations.signpost}}),(function(e){return{dispatch:e}}))((function(e){var t=e.type,n=e.top,a=e.right,c=e.bottom,l=e.left,f=e.children,p=e.currentUser,m=e.currentSignpost,h=e.dispatch,v=(0,i.useRef)(null),b=(0,o.E)(v),y=d.find((function(e){return e.type===t})),g=null===m&&(0,s.M)(p,t),x=(0,i.useState)(!1),j=x[0],w=x[1];return(0,i.useEffect)((function(){g&&b&&!j&&(w(!0),h({type:"requestSignpost",signpost:t}))}),[g,b,j,t,h]),m!==t?null===m&&g?(0,r.jsx)("div",{className:"relative",ref:v,children:f}):(0,r.jsx)(r.Fragment,{children:f}):(0,r.jsxs)("div",{className:"relative",children:[f,(0,r.jsxs)("div",{className:"absolute",style:{top:n,right:a,bottom:c,left:l,filter:"drop-shadow(0 0 10px rgba(0,0,0,0.1))",willChange:"transform"},children:[(0,r.jsxs)("div",{className:"absolute w5 bg-white mid-gray ba b--silver pa3 br2",style:{top:-30,right:void 0!==l?14:void 0,left:void 0!==a?14:void 0},children:[(0,r.jsxs)("div",{className:"flex mb2 near-black",children:[(0,r.jsxs)("div",{className:"flex items-center flex-grow-1 fw6",children:[(0,r.jsx)("span",{className:"bg-light-purple white f7 fw7 pa1 br2 mr2",children:"Tip"}),y.title]}),(0,r.jsx)("button",{className:"flex dark-gray bg-transparent hover-bg-black-05 pointer pa2 nt1 nb1 nr1 bn br-100",title:"Hide tip","aria-label":"Hide tip",onClick:function(){return h({type:"dismissSignpost",trigger:"click"})},children:(0,r.jsx)(u.Z,{})})]}),(0,r.jsx)("div",{className:"lh-copy",children:(0,r.jsx)(y.content,{})})]}),(0,r.jsx)("svg",{className:"absolute",style:{top:-20,left:void 0!==l?-16:void 0,right:void 0!==a?-16:void 0},width:"16",height:"40",children:(0,r.jsx)("path",{stroke:"#E8E8E8",fill:"white",transform:void 0!==l?"rotate(180 8,20)":void 0,d:"M15,5 L0,20 L10,30 L15,35"})})]})]})}))},33724:function(e,t,n){n.d(t,{w:function(){return i}});var r=n(69441),o=n(76020);function i(e){var t=new r.Z(e.dispatch);return t.setState(e.getState().notebook),(0,o.x)(e,(function(){var n=e.getState(),r=n.notebook.transactions;delete n.notebook.transactions,t.setState(n.notebook,r)})),t}},82893:function(e,t,n){n.d(t,{O:function(){return o}});var r=n(67294);function o(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r.useRef)(null),n=(0,r.useRef)(null),o=(0,r.useState)(e),i=o[0],a=o[1],s=(0,r.useCallback)((function(e){e&&t.current&&t.current.contains(e.target)&&(e.stopPropagation(),e.preventDefault()),e&&e.currentTarget&&"A"===e.currentTarget.tagName&&(e.shiftKey||e.altKey||e.metaKey)||a(!1)}),[t]),c=(0,r.useCallback)((function(){a(!0)}),[]);return(0,r.useEffect)((function(){var e=function(e){i&&n.current&&!n.current.contains(e.target)&&s(e)},t=function(e){i&&"Escape"===e.key&&s(e)};return i&&(addEventListener("click",e,!0),addEventListener("touchstart",e,{passive:!1,capture:!0}),addEventListener("keydown",t,!0)),function(){removeEventListener("click",e,!0),removeEventListener("touchstart",e,{capture:!0}),removeEventListener("keydown",t,!0)}}),[s,i]),{open:i,openMenu:c,closeMenu:s,triggerRef:t,uiRef:n}}},34236:function(e,t,n){n.d(t,{E:function(){return s}});var r=n(67294);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a="undefined"!==typeof IntersectionObserver;function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.root,o=void 0===n?null:n,s=t.rootMargin,c=void 0===s?"0px":s,l=t.threshold,u=void 0===l?0:l,d=t.defaultValue,f=void 0===d?!a:d,p=(0,r.useState)(f),m=p[0],h=p[1],v=(0,r.useMemo)((function(){return a?new IntersectionObserver((function(e){var t=i(e,1)[0];h(t.isIntersecting)}),{root:o,rootMargin:c,threshold:u}):null}),[o,c,u]);return(0,r.useEffect)((function(){var t=e.current;return t&&v?(v.observe(t),function(){v.disconnect()}):void 0}),[v,e]),m}},48873:function(e,t,n){n.d(t,{a:function(){return p},w:function(){return m}});var r=n(34051),o=n.n(r),i=n(40802),a=n(99248),s=n(602),c=n(4598);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,s,"next",e)}function s(e){u(i,r,o,a,s,"throw",e)}a(void 0)}))}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){var t=/^([a-zA-Z]+):\/\/(.*)$/.exec(e.specifier);if(!t)return null;var n=Object.entries(c.c).find((function(e){return f(e,2)[1].shorthand===t[1]}));return n?{provider:n[0],name:t[2],specifier:e.specifier,path:e.value}:null}function m(e,t){return h.apply(this,arguments)}function h(){return(h=d(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p(n)){e.next=4;break}throw(0,i.uT)("Invalid cloud file path: ".concat(n.value)),new Error("Invalid cloud file path.");case 4:return e.abrupt("return",v(t,r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return b.apply(this,arguments)}function b(){return(b=d(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,i="team"===t.type?"/team/".concat(t.id):"/user",e.next=5,(0,s.Fv)("".concat(i,"/cloud-file/token"),{provider:n.provider,path:n.path});case 5:r=e.sent,e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),new Error(a.t5);case 11:return e.abrupt("return","".concat("https://connector.observableusercontent.com","/file?token=").concat(encodeURIComponent(r)));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}},87099:function(e,t,n){function r(e,t){var n=URL.createObjectURL(e);o(n,t),URL.revokeObjectURL(n)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=document.createElement("a");n.style.display="none",n.href=e,n.download=t,document.body.appendChild(n),n.click(),n.remove()}n.d(t,{L:function(){return r},G:function(){return o}})},47743:function(e,t,n){n.d(t,{ty:function(){return s},eJ:function(){return l},N6:function(){return u},wA:function(){return f},SW:function(){return p},__:function(){return m}});var r=n(34051),o=n.n(r);function i(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}function s(e){return!!/drive\/v3\/files\/.*/.test(e)}var c,l="614404957759",u="AIzaSyAjxeAzLAiTpmClMsnQ6OuZMg5BC7AckCA",d=new Map([["application/vnd.google-apps.document","text/html"],["application/vnd.google-apps.drawing","image/svg+xml"],["application/vnd.google-apps.form","text/html"],["application/vnd.google-apps.map","text/html"],["application/vnd.google-apps.photo","image/jpeg"],["application/vnd.google-apps.presentation","application/pdf"],["application/vnd.google-apps.script","text/plain"],["application/vnd.google-apps.site","text/html"],["application/vnd.google-apps.spreadsheet","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]]);function f(e,t){return["".concat("https://www.googleapis.com").concat(e),t]}function p(e){return d.get(e)}function m(){return h.apply(this,arguments)}function h(){return(h=a(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c||(c=new Promise((function(e){var t="gapiLoaded"+Math.random(),n=document.createElement("script");n.src="https://apis.google.com/js/api.js?onload="+t,window[t]=function(){e(window.gapi),delete window[t]},document.head.appendChild(n)}))),e.abrupt("return",c);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},31115:function(e,t,n){function r(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){if(t(i.value))return!0}}catch(s){r=!0,o=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return!1}function o(e,t){return e.length===t.length&&e.every((function(e){return t.includes(e)}))&&t.every((function(t){return e.includes(t)}))}n.d(t,{G:function(){return r},u:function(){return o}})},65062:function(e,t,n){n.d(t,{Lv:function(){return r},MT:function(){return o},j:function(){return i},l6:function(){return a},Mv:function(){return s},KI:function(){return c},NQ:function(){return l},T6:function(){return u},Sf:function(){return d},re:function(){return f}});var r=55,o=52,i=386,a=280,s=14,c=17,l=25,u=29,d=41,f=20},89642:function(e,t,n){n.d(t,{B5:function(){return i},ax:function(){return a},nm:function(){return s}});var r=n(36448),o=new Map(Object.entries({"agpl-3.0":{short:"GNU AGPLv3",long:"GNU Affero General Public License v3.0"},"apache-2.0":{short:"Apache 2.0",long:"Apache License "},"bsd-3-clause":{short:"BSD 3-Clause",long:"BSD 3-Clause \u201cNew\u201d or \u201cRevised\u201d License"},"cc-by-4.0":{short:"CC BY 4.0",long:"Creative Commons Attribution 4.0 International"},"cc-by-sa-4.0":{short:"CC BY-SA 4.0",long:"Creative Commons Attribution Share Alike 4.0 International"},"gpl-3.0":{short:"GNU GPLv3",long:"GNU General Public License v3.0"},isc:{short:"ISC",long:"ISC License"},"lgpl-3.0":{short:"GNU LGPLv3",long:"GNU Lesser General Public License v3.0"},mit:{short:"MIT",long:"MIT License"},other:{short:"Other",long:"Other"}})),i=Array.from(o.keys());function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"short";if(!e)return"None";var n=o.get(e);if(!n)throw new Error("Unknown license identifier: ".concat(e));return n[t]}function s(e){return"Copyright ".concat((new Date).getFullYear()," ").concat((0,r.RX)(e))}},8802:function(e,t,n){n.d(t,{Z:function(){return i}});var r=0,o=new WeakMap;function i(e){var t=o.get(e);return void 0===t&&o.set(e,t=r++),t}},56912:function(e,t,n){n.d(t,{xT:function(){return f},$r:function(){return p},ng:function(){return h},uF:function(){return v}});var r=n(602),o=n(67294),i=n(33042),a=n(928),s=n(58671);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function f(e){return!!e&&"error"in e}function p(e){var t=e.imports,n=l(t,1)[0],r=l(void 0===n?[]:n,1)[0];if(!r)return{mainSpecifier:r,directImports:new Map};var o=u(new Set(t.flat())).map((function(e){return{specifier:e,children:[],childrenSet:new Set}})),i=new Map(o.map((function(e){return[e.specifier,e]}))),a=new Map,s=!0,c=!1,d=void 0;try{for(var f,p=t[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var h=l(f.value,2),v=h[0],b=h[1];v===r&&a.set(b,[]);var y=i.get(v),g=i.get(b);y.childrenSet.has(b)||(y.childrenSet.add(b),y.children.push(g))}}catch(S){c=!0,d=S}finally{try{s||null==p.return||p.return()}finally{if(c)throw d}}var x=!0,j=!1,w=void 0;try{for(var k,C=a.keys()[Symbol.iterator]();!(x=(k=C.next()).done);x=!0){var O=k.value;a.set(O,m(i.get(O),r))}}catch(S){j=!0,w=S}finally{try{x||null==C.return||C.return()}finally{if(j)throw w}}return{mainSpecifier:r,directImports:a}}function m(e,t){var n=e.specifier,r=e.children,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;return o.has(n)?[]:(o.add(n),[[t,n]].concat(u(r.flatMap((function(e){return m(e,n,o)})))))}function h(e,t,n){var r=new Map(n.filter((function(e){return"notebook"===e.type})).map((function(e){var t=e.specifier,n=e.value;return[t,a.Z.parse(n)]}))),o=new Map(Object.entries(e).map((function(e){var t,n=l(e,2),o=n[0],i=n[1],s=r.has(o)?r.get(o).version:void 0,c=f(i)||null===(t=a.Z.parse(i.resolution))||void 0===t?void 0:t.version;return[o,{lockStatus:void 0!==s?"locked":"unlocked",version:s,latestVersion:c,updatesAvailable:void 0!==s&&s!==c}]}))),i=!0,s=!1,c=void 0;try{for(var u,d=t[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var p=l(u.value,2),m=p[0],h=p[1],v=0,b=!1,y=!0,g=!1,x=void 0;try{for(var j,w=h[Symbol.iterator]();!(y=(j=w.next()).done);y=!0){var k=l(j.value,2)[1],C=o.get(k);v+="locked"===(null===C||void 0===C?void 0:C.lockStatus)?1:0,b=b||!!(null===C||void 0===C?void 0:C.updatesAvailable)}}catch(S){g=!0,x=S}finally{try{y||null==w.return||w.return()}finally{if(g)throw x}}var O=o.get(m);O&&(O.lockStatus=v===h.length?"locked":0===v?"unlocked":"mixed",O.updatesAvailable=b)}}catch(S){s=!0,c=S}finally{try{i||null==d.return||d.return()}finally{if(s)throw c}}return o}function v(e){var t=e.id,n=e.saveVersion,a=e.model,c=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreResolutions,u=(0,o.useRef)(n),d=(0,o.useRef)(a.history.length),f=(0,o.useRef)(),p=(0,o.useRef)(new Set(a.nodes.map((function(e){return"import"===(0,s.Z)(e).type?e.id:void 0})).filter((function(e){return e})))),m=a.history.slice(d.current),h=!0,v=!1,b=void 0;try{for(var y,g=m[Symbol.iterator]();!(h=(y=g.next()).done);h=!0){var x=y.value,j=x.type,w=x.version;switch(j){case"insert_node":case"modify_node":var k=x.node_id,C=(0,i.DY)(a,k);if(!C)break;var O=(0,s.Z)(C);"import"===O.type&&(p.current.add(k),u.current=w);break;case"remove_node":var S=x.node_id;p.current.has(S)&&(p.current.delete(S),u.current=w);break;case"resolve_dependency":u.current=w}}}catch(E){v=!0,b=E}finally{try{h||null==g.return||g.return()}finally{if(v)throw b}}d.current=a.history.length;var N="".concat(t,"@").concat(Math.min(n,u.current)),L="/document/".concat(N,"/imports").concat(c?"":"?resolutions=".concat(N));try{var P=l((0,r.h_)(L),1),M=P[0];return M&&(f.current=M),f.current}catch(R){return console.error("notebook import resolutions failed to load."),f.current}}},76020:function(e,t,n){n.d(t,{Q:function(){return i},x:function(){return a}});var r=n(73935),o=new WeakMap;function i(e){var t=o.get(e);if(t)return t;var n=[];return t=function(t){n.push(t),1===n.length&&Promise.resolve().then((function(){(0,r.unstable_batchedUpdates)((function(){n.splice(0,n.length).forEach(e.dispatch)}))}))},o.set(e,t),t}function a(e,t){var n=e.getState();return e.subscribe((function(){var r=e.getState();r!==n&&(n=r,t())}))}},4242:function(e,t,n){n.d(t,{$j:function(){return o},v9:function(){return i},I0:function(){return a},zt:function(){return r.zt}});var r=n(14416),o=(0,n(54924).S)(),i=(0,r.gR)();function a(){return(0,r.I0)()}},98957:function(e,t,n){n.d(t,{O:function(){return o}});var r=n(11163),o=function(e,t){var n=t.base,o=t.target,i="".concat(n.id).concat(n.version?"@".concat(n.version):""),a="".concat(o.id).concat(o.version?"@".concat(o.version):"");r.default.push("/compare/".concat(i,"...").concat(a))}},59201:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{lx:function(){return o},Ez:function(){return i},rE:function(){return a},bI:function(){return s},Yd:function(){return c},GJ:function(){return l},LZ:function(){return u},Gr:function(){return d}});var o=function(e,t){var n=t.pane,o=t.focusKeyboardShortcuts;return e.pane===n?{pane:null}:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){r(e,t,n[t])}))}return e}({pane:n},o&&{helpArticlesOpen:[],helpPaneSectionsOpen:new Set(["keyboardShortcuts"])})},i=function(e,t,n){var r=e.page,o=e.decorations.signpost,i=t.pane;r.pane!==i&&o&&o===function(e){switch(e){case"help":return"help";default:return null}}(i)&&n({type:"dismissSignpost",trigger:"Implicit"})},a=function(){return{pane:null}},s=function(e){return{collectionsSidebarOpen:!e.collectionsSidebarOpen}},c=function(e,t){return{collectionsSidebarOpen:!t.orphaned&&e.collectionsSidebarOpen}},l=function(e,t){var n=e.helpPaneSectionsOpen,r=t.section;return(n=new Set(n)).has(r)?n.delete(r):n.add(r),{helpPaneSectionsOpen:n}},u=function(e,t){var n=e.helpArticlesOpen,r=t.article;return{helpArticlesOpen:t.reset?[r]:n.concat(r)}},d=function(e){return{helpArticlesOpen:e.helpArticlesOpen.slice(0,-1)}}},16432:function(e,t,n){n.d(t,{C:function(){return Z}});var r=n(30169),o=n(19671),i=n(33042),a=function(e,t){var n=e.notebook,r=e.currentUser,i=t.id;(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:insert",data:{cellIds:[i]},eventVersion:3,notebook:n,currentUser:r}))},s=function(e,t){var n=e.notebook,r=e.currentUser,i=t.id;(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:move",data:{cellIds:[i]},eventVersion:3,notebook:n,currentUser:r}))},c=function(e,t){var n=e.notebook,r=e.currentUser,a=t.id;(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:split",data:{cellIds:[a],mode:(0,i.DY)(n.model,a).mode},eventVersion:1,notebook:n,currentUser:r}))},l=n(88725),u=n(19170),d=n(24205);function f(e,t,n,r){switch(e){case"snippets":(0,o.MR)((0,o.ym)({type:"notebook:view:snippetsPaneDismissed",data:{newPaneOpened:t},eventVersion:1,notebook:n,currentUser:r}));break;case"help":(0,o.MR)((0,o.ym)({type:"notebook:view:helpPaneDismissed",data:{newPaneOpened:t},eventVersion:1,notebook:n,currentUser:r}));break;case"data":(0,o.MR)((0,o.ym)({type:"notebook:view:dataPaneDismissed",data:{newPaneOpened:t},eventVersion:1,notebook:n,currentUser:r}));break;case"history":(0,o.MR)((0,o.ym)({type:"notebook:view:historyPaneDismissed",data:{newPaneOpened:t},eventVersion:1,notebook:n,currentUser:r}));break;case"minimap":(0,o.MR)((0,o.ym)({type:"notebook:view:minimapPaneDismissed",data:{newPaneOpened:t},eventVersion:1,notebook:n,currentUser:r}));break;case"insights":(0,o.MR)((0,o.ym)({type:"notebook:view:insightsPaneDismissed",data:{newPaneOpened:t},eventVersion:1,notebook:n,currentUser:r}));break;case"find":(0,o.MR)((0,o.ym)({type:"notebook:view:findPaneDismissed",data:{newPaneOpened:t},eventVersion:1,notebook:n,currentUser:r}))}}var p=n(21571),m=n(6025),h=n(60066),v=n(6022),b=n(98957),y=n(47977),g=n(34051),x=n.n(g),j=n(87099);function w(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,o)}var k=function(){var e,t=(e=x().mark((function e(t){var n,r,o,i,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.notebook,r=n.id,o=n.saveVersion,e.next=4,fetch("".concat("https://api.observablehq.com","/document/").concat(r,"@").concat(o,"/download"),{credentials:"include"});case 4:return i=e.sent,e.next=7,i.json();case 7:a=e.sent.tarball_path,(0,j.G)("".concat("https://api.observablehq.com").concat(a));case 9:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){w(i,r,o,a,s,"next",e)}function s(e){w(i,r,o,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),C=n(91460),O=n(17152),S=n(3729),N=n(91398),L=n(59201),P=n(51133),M=n(38559),E=n(99223),R=n(99494),_=n(3361),A=n(8740),Z={acceptSnippet:R.eY,acknowledgeSuggestionClosed:A.G6,closeSuggestion:A.nK,closeSuggestionSucceeded:d.JB,cloudFileSnippet:y.zX,commentComposeCancel:function(e,t){var n,r=e.notebook,i=e.currentUser,a=t.nodeId,s=t.trigger,c=t.content,l=t.source;(0,o.MR)((0,o.ym)({type:"notebook:cells:comment:cancel",data:{cellIds:[a],length:c.length,trigger:s,source:l},eventVersion:4,notebook:r,currentUser:i})),r.comments.has(a)&&0!==(null===(n=r.comments.get(a))||void 0===n?void 0:n.length)||(0,o.MR)((0,o.ym)({type:"notebook:cells:comment:hideComments",data:{cellIds:[a],cancelCompose:!0,trigger:s,source:"commentBox"},eventVersion:2,notebook:r,currentUser:i}))},commentComposeOpen:function(e,t){var n=e.notebook,r=e.currentUser,i=t.nodeId,a=t.trigger,s=t.source;(0,o.MR)((0,o.ym)({type:"notebook:cells:comment:openCompose",data:{cellIds:[i],trigger:a,source:s},eventVersion:3,notebook:n,currentUser:r}))},commentCreated:function(e,t){var n=e.notebook,r=e.currentUser,i=t.nodeId,a=t.source,s=(0,l.o7)(n,i),c=(0,l.HS)(n,i),u=new Set,d=!0,f=!1,p=void 0;try{for(var m,h=c[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){var v=m.value;u.add(v.user.id)}}catch(C){f=!0,p=C}finally{try{d||null==h.return||h.return()}finally{if(f)throw p}}var b=!0,y=!1,g=void 0;try{for(var x,j=s[Symbol.iterator]();!(b=(x=j.next()).done);b=!0){var w=x.value;u.add(w.user.id)}}catch(C){y=!0,g=C}finally{try{b||null==j.return||j.return()}finally{if(y)throw g}}var k=c.some((function(e){return e.user.id===(null===r||void 0===r?void 0:r.id)}))||s.some((function(e){return e.user.id===(null===r||void 0===r?void 0:r.id)}));(0,o.MR)((0,o.ym)({type:"notebook:cells:comment:submit",data:{cellIds:[i],commentsOnCell:c.length+s.length,unresolvedCommentsOnCell:c.length,commentersOnCell:u.size,userHasCommentedOnCell:k,trigger:"click",source:a},eventVersion:4,notebook:n,currentUser:r}))},commentDeleted:function(e,t){var n=e.notebook,r=e.currentUser,i=t.comment,a=t.trigger,s=t.source;(0,o.MR)((0,o.ym)({type:"notebook:cells:comment:delete",data:{cellIds:[i.node_id],userIsCommentAuthor:i.user.id===(null===r||void 0===r?void 0:r.id),trigger:a,source:s},eventVersion:3,notebook:n,currentUser:r}))},commit:function(e,t){var n=e.notebook,r=e.currentUser,i=t.id,a=t.trigger;(0,o.MR)((0,o.ym)({type:"notebook:cells:edit:evaluate",data:{cellIds:[i],trigger:a},eventVersion:5,notebook:n,currentUser:r}))},copyFileCode:[C.Nz,d.Hf],dismissPane:function(e){var t=e.notebook,n=e.page,r=e.currentUser;f(n.pane,null,t,r)},dismissWelcomeMatBanner:function(){(0,o.MR)((0,o.a$)({type:"marketing:view:dismissWelcomeBanner",data:{experiment:null},eventVersion:1,currentUser:null}))},dragEnded:s,downloadCode:[k,d.kg],downloadCloudFile:y.Tv,downloadFile:d.lA,enableAutosave:m.T,fileMarkedForDeletion:d.hO,fileReplaced:d.tq,filterSnippets:R.eN,focusDefinition:function(e,t){var n=e.notebook,r=e.currentUser,i=t.id,a=t.trigger,s=t.source;(0,o.MR)((0,o.ym)({type:"notebook:cells:view:focusDefinition",data:{cellIds:[i],trigger:a,source:s},eventVersion:1,notebook:n,currentUser:r}))},focusError:function(e,t){var n=e.notebook,r=e.currentUser,i=t.id;(0,o.MR)((0,o.ym)({type:"notebook:cells:view:focusError",data:{cellIds:[i]},eventVersion:1,notebook:n,currentUser:r}))},forkRequested:O.J1,embedModalCopy:d.M6,helpPaneLinkClicked:function(e,t){var n=e.notebook,r=e.currentUser,i=t.section,a=t.url;(0,o.MR)((0,o.ym)({type:"notebook:view:helpPaneLink",data:{section:i,url:a},eventVersion:1,notebook:n,currentUser:r}))},hideComments:function(e,t){var n=e.notebook,r=e.currentUser,i=t.nodeId,a=t.trigger,s=t.source;(0,o.MR)((0,o.ym)({type:"notebook:cells:comment:hideComments",data:{cellIds:[i],cancelCompose:!1,trigger:a,source:s},eventVersion:2,notebook:n,currentUser:r}))},insertAfter:a,insertBefore:a,insertCloudFile:y.Xm,insertDatabase:y._E,insertFile:d.Nl,insertSnippet:R.ns,like:N.v,liked:function(e,t){var n=e.notebook,r=e.currentUser,i=t.liked;(0,o.MR)((0,o.ym)({type:i?"notebook:social:like":"notebook:social:unlike",data:{},eventVersion:4,notebook:n,currentUser:r}))},loadCompare:[b.O,function(e,t){var n=e.notebook,r=e.currentUser,i=t.trigger,a=t.source,s=t.base,c=t.target,l=t.loadType;if("reverse"!==l){var u;switch(l){case"fork":u="notebook:view:compareFork";break;case"latest":u="notebook:view:compareLatest";break;case"published":u="notebook:view:comparePublished"}(0,o.MR)((0,o.ym)({type:u,data:{base:(0,o.tb)(s,r),target:(0,o.tb)(c,r),trigger:i,source:a},eventVersion:1,notebook:n,currentUser:r}))}}],loadVersion:S.n,loadedVersion:function(e){var t=e.notebook,n=e.currentUser;(0,o.MR)((0,o.ym)({type:"notebook:view:historyNavigate",data:{navigationType:"version"},eventVersion:4,notebook:t,currentUser:n}))},localFilesAttached:[C.eV,d.fe],moveDown:s,moveUp:s,notebookFilePickerOpened:d.Bv,openHelpArticle:function(e,t){var n=e.notebook,r=e.currentUser,i=t.article;(0,o.MR)((0,o.ym)({type:"notebook:view:helpArticleOpened",data:{article:i},eventVersion:1,notebook:n,currentUser:r}))},relicense:d.mB,remove:function(e,t){var n=e.notebook,r=e.currentUser,i=t.id;(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:delete",data:{cellIds:[i],includesLastCell:1===n.model.nodes.length},eventVersion:4,notebook:n,currentUser:r}))},requestSnippets:R.d1,removeCloudFile:y.kc,resolveComments:function(e,t){var n=e.notebook,r=e.currentUser,i=t.nodeId,a=t.trigger,s=t.source;(0,o.MR)((0,o.ym)({type:"notebook:cells:comment:resolve",data:{cellIds:[i],commentCount:(0,l.HS)(n,i).length,trigger:a,source:s},eventVersion:3,notebook:n,currentUser:r}))},revertRequested:P._$,replaceCurrent:function(e,t){var n=e.notebook,r=e.currentUser,i=t.trigger,a=t.source,s=n.caseSensitiveSearch,c=n.wholeWordSearch,l=n.regexSearch;(0,o.MR)((0,o.ym)({type:"notebook:edit:replaceCurrent",data:{numSearchResults:(0,u.n)(n.searchResults),caseSensitiveSearch:s,wholeWordSearch:c,regexSearch:l,trigger:i,source:a},eventVersion:1,notebook:n,currentUser:r}))},replaceAll:[M.Rt,function(e,t){var n=e.notebook,r=e.currentUser,i=t.trigger,a=t.source,s=n.caseSensitiveSearch,c=n.wholeWordSearch,l=n.regexSearch;(0,o.MR)((0,o.ym)({type:"notebook:edit:replaceAll",data:{numSearchResults:(0,u.n)(n.searchResults),caseSensitiveSearch:s,wholeWordSearch:c,regexSearch:l,trigger:i,source:a},eventVersion:1,notebook:n,currentUser:r}))}],reportAbuse:v.e5,selectionCut:E.S2,selectionCopy:E.S2,sendSuggestion:A.gd,sendSuggestionFailed:d.Hh,sendSuggestionSucceeded:d.yy,setAuthorAcceptance:p.jp,setAuthors:p.Yx,setMode:function(e,t){var n=e.notebook,r=e.currentUser,i=t.id,a=t.source,s=t.trigger,c=t.mode;(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:setMode",data:{cellIds:[i],source:a,trigger:s,mode:c},eventVersion:1,notebook:n,currentUser:r}))},setDataSource:function(e,t){var n=e.notebook,r=e.currentUser,i=t.id,a=t.source;(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:setDataSource",data:{cellIds:[i],source:a.type},eventVersion:1,notebook:n,currentUser:r}))},setDataOperations:function(e,t){var n=e.notebook,r=e.currentUser,i=t.id,a=t.operations;(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:setDataOperations",data:{cellIds:[i],operations:a},eventVersion:1,notebook:n,currentUser:r}))},setName:function(e,t){var n=e.notebook,r=e.currentUser,a=t.id,s=t.source,c=(0,i.DY)(n.model,a).mode;(0,o.MR)((0,o.ym)({type:"notebook:cells:manage:setName",data:{cellIds:[a],source:s,trigger:"keypress",mode:c},eventVersion:1,notebook:n,currentUser:r}))},showModal:[r.k,function(e,t){var n=e.currentUser,r=e.notebook;switch(t.modal){case"license":(0,o.MR)((0,o.ym)({type:"notebook:view:licenseModal",data:{},eventVersion:2,notebook:r,currentUser:n}));break;case"addDatabase":(0,o.MR)((0,o.ym)({type:"notebook:view:addDatabaseModal",data:{},eventVersion:1,notebook:r,currentUser:n}));break;case"addCloudFile":(0,o.MR)((0,o.ym)({type:"notebook:view:cloudProviderModal",data:{},eventVersion:1,notebook:r,currentUser:n}));break;case"cloudFile":var i=t.modalProps.provider;(0,o.MR)((0,o.ym)({type:"notebook:view:cloudFileModal",data:{provider:i},eventVersion:1,notebook:r,currentUser:n}));break;case"replaceFile":(0,o.MR)((0,o.ym)({type:"notebook:view:replaceFileModal",data:{},eventVersion:1,notebook:r,currentUser:n}));break;case"embed":(0,o.MR)((0,o.ym)({type:"notebook:manage:embedModalOpen",data:{trigger:"click",source:t.source},eventVersion:3,notebook:r,currentUser:n}))}}],showComments:function(e,t){var n=e.notebook,r=e.currentUser,i=t.nodeId,a=t.trigger,s=t.source;(0,o.MR)((0,o.ym)({type:"notebook:cells:comment:showComments",data:{cellIds:[i],trigger:a,source:s},eventVersion:2,notebook:n,currentUser:r}))},showFindPane:M.zI,splitBefore:c,splitAfter:c,dismissSuggestionOpenBanner:function(e){var t=e.notebook,n=e.currentUser;(0,o.MR)((0,o.ym)({type:"notebook:view:suggestionOpenBannerDismissed",data:{base:(0,o.tb)(t.forkOf,n),target:(0,o.tb)(t,n)},eventVersion:1,notebook:t,currentUser:n}))},resolveDependencies:d.hX,showNotebookDependencyDetails:d.dX,toggleHelpPaneSection:function(e,t){var n=e.notebook,r=e.page,i=e.currentUser,a=t.section;r.helpPaneSectionsOpen.has(a)?function(e,t,n){(0,o.MR)((0,o.ym)({type:"notebook:view:helpPaneSectionCollapsed",data:{section:e},eventVersion:1,notebook:t,currentUser:n}))}(a,n,i):function(e,t,n){(0,o.MR)((0,o.ym)({type:"notebook:view:helpPaneSectionExpanded",data:{section:e},eventVersion:1,notebook:t,currentUser:n}))}(a,n,i)},toggleCollectionsPane:function(e){var t=e.notebook,n=e.currentUser,r=e.page;(0,o.MR)((0,o.ym)({type:r.collectionsSidebarOpen?"notebook:view:collectionsSidebarDismissed":"notebook:view:collectionsSidebarOpened",data:{},eventVersion:1,notebook:t,currentUser:n}))},toggleDependencyLock:d.JS,upgradeDependency:d.Nz,togglePane:[L.Ez,function(e,t){var n=e.page,r=e.notebook,i=e.currentUser,a=t.pane;n.pane===a?f(a,null,r,i):(n.pane&&f(n.pane,a,r,i),function(e,t,n){switch(e){case"snippets":(0,o.MR)((0,o.ym)({type:"notebook:view:snippetsPaneOpened",data:{},eventVersion:1,notebook:t,currentUser:n}));break;case"help":(0,o.MR)((0,o.ym)({type:"notebook:view:helpPaneOpened",data:{},eventVersion:1,notebook:t,currentUser:n}));break;case"data":(0,o.MR)((0,o.ym)({type:"notebook:view:dataPaneOpened",data:{},eventVersion:1,notebook:t,currentUser:n}));break;case"history":(0,o.MR)((0,o.ym)({type:"notebook:view:historyOpen",data:{},eventVersion:5,notebook:t,currentUser:n}));break;case"minimap":(0,o.MR)((0,o.ym)({type:"notebook:view:minimapPaneOpened",data:{},eventVersion:1,notebook:t,currentUser:n}));break;case"insights":(0,o.MR)((0,o.ym)({type:"notebook:view:insightsPaneOpened",data:{},eventVersion:1,notebook:t,currentUser:n}));break;case"find":(0,o.MR)((0,o.ym)({type:"notebook:view:findPaneOpened",data:{},eventVersion:1,notebook:t,currentUser:n}))}}(a,r,i))}],togglePin:function(e,t){var n=e.notebook,r=e.currentUser,i=t.id,a=!n.model.nodes.find((function(e){return e.id===i})).pinned;(0,o.MR)((0,o.ym)({type:a?"notebook:cells:manage:pin":"notebook:cells:manage:unpin",data:{cellIds:[i]},eventVersion:3,notebook:n,currentUser:r}))},toggleResolvedComments:function(e,t){var n=e.notebook,r=e.currentUser,i=t.nodeId,a=t.trigger,s=t.source;(0,o.MR)((0,o.ym)({type:"notebook:cells:comment:toggleResolved",data:{cellIds:[i],expanded:!n.expandedResolvedComments.has(i),trigger:a,source:s},eventVersion:2,notebook:n,currentUser:r}))},updateCommentingLock:[h.h,d.F5],updateSubscription:_.M,updateSubscriptionSucceeded:function(e,t){var n=e.notebook,r=e.currentUser,i=t.status,a=t.trigger,s=t.source;void 0!==a&&(0,o.MR)((0,o.ym)({type:"notebook:social:updateSubscription",data:{status:i,trigger:a,source:s},eventVersion:1,notebook:n,currentUser:r}))},viewSnippetsDocs:R.S2,welcomeMatNotebookClick:function(e,t){var n=e.currentUser,r=t.clickedNotebookId;(0,o.MR)((0,o.a$)({type:"marketing:view:welcomeMatNotebookClick",data:{clickedNotebookId:r},eventVersion:1,currentUser:n}))}}},55431:function(e,t,n){n.d(t,{c:function(){return i},q:function(){return a}});var r=n(59201),o=n(38559);function i(){return{pane:null,collectionsSidebarOpen:!1,suggestionOpenBannerDismissed:!1,helpPaneSectionsOpen:new Set(["gettingStarted","loadingData","exploringData","reusingCode","collaborating","troubleshooting","links","keyboardShortcuts"]),helpArticlesOpen:[],replaceInputExpanded:!1,findOptionsInputExpanded:!1}}var a={togglePane:r.lx,dismissPane:r.rE,toggleCollectionsPane:r.bI,dismissSuggestionOpenBanner:function(){return{suggestionOpenBannerDismissed:!0}},collectionsUpdated:r.Yd,toggleHelpPaneSection:r.GJ,closeHelpArticle:r.Gr,openHelpArticle:r.LZ,showNotebookDependencyDetails:function(e,t){return{pane:"dependencies",dependenciesPaneSpecifier:t.specifier}},removeDependenciesPaneSpecifier:function(){return{dependenciesPaneSpecifier:void 0}},toggleFindOptionsExpanded:o.lc,toggleReplaceInputExpanded:o.$k}}}]);
